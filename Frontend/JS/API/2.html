<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2: DOM Selection & Querying</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            line-height: 1.7;
            color: #1a1a2e;
            background: linear-gradient(135deg, #f0f4ff 0%, #e8ecf4 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 2.2rem;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        h2 {
            font-size: 1.5rem;
            color: #2d3748;
            margin: 35px 0 20px;
            padding-left: 15px;
            border-left: 4px solid #3b82f6;
        }
        
        h3 {
            font-size: 1.2rem;
            color: #4a5568;
            margin: 25px 0 15px;
        }
        
        h4 {
            font-size: 1.05rem;
            color: #553c9a;
            margin: 20px 0 12px;
        }
        
        p {
            margin-bottom: 15px;
            color: #4a5568;
        }
        
        .concept-box {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border-left: 4px solid #fc8181;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }
        
        .warning-box::before {
            content: "‚ö†Ô∏è Critical Difference";
            font-weight: bold;
            color: #c53030;
            display: block;
            margin-bottom: 10px;
        }
        
        .key-point {
            background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%);
            border-left: 4px solid #38b2ac;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }
        
        .key-point::before {
            content: "üîë Key Point";
            font-weight: bold;
            color: #234e52;
            display: block;
            margin-bottom: 10px;
        }
        
        .interview-tip {
            background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
            border-left: 4px solid #4299e1;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }
        
        .interview-tip::before {
            content: "üíº Interview Question";
            font-weight: bold;
            color: #2b6cb0;
            display: block;
            margin-bottom: 10px;
        }
        
        .production-tip {
            background: linear-gradient(135deg, #faf5ff 0%, #e9d8fd 100%);
            border-left: 4px solid #805ad5;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 20px 0;
        }
        
        .production-tip::before {
            content: "üöÄ Production Tip";
            font-weight: bold;
            color: #553c9a;
            display: block;
            margin-bottom: 10px;
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
        }
        
        code {
            font-family: 'Fira Code', 'Consolas', monospace;
        }
        
        .inline-code {
            background: #edf2f7;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            color: #e53e3e;
        }
        
        .keyword { color: #c792ea; }
        .string { color: #c3e88d; }
        .comment { color: #64748b; font-style: italic; }
        .function { color: #82aaff; }
        .variable { color: #f78c6c; }
        .property { color: #ffcb6b; }
        .result { color: #4ade80; }
        
        .diagram {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .comparison-table th {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .comparison-table tr:last-child td {
            border-bottom: none;
        }
        
        .comparison-table tr:hover {
            background: #f7fafc;
        }
        
        ul, ol {
            margin: 15px 0 15px 25px;
            color: #4a5568;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .section-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, transparent);
            margin: 40px 0;
        }
        
        .method-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #3b82f6;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .method-name {
            font-family: 'Fira Code', monospace;
            font-size: 1.1rem;
            color: #3b82f6;
            font-weight: bold;
        }
        
        .return-type {
            display: inline-block;
            background: #dbeafe;
            color: #1d4ed8;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 10px;
        }
        
        .live-badge {
            display: inline-block;
            background: #fef3c7;
            color: #d97706;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .static-badge {
            display: inline-block;
            background: #d1fae5;
            color: #059669;
            padding: 2px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .demo-box {
            background: #f8fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .demo-html {
            background: #1e293b;
            color: #94a3b8;
            padding: 15px;
            border-radius: 8px 8px 0 0;
            font-family: monospace;
            font-size: 0.85rem;
        }
        
        .demo-result {
            background: white;
            padding: 15px;
            border: 1px solid #e2e8f0;
            border-radius: 0 0 8px 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Chapter 2: DOM Selection & Querying</h1>
        <p class="subtitle">Finding Elements in the DOM ‚Äî The Foundation of All DOM Manipulation</p>
        
        <div class="concept-box">
            <p>Before you can manipulate any element in the DOM, you first need to <strong>select</strong> it. This chapter covers every method for finding elements, when to use each one, and critical differences that interviewers love to ask about.</p>
        </div>
        
        <!-- Section 2.1 -->
        <h2>2.1 Single Element Selection</h2>
        
        <p>These methods return a <strong>single element</strong> (or null if not found). Use them when you need exactly one element.</p>
        
        <div class="method-card">
            <span class="method-name">document.getElementById('id')</span>
            <span class="return-type">Element | null</span>
            
            <p style="margin-top: 15px;">The <strong>fastest</strong> way to select a single element. Directly accesses the browser's internal ID hash map.</p>
            
<pre><span class="comment">// HTML: &lt;div id="header"&gt;Welcome&lt;/div&gt;</span>

<span class="keyword">const</span> header = <span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'header'</span>);
<span class="variable">console</span>.<span class="function">log</span>(header);          <span class="result">// &lt;div id="header"&gt;Welcome&lt;/div&gt;</span>

<span class="comment">// If element doesn't exist:</span>
<span class="keyword">const</span> missing = <span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'nonexistent'</span>);
<span class="variable">console</span>.<span class="function">log</span>(missing);         <span class="result">// null</span>

<span class="comment">// ‚ö†Ô∏è Don't include # symbol!</span>
<span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'#header'</span>);  <span class="comment">// WRONG - returns null</span>
<span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'header'</span>);   <span class="comment">// CORRECT</span></pre>
        </div>
        
        <div class="method-card">
            <span class="method-name">document.querySelector('selector')</span>
            <span class="return-type">Element | null</span>
            
            <p style="margin-top: 15px;">The most versatile selection method. Uses CSS selector syntax ‚Äî any valid CSS selector works!</p>
            
<pre><span class="comment">// Select by ID</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'#header'</span>);

<span class="comment">// Select by class (returns FIRST match only)</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'.card'</span>);

<span class="comment">// Select by tag</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'p'</span>);

<span class="comment">// Complex selectors</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'div.container > p:first-child'</span>);
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'input[type="email"]'</span>);
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'nav ul li:nth-child(2) a'</span>);

<span class="comment">// Returns FIRST matching element</span>
<span class="comment">// &lt;p class="text"&gt;First&lt;/p&gt;</span>
<span class="comment">// &lt;p class="text"&gt;Second&lt;/p&gt;</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'.text'</span>);  <span class="result">// Returns "First" paragraph only</span></pre>
        </div>
        
        <div class="interview-tip">
            <strong>"When would you use getElementById vs querySelector?"</strong>
            <br><br>
            <ul>
                <li><strong>getElementById</strong>: When selecting by ID and performance matters. It's faster because it uses direct hash lookup.</li>
                <li><strong>querySelector</strong>: When you need complex selectors or consistent API. Slightly slower but more flexible.</li>
            </ul>
            <br>
            <strong>Performance:</strong> <span class="inline-code">getElementById</span> is ~2-3x faster, but the difference is negligible unless you're selecting thousands of elements in a loop.
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 2.2 -->
        <h2>2.2 Multiple Element Selection</h2>
        
        <p>These methods return <strong>collections</strong> of elements. Understanding the difference between Live and Static collections is crucial!</p>
        
        <div class="method-card">
            <span class="method-name">document.getElementsByClassName('class')</span>
            <span class="return-type">HTMLCollection</span>
            <span class="live-badge">LIVE</span>
            
<pre><span class="comment">// HTML:</span>
<span class="comment">// &lt;div class="card"&gt;Card 1&lt;/div&gt;</span>
<span class="comment">// &lt;div class="card"&gt;Card 2&lt;/div&gt;</span>
<span class="comment">// &lt;div class="card"&gt;Card 3&lt;/div&gt;</span>

<span class="keyword">const</span> cards = <span class="variable">document</span>.<span class="function">getElementsByClassName</span>(<span class="string">'card'</span>);
<span class="variable">console</span>.<span class="function">log</span>(cards.<span class="property">length</span>);     <span class="result">// 3</span>
<span class="variable">console</span>.<span class="function">log</span>(cards[<span class="variable">0</span>]);          <span class="result">// First card element</span>

<span class="comment">// ‚ö†Ô∏è Don't include dot!</span>
<span class="variable">document</span>.<span class="function">getElementsByClassName</span>(<span class="string">'.card'</span>);  <span class="comment">// WRONG</span>
<span class="variable">document</span>.<span class="function">getElementsByClassName</span>(<span class="string">'card'</span>);   <span class="comment">// CORRECT</span>

<span class="comment">// Multiple classes (elements must have ALL classes)</span>
<span class="variable">document</span>.<span class="function">getElementsByClassName</span>(<span class="string">'card active'</span>);</pre>
        </div>
        
        <div class="method-card">
            <span class="method-name">document.getElementsByTagName('tag')</span>
            <span class="return-type">HTMLCollection</span>
            <span class="live-badge">LIVE</span>
            
<pre><span class="comment">// Select all paragraphs</span>
<span class="keyword">const</span> paragraphs = <span class="variable">document</span>.<span class="function">getElementsByTagName</span>(<span class="string">'p'</span>);

<span class="comment">// Select all elements (rarely used)</span>
<span class="keyword">const</span> allElements = <span class="variable">document</span>.<span class="function">getElementsByTagName</span>(<span class="string">'*'</span>);

<span class="comment">// Select all divs inside a specific element</span>
<span class="keyword">const</span> container = <span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'container'</span>);
<span class="keyword">const</span> divsInside = container.<span class="function">getElementsByTagName</span>(<span class="string">'div'</span>);</pre>
        </div>
        
        <div class="method-card">
            <span class="method-name">document.getElementsByName('name')</span>
            <span class="return-type">NodeList</span>
            <span class="live-badge">LIVE</span>
            
<pre><span class="comment">// Commonly used for form elements with name attribute</span>
<span class="comment">// HTML: &lt;input type="radio" name="gender" value="male"&gt;</span>
<span class="comment">//       &lt;input type="radio" name="gender" value="female"&gt;</span>

<span class="keyword">const</span> genderInputs = <span class="variable">document</span>.<span class="function">getElementsByName</span>(<span class="string">'gender'</span>);
<span class="variable">console</span>.<span class="function">log</span>(genderInputs.<span class="property">length</span>);  <span class="result">// 2</span></pre>
        </div>
        
        <div class="method-card">
            <span class="method-name">document.querySelectorAll('selector')</span>
            <span class="return-type">NodeList</span>
            <span class="static-badge">STATIC</span>
            
<pre><span class="comment">// Most flexible - uses any CSS selector</span>
<span class="keyword">const</span> cards = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.card'</span>);
<span class="keyword">const</span> inputs = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'input[type="text"]'</span>);
<span class="keyword">const</span> items = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'ul.menu > li'</span>);

<span class="comment">// Multiple selectors (like CSS)</span>
<span class="keyword">const</span> headings = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'h1, h2, h3'</span>);

<span class="comment">// Returns empty NodeList if nothing found (not null!)</span>
<span class="keyword">const</span> nothing = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.nonexistent'</span>);
<span class="variable">console</span>.<span class="function">log</span>(nothing.<span class="property">length</span>);  <span class="result">// 0 (not null)</span>

<span class="comment">// Can use forEach directly (unlike HTMLCollection)</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.card'</span>).<span class="function">forEach</span>(card => {
    <span class="variable">console</span>.<span class="function">log</span>(card);
});</pre>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 2.3: Live vs Static - THE BIG DEAL -->
        <h2>2.3 Live vs Static Collections ‚Äî The Critical Difference</h2>
        
        <div class="warning-box">
            This is one of the <strong>most asked interview questions</strong> and a common source of bugs! Understanding this difference is essential.
        </div>
        
        <div class="diagram">
            <h3 style="margin-bottom: 20px;">Live vs Static Collections</h3>
            <svg viewBox="0 0 700 300" style="max-width: 700px;">
                <!-- Live Collection Box -->
                <rect x="20" y="20" width="300" height="260" rx="12" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
                <text x="170" y="50" text-anchor="middle" font-size="16" font-weight="bold" fill="#92400e">LIVE Collection</text>
                <text x="170" y="70" text-anchor="middle" font-size="11" fill="#b45309">getElementsBy* methods</text>
                
                <!-- Live characteristics -->
                <rect x="40" y="90" width="260" height="35" rx="6" fill="#fff" stroke="#fbbf24" stroke-width="1"/>
                <text x="170" y="113" text-anchor="middle" font-size="12" fill="#78350f">Auto-updates when DOM changes</text>
                
                <rect x="40" y="135" width="260" height="35" rx="6" fill="#fff" stroke="#fbbf24" stroke-width="1"/>
                <text x="170" y="158" text-anchor="middle" font-size="12" fill="#78350f">Reflects current DOM state</text>
                
                <rect x="40" y="180" width="260" height="35" rx="6" fill="#fff" stroke="#fbbf24" stroke-width="1"/>
                <text x="170" y="203" text-anchor="middle" font-size="12" fill="#78350f">Returns HTMLCollection</text>
                
                <rect x="40" y="225" width="260" height="35" rx="6" fill="#fef9c3" stroke="#fbbf24" stroke-width="1"/>
                <text x="170" y="248" text-anchor="middle" font-size="11" fill="#a16207">‚ö†Ô∏è Can cause infinite loops!</text>
                
                <!-- Static Collection Box -->
                <rect x="380" y="20" width="300" height="260" rx="12" fill="#d1fae5" stroke="#10b981" stroke-width="3"/>
                <text x="530" y="50" text-anchor="middle" font-size="16" font-weight="bold" fill="#065f46">STATIC Collection</text>
                <text x="530" y="70" text-anchor="middle" font-size="11" fill="#047857">querySelectorAll method</text>
                
                <!-- Static characteristics -->
                <rect x="400" y="90" width="260" height="35" rx="6" fill="#fff" stroke="#34d399" stroke-width="1"/>
                <text x="530" y="113" text-anchor="middle" font-size="12" fill="#064e3b">Snapshot at query time</text>
                
                <rect x="400" y="135" width="260" height="35" rx="6" fill="#fff" stroke="#34d399" stroke-width="1"/>
                <text x="530" y="158" text-anchor="middle" font-size="12" fill="#064e3b">Never changes after creation</text>
                
                <rect x="400" y="180" width="260" height="35" rx="6" fill="#fff" stroke="#34d399" stroke-width="1"/>
                <text x="530" y="203" text-anchor="middle" font-size="12" fill="#064e3b">Returns NodeList</text>
                
                <rect x="400" y="225" width="260" height="35" rx="6" fill="#d1fae5" stroke="#34d399" stroke-width="1"/>
                <text x="530" y="248" text-anchor="middle" font-size="11" fill="#047857">‚úì Safe for iteration</text>
            </svg>
        </div>
        
        <h3>See the Difference in Action:</h3>
        
<pre><span class="comment">// Initial HTML:</span>
<span class="comment">// &lt;ul id="list"&gt;</span>
<span class="comment">//   &lt;li class="item"&gt;Item 1&lt;/li&gt;</span>
<span class="comment">//   &lt;li class="item"&gt;Item 2&lt;/li&gt;</span>
<span class="comment">// &lt;/ul&gt;</span>

<span class="comment">// Get collections BEFORE adding new element</span>
<span class="keyword">const</span> liveCollection = <span class="variable">document</span>.<span class="function">getElementsByClassName</span>(<span class="string">'item'</span>);
<span class="keyword">const</span> staticCollection = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.item'</span>);

<span class="variable">console</span>.<span class="function">log</span>(<span class="string">'Before adding:'</span>);
<span class="variable">console</span>.<span class="function">log</span>(<span class="string">'Live:'</span>, liveCollection.<span class="property">length</span>);    <span class="result">// 2</span>
<span class="variable">console</span>.<span class="function">log</span>(<span class="string">'Static:'</span>, staticCollection.<span class="property">length</span>); <span class="result">// 2</span>

<span class="comment">// Now ADD a new item to the DOM</span>
<span class="keyword">const</span> newItem = <span class="variable">document</span>.<span class="function">createElement</span>(<span class="string">'li'</span>);
newItem.<span class="property">className</span> = <span class="string">'item'</span>;
newItem.<span class="property">textContent</span> = <span class="string">'Item 3'</span>;
<span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'list'</span>).<span class="function">appendChild</span>(newItem);

<span class="variable">console</span>.<span class="function">log</span>(<span class="string">'After adding:'</span>);
<span class="variable">console</span>.<span class="function">log</span>(<span class="string">'Live:'</span>, liveCollection.<span class="property">length</span>);    <span class="result">// 3 ‚Üê Auto-updated!</span>
<span class="variable">console</span>.<span class="function">log</span>(<span class="string">'Static:'</span>, staticCollection.<span class="property">length</span>); <span class="result">// 2 ‚Üê Still the same</span></pre>

        <h3>The Infinite Loop Bug:</h3>
        
<pre><span class="comment">// ‚ùå DANGER: This creates an INFINITE LOOP!</span>
<span class="keyword">const</span> divs = <span class="variable">document</span>.<span class="function">getElementsByTagName</span>(<span class="string">'div'</span>);

<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="variable">0</span>; i < divs.<span class="property">length</span>; i++) {
    <span class="keyword">const</span> newDiv = <span class="variable">document</span>.<span class="function">createElement</span>(<span class="string">'div'</span>);
    <span class="variable">document</span>.<span class="property">body</span>.<span class="function">appendChild</span>(newDiv);
    <span class="comment">// divs.length increases each iteration!</span>
    <span class="comment">// Loop never ends!</span>
}

<span class="comment">// ‚úÖ SOLUTION 1: Use querySelectorAll (static)</span>
<span class="keyword">const</span> divs = <span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'div'</span>);
divs.<span class="function">forEach</span>(div => {
    <span class="keyword">const</span> newDiv = <span class="variable">document</span>.<span class="function">createElement</span>(<span class="string">'div'</span>);
    <span class="variable">document</span>.<span class="property">body</span>.<span class="function">appendChild</span>(newDiv);
});

<span class="comment">// ‚úÖ SOLUTION 2: Cache the length</span>
<span class="keyword">const</span> divs = <span class="variable">document</span>.<span class="function">getElementsByTagName</span>(<span class="string">'div'</span>);
<span class="keyword">const</span> len = divs.<span class="property">length</span>;  <span class="comment">// Cache before loop</span>
<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="variable">0</span>; i < len; i++) {
    <span class="comment">// Safe now</span>
}

<span class="comment">// ‚úÖ SOLUTION 3: Convert to array</span>
<span class="keyword">const</span> divsArray = [...<span class="variable">document</span>.<span class="function">getElementsByTagName</span>(<span class="string">'div'</span>)];
<span class="comment">// Now it's a static array</span></pre>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>HTMLCollection (Live)</th>
                    <th>NodeList (Static from querySelectorAll)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Updates when DOM changes</td>
                    <td>‚úÖ Yes (automatically)</td>
                    <td>‚ùå No (snapshot)</td>
                </tr>
                <tr>
                    <td>forEach method</td>
                    <td>‚ùå No (must convert)</td>
                    <td>‚úÖ Yes</td>
                </tr>
                <tr>
                    <td>Contains only elements</td>
                    <td>‚úÖ Yes</td>
                    <td>‚úÖ Yes (from querySelectorAll)</td>
                </tr>
                <tr>
                    <td>Access by index</td>
                    <td>‚úÖ collection[0]</td>
                    <td>‚úÖ nodeList[0]</td>
                </tr>
                <tr>
                    <td>Access by name/id</td>
                    <td>‚úÖ collection.namedItem('id')</td>
                    <td>‚ùå No</td>
                </tr>
                <tr>
                    <td>Safe for DOM modification loop</td>
                    <td>‚ö†Ô∏è Risky</td>
                    <td>‚úÖ Safe</td>
                </tr>
            </tbody>
        </table>
        
        <div class="section-divider"></div>
        
        <!-- Section 2.4 -->
        <h2>2.4 Advanced CSS Selectors in JavaScript</h2>
        
        <p>Since <span class="inline-code">querySelector</span> and <span class="inline-code">querySelectorAll</span> use CSS selector syntax, you can leverage the full power of CSS selectors!</p>
        
        <h4>Attribute Selectors:</h4>
        
<pre><span class="comment">// Exact attribute value</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'input[type="text"]'</span>);

<span class="comment">// Has attribute (any value)</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'[data-active]'</span>);

<span class="comment">// Attribute starts with value</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'[href^="https"]'</span>);  <span class="comment">// Links starting with https</span>

<span class="comment">// Attribute ends with value</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'[src$=".png"]'</span>);    <span class="comment">// Images ending with .png</span>

<span class="comment">// Attribute contains value</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'[class*="btn"]'</span>);   <span class="comment">// Classes containing "btn"</span>

<span class="comment">// Data attributes</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'[data-user-id="123"]'</span>);
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'[data-status="active"]'</span>);</pre>

        <h4>Pseudo-class Selectors:</h4>
        
<pre><span class="comment">// Negation</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'input:not([disabled])'</span>);  <span class="comment">// Enabled inputs</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'.item:not(.hidden)'</span>);     <span class="comment">// Visible items</span>

<span class="comment">// Position-based</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'li:first-child'</span>);           <span class="comment">// First li</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'li:last-child'</span>);            <span class="comment">// Last li</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'li:nth-child(odd)'</span>);      <span class="comment">// Odd rows</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'li:nth-child(3n)'</span>);       <span class="comment">// Every 3rd</span>
<span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'li:nth-child(2)'</span>);          <span class="comment">// Second li</span>

<span class="comment">// Form states</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">':checked'</span>);               <span class="comment">// Checked inputs</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">':disabled'</span>);              <span class="comment">// Disabled elements</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">':focus'</span>);                 <span class="comment">// Focused element</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">':required'</span>);              <span class="comment">// Required fields</span>

<span class="comment">// Empty elements</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'p:empty'</span>);                <span class="comment">// Paragraphs with no content</span></pre>

        <h4>Combinator Selectors:</h4>
        
        <div class="diagram">
            <svg viewBox="0 0 700 280" style="max-width: 700px;">
                <!-- Descendant -->
                <rect x="20" y="20" width="320" height="110" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
                <text x="180" y="45" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">Descendant (space)</text>
                <text x="180" y="70" text-anchor="middle" font-family="monospace" font-size="13" fill="#15803d">'div p'</text>
                <text x="180" y="100" text-anchor="middle" font-size="11" fill="#4b5563">Selects ALL p inside div</text>
                <text x="180" y="118" text-anchor="middle" font-size="11" fill="#4b5563">(any depth)</text>
                
                <!-- Direct Child -->
                <rect x="360" y="20" width="320" height="110" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
                <text x="520" y="45" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">Direct Child ( > )</text>
                <text x="520" y="70" text-anchor="middle" font-family="monospace" font-size="13" fill="#2563eb">'div > p'</text>
                <text x="520" y="100" text-anchor="middle" font-size="11" fill="#4b5563">Selects ONLY direct child p</text>
                <text x="520" y="118" text-anchor="middle" font-size="11" fill="#4b5563">(immediate children only)</text>
                
                <!-- Adjacent Sibling -->
                <rect x="20" y="150" width="320" height="110" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
                <text x="180" y="175" text-anchor="middle" font-size="14" font-weight="bold" fill="#92400e">Adjacent Sibling ( + )</text>
                <text x="180" y="200" text-anchor="middle" font-family="monospace" font-size="13" fill="#d97706">'h2 + p'</text>
                <text x="180" y="230" text-anchor="middle" font-size="11" fill="#4b5563">Selects p immediately after h2</text>
                <text x="180" y="248" text-anchor="middle" font-size="11" fill="#4b5563">(next sibling only)</text>
                
                <!-- General Sibling -->
                <rect x="360" y="150" width="320" height="110" rx="10" fill="#fae8ff" stroke="#d946ef" stroke-width="2"/>
                <text x="520" y="175" text-anchor="middle" font-size="14" font-weight="bold" fill="#86198f">General Sibling ( ~ )</text>
                <text x="520" y="200" text-anchor="middle" font-family="monospace" font-size="13" fill="#a21caf">'h2 ~ p'</text>
                <text x="520" y="230" text-anchor="middle" font-size="11" fill="#4b5563">Selects ALL p siblings after h2</text>
                <text x="520" y="248" text-anchor="middle" font-size="11" fill="#4b5563">(all following siblings)</text>
            </svg>
        </div>
        
<pre><span class="comment">// Descendant - any nested element</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'nav a'</span>);       <span class="comment">// All links inside nav (any depth)</span>

<span class="comment">// Direct child - immediate children only</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'ul > li'</span>);    <span class="comment">// Only direct li children of ul</span>

<span class="comment">// Adjacent sibling - immediately next</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'h2 + p'</span>);     <span class="comment">// p that comes right after h2</span>

<span class="comment">// General sibling - all following siblings</span>
<span class="variable">document</span>.<span class="function">querySelectorAll</span>(<span class="string">'h2 ~ p'</span>);     <span class="comment">// All p siblings after h2</span></pre>

        <div class="section-divider"></div>
        
        <!-- Section 2.5 -->
        <h2>2.5 Scoped Selection ‚Äî Searching Within Elements</h2>
        
        <div class="concept-box">
            <p>You don't have to search the entire document! Any element can be used as a starting point for selection. This is more efficient and helps avoid selecting unintended elements.</p>
        </div>
        
<pre><span class="comment">// HTML:</span>
<span class="comment">// &lt;div id="sidebar"&gt;</span>
<span class="comment">//   &lt;a href="#"&gt;Sidebar Link&lt;/a&gt;</span>
<span class="comment">// &lt;/div&gt;</span>
<span class="comment">// &lt;div id="content"&gt;</span>
<span class="comment">//   &lt;a href="#"&gt;Content Link&lt;/a&gt;</span>
<span class="comment">// &lt;/div&gt;</span>

<span class="comment">// Get links ONLY from sidebar</span>
<span class="keyword">const</span> sidebar = <span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'sidebar'</span>);
<span class="keyword">const</span> sidebarLinks = sidebar.<span class="function">querySelectorAll</span>(<span class="string">'a'</span>);  <span class="comment">// Only sidebar links!</span>

<span class="comment">// Same works with all selection methods</span>
<span class="keyword">const</span> content = <span class="variable">document</span>.<span class="function">getElementById</span>(<span class="string">'content'</span>);
<span class="keyword">const</span> contentDivs = content.<span class="function">getElementsByTagName</span>(<span class="string">'div'</span>);
<span class="keyword">const</span> contentCards = content.<span class="function">getElementsByClassName</span>(<span class="string">'card'</span>);

<span class="comment">// Practical example: Form field selection</span>
<span class="keyword">const</span> form = <span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'#myForm'</span>);
<span class="keyword">const</span> emailInput = form.<span class="function">querySelector</span>(<span class="string">'input[type="email"]'</span>);
<span class="keyword">const</span> allInputs = form.<span class="function">querySelectorAll</span>(<span class="string">'input'</span>);</pre>

        <div class="production-tip">
            <strong>Always scope your selections</strong> when working with components or sections. This prevents accidentally selecting elements from other parts of the page and makes your code more maintainable.
<pre style="margin-top: 10px;"><span class="comment">// Component pattern</span>
<span class="keyword">class</span> <span class="function">Modal</span> {
    <span class="function">constructor</span>(element) {
        <span class="keyword">this</span>.element = element;
        <span class="comment">// Scoped selections - only find elements INSIDE this modal</span>
        <span class="keyword">this</span>.closeBtn = <span class="keyword">this</span>.element.<span class="function">querySelector</span>(<span class="string">'.close-btn'</span>);
        <span class="keyword">this</span>.content = <span class="keyword">this</span>.element.<span class="function">querySelector</span>(<span class="string">'.modal-content'</span>);
    }
}</pre>
        </div>
        
        <div class="section-divider"></div>
        
        <!-- Section 2.6 -->
        <h2>2.6 element.closest() and element.matches()</h2>
        
        <p>Two powerful methods for working with element relationships:</p>
        
        <div class="method-card">
            <span class="method-name">element.matches('selector')</span>
            <span class="return-type">Boolean</span>
            
            <p style="margin-top: 15px;">Tests if an element matches a CSS selector. Returns <span class="inline-code">true</span> or <span class="inline-code">false</span>.</p>
            
<pre><span class="comment">// HTML: &lt;button class="btn btn-primary" disabled&gt;Click&lt;/button&gt;</span>

<span class="keyword">const</span> btn = <span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'button'</span>);

btn.<span class="function">matches</span>(<span class="string">'.btn'</span>);            <span class="result">// true</span>
btn.<span class="function">matches</span>(<span class="string">'.btn-primary'</span>);    <span class="result">// true</span>
btn.<span class="function">matches</span>(<span class="string">'[disabled]'</span>);      <span class="result">// true</span>
btn.<span class="function">matches</span>(<span class="string">'button.btn'</span>);      <span class="result">// true</span>
btn.<span class="function">matches</span>(<span class="string">'.btn-secondary'</span>);  <span class="result">// false</span>
btn.<span class="function">matches</span>(<span class="string">'input'</span>);           <span class="result">// false</span>

<span class="comment">// Useful in event handlers</span>
<span class="variable">document</span>.<span class="function">addEventListener</span>(<span class="string">'click'</span>, (e) => {
    <span class="keyword">if</span> (e.<span class="property">target</span>.<span class="function">matches</span>(<span class="string">'.delete-btn'</span>)) {
        <span class="comment">// Handle delete button click</span>
    }
});</pre>
        </div>
        
        <div class="method-card">
            <span class="method-name">element.closest('selector')</span>
            <span class="return-type">Element | null</span>
            
            <p style="margin-top: 15px;">Traverses up the DOM tree to find the nearest ancestor (including the element itself) that matches the selector.</p>
            
<pre><span class="comment">// HTML:</span>
<span class="comment">// &lt;div class="card" data-id="123"&gt;</span>
<span class="comment">//   &lt;div class="card-body"&gt;</span>
<span class="comment">//     &lt;button class="delete-btn"&gt;Delete&lt;/button&gt;</span>
<span class="comment">//   &lt;/div&gt;</span>
<span class="comment">// &lt;/div&gt;</span>

<span class="keyword">const</span> btn = <span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'.delete-btn'</span>);

<span class="comment">// Find nearest ancestor with class "card"</span>
<span class="keyword">const</span> card = btn.<span class="function">closest</span>(<span class="string">'.card'</span>);
<span class="variable">console</span>.<span class="function">log</span>(card.<span class="property">dataset</span>.<span class="property">id</span>);  <span class="result">// "123"</span>

<span class="comment">// Checks self too!</span>
btn.<span class="function">closest</span>(<span class="string">'button'</span>);   <span class="result">// Returns the button itself</span>
btn.<span class="function">closest</span>(<span class="string">'.card'</span>);    <span class="result">// Returns the card div</span>
btn.<span class="function">closest</span>(<span class="string">'form'</span>);     <span class="result">// null (no form ancestor)</span></pre>
        </div>
        
        <h3>Power Pattern: Event Delegation with closest()</h3>
        
<pre><span class="comment">// Instead of adding click handlers to every button...</span>
<span class="comment">// Use ONE handler on the parent!</span>

<span class="keyword">const</span> list = <span class="variable">document</span>.<span class="function">querySelector</span>(<span class="string">'.item-list'</span>);

list.<span class="function">addEventListener</span>(<span class="string">'click'</span>, (e) => {
    <span class="comment">// Find which item was clicked (if any)</span>
    <span class="keyword">const</span> item = e.<span class="property">target</span>.<span class="function">closest</span>(<span class="string">'.item'</span>);
    
    <span class="keyword">if</span> (!item) <span class="keyword">return</span>;  <span class="comment">// Clicked outside items</span>
    <span class="keyword">if</span> (!list.<span class="function">contains</span>(item)) <span class="keyword">return</span>;  <span class="comment">// Safety check</span>
    
    <span class="comment">// Check what action was clicked</span>
    <span class="keyword">if</span> (e.<span class="property">target</span>.<span class="function">matches</span>(<span class="string">'.delete-btn'</span>)) {
        deleteItem(item.<span class="property">dataset</span>.<span class="property">id</span>);
    } <span class="keyword">else if</span> (e.<span class="property">target</span>.<span class="function">matches</span>(<span class="string">'.edit-btn'</span>)) {
        editItem(item.<span class="property">dataset</span>.<span class="property">id</span>);
    }
});

<span class="comment">// Benefits:</span>
<span class="comment">// ‚úÖ Works for dynamically added items</span>
<span class="comment">// ‚úÖ Uses less memory (one handler vs many)</span>
<span class="comment">// ‚úÖ Simpler event management</span></pre>

        <div class="key-point">
            <strong>closest() is essential for event delegation</strong> ‚Äî It lets you find which parent component was interacted with, regardless of which nested element was actually clicked.
        </div>
        
        <div class="section-divider"></div>
        
        <h2>Chapter 2 Summary ‚Äî Quick Reference</h2>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Returns</th>
                    <th>Live?</th>
                    <th>Use When</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="inline-code">getElementById()</span></td>
                    <td>Element | null</td>
                    <td>N/A</td>
                    <td>Fastest single element by ID</td>
                </tr>
                <tr>
                    <td><span class="inline-code">querySelector()</span></td>
                    <td>Element | null</td>
                    <td>N/A</td>
                    <td>Single element, complex selector</td>
                </tr>
                <tr>
                    <td><span class="inline-code">getElementsByClassName()</span></td>
                    <td>HTMLCollection</td>
                    <td>‚úÖ Live</td>
                    <td>Need live updates</td>
                </tr>
                <tr>
                    <td><span class="inline-code">getElementsByTagName()</span></td>
                    <td>HTMLCollection</td>
                    <td>‚úÖ Live</td>
                    <td>All elements of type</td>
                </tr>
                <tr>
                    <td><span class="inline-code">querySelectorAll()</span></td>
                    <td>NodeList</td>
                    <td>‚ùå Static</td>
                    <td>Multiple elements, safe iteration</td>
                </tr>
                <tr>
                    <td><span class="inline-code">closest()</span></td>
                    <td>Element | null</td>
                    <td>N/A</td>
                    <td>Find ancestor element</td>
                </tr>
                <tr>
                    <td><span class="inline-code">matches()</span></td>
                    <td>Boolean</td>
                    <td>N/A</td>
                    <td>Test if element matches selector</td>
                </tr>
            </tbody>
        </table>
        
        <div class="interview-tip">
            <strong>Top Interview Questions from this Chapter:</strong>
            <ol>
                <li>What's the difference between Live and Static collections?</li>
                <li>When would getElementsByClassName cause an infinite loop?</li>
                <li>How do querySelector and querySelectorAll differ from getElementsBy* methods?</li>
                <li>What does closest() do and when would you use it?</li>
                <li>How would you implement event delegation?</li>
            </ol>
        </div>
    </div>
</body>
</html>

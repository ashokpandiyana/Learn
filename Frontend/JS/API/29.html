<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 29: Drag and Drop API</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .header p { font-size: 1.2em; opacity: 0.95; }
        .content { padding: 40px; }
        .section { margin-bottom: 40px; }
        h2 { color: #667eea; font-size: 2em; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 3px solid #667eea; }
        h3 { color: #764ba2; font-size: 1.5em; margin: 30px 0 15px 0; }
        .concept-box { background: #f8f9fa; border-left: 4px solid #667eea; padding: 20px; margin: 20px 0; border-radius: 5px; }
        .key-point { background: #d4edda; border-left: 4px solid #28a745; padding: 15px; margin: 20px 0; border-radius: 5px; }
        .warning-box { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 5px; }
        .info-box { background: #cfe2ff; border-left: 4px solid #0d6efd; padding: 15px; margin: 20px 0; border-radius: 5px; }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        .code-block .comment { color: #6272a4; }
        .code-block .keyword { color: #ff79c6; }
        .code-block .string { color: #f1fa8c; }
        .code-block .function { color: #50fa7b; }
        .code-block .number { color: #bd93f9; }
        .demo-section { background: #e7f3ff; padding: 30px; border-radius: 10px; margin: 30px 0; }
        .draggable {
            padding: 20px;
            margin: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            cursor: move;
            user-select: none;
            transition: all 0.3s;
            text-align: center;
            font-weight: bold;
        }
        .draggable:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .draggable.dragging { opacity: 0.5; transform: rotate(5deg); }
        .drop-zone {
            min-height: 200px;
            padding: 20px;
            margin: 10px;
            border: 3px dashed #667eea;
            border-radius: 10px;
            background: white;
            display: flex;
            flex-direction: column;
            gap: 10px;
            transition: all 0.3s;
        }
        .drop-zone.drag-over {
            background: #e7f3ff;
            border-color: #764ba2;
            border-style: solid;
            box-shadow: inset 0 0 20px rgba(102, 126, 234, 0.2);
        }
        .drop-zone.empty {
            align-items: center;
            justify-content: center;
            color: #999;
            font-style: italic;
        }
        code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Courier New', monospace; color: #d63384; }
        .event-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .event-card { background: #f8f9fa; padding: 20px; border-radius: 10px; border: 2px solid #667eea; }
        .event-card h4 { color: #667eea; margin-bottom: 10px; }
        .output { background: white; padding: 15px; border-radius: 5px; margin-top: 15px; min-height: 80px; border: 2px solid #667eea; max-height: 300px; overflow-y: auto; }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-weight: 600;
            margin: 5px;
        }
        button:hover { background: #764ba2; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .file-drop-zone {
            min-height: 200px;
            border: 3px dashed #667eea;
            border-radius: 10px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            transition: all 0.3s;
            font-size: 1.2em;
            color: #999;
        }
        .file-drop-zone.drag-over {
            background: #e7f3ff;
            border-color: #764ba2;
            border-style: solid;
        }
        .file-list { margin-top: 15px; }
        .file-item {
            background: #f8f9fa;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ±Ô∏è Chapter 29: Drag and Drop API</h1>
            <p>Native Drag and Drop in the Browser</p>
        </div>
        
        <div class="content">
            
            <div class="section">
                <h2>üéØ What is Drag and Drop?</h2>
                
                <div class="concept-box">
                    <p><strong>Drag and Drop API</strong> enables users to drag elements and drop them onto other elements. It's a native HTML5 API that works across browsers and supports files from the operating system.</p>
                    
                    <p style="margin-top: 15px;"><strong>Key Features:</strong></p>
                    <ul style="margin-left: 25px; margin-top: 10px;">
                        <li>üñ±Ô∏è <strong>Native Support:</strong> Built into browsers</li>
                        <li>üìÅ <strong>File Drops:</strong> Accept files from desktop</li>
                        <li>üé® <strong>Customizable:</strong> Visual feedback and effects</li>
                        <li>üìä <strong>DataTransfer:</strong> Pass data between elements</li>
                        <li>üîÑ <strong>Event-Driven:</strong> Complete lifecycle events</li>
                        <li>üåê <strong>Cross-Element:</strong> Drag between any elements</li>
                    </ul>
                </div>
                
                <div class="info-box">
                    <strong>üí° Common Use Cases:</strong>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Sortable lists (kanban boards, todo lists)</li>
                        <li>File uploaders</li>
                        <li>Image galleries</li>
                        <li>Tree views and hierarchies</li>
                        <li>Dashboard widgets</li>
                        <li>Calendar events</li>
                    </ul>
                </div>
            </div>
            
            <div class="section">
                <h2>üé¨ Drag and Drop Events</h2>
                
                <div class="concept-box">
                    <p>Drag and drop has two sets of events: one for the <strong>draggable element</strong> and one for the <strong>drop target</strong>.</p>
                </div>
                
                <h3>Events on Draggable Element</h3>
                <div class="event-grid">
                    <div class="event-card">
                        <h4>dragstart</h4>
                        <p>Fires when user starts dragging</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">Set data and drag image here</p>
                    </div>
                    <div class="event-card">
                        <h4>drag</h4>
                        <p>Fires continuously during drag</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">Every few hundred milliseconds</p>
                    </div>
                    <div class="event-card">
                        <h4>dragend</h4>
                        <p>Fires when drag operation ends</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">Success or cancelled</p>
                    </div>
                </div>
                
                <h3>Events on Drop Target</h3>
                <div class="event-grid">
                    <div class="event-card">
                        <h4>dragenter</h4>
                        <p>Fires when dragged item enters</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">Show drop zone feedback</p>
                    </div>
                    <div class="event-card">
                        <h4>dragover</h4>
                        <p>Fires while over drop zone</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">‚ö†Ô∏è Must preventDefault!</p>
                    </div>
                    <div class="event-card">
                        <h4>dragleave</h4>
                        <p>Fires when leaving drop zone</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">Remove visual feedback</p>
                    </div>
                    <div class="event-card">
                        <h4>drop</h4>
                        <p>Fires when item is dropped</p>
                        <p style="margin-top: 5px; font-size: 0.9em; color: #666;">Handle the drop action</p>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h2>üöÄ Making Elements Draggable</h2>
                
                <h3>Step 1: Enable Dragging</h3>
                <div class="code-block">
<span class="comment">// HTML: Add draggable attribute</span>
<span class="comment">// &lt;div draggable="true" id="item1"&gt;Drag me&lt;/div&gt;</span>

<span class="comment">// Or set via JavaScript</span>
<span class="keyword">const</span> element = document.<span class="function">getElementById</span>(<span class="string">'item1'</span>);
element.draggable = <span class="keyword">true</span>;
                </div>
                
                <h3>Step 2: Handle dragstart Event</h3>
                <div class="code-block">
<span class="keyword">const</span> draggable = document.<span class="function">querySelector</span>(<span class="string">'.draggable'</span>);

draggable.<span class="function">addEventListener</span>(<span class="string">'dragstart'</span>, (e) => {
    <span class="comment">// Store data about what's being dragged</span>
    e.dataTransfer.<span class="function">setData</span>(<span class="string">'text/plain'</span>, e.target.id);
    
    <span class="comment">// Set allowed effects</span>
    e.dataTransfer.effectAllowed = <span class="string">'move'</span>;
    <span class="comment">// Options: 'copy', 'move', 'link', 'copyMove', 'linkMove', 'all', 'none'</span>
    
    <span class="comment">// Add visual feedback</span>
    e.target.classList.<span class="function">add</span>(<span class="string">'dragging'</span>);
    
    <span class="comment">// Optional: Set custom drag image</span>
    <span class="keyword">const</span> dragImage = document.<span class="function">createElement</span>(<span class="string">'div'</span>);
    dragImage.textContent = <span class="string">'üì¶ Dragging...'</span>;
    dragImage.style.position = <span class="string">'absolute'</span>;
    dragImage.style.top = <span class="string">'-1000px'</span>;
    document.body.<span class="function">appendChild</span>(dragImage);
    e.dataTransfer.<span class="function">setDragImage</span>(dragImage, <span class="number">0</span>, <span class="number">0</span>);
});

draggable.<span class="function">addEventListener</span>(<span class="string">'dragend'</span>, (e) => {
    <span class="comment">// Clean up</span>
    e.target.classList.<span class="function">remove</span>(<span class="string">'dragging'</span>);
});
                </div>
            </div>
            
            <div class="section">
                <h2>üéØ Creating Drop Zones</h2>
                
                <div class="code-block">
<span class="keyword">const</span> dropZone = document.<span class="function">querySelector</span>(<span class="string">'.drop-zone'</span>);

<span class="comment">// dragenter - visual feedback when entering</span>
dropZone.<span class="function">addEventListener</span>(<span class="string">'dragenter'</span>, (e) => {
    e.<span class="function">preventDefault</span>();
    dropZone.classList.<span class="function">add</span>(<span class="string">'drag-over'</span>);
});

<span class="comment">// dragover - MUST preventDefault to allow drop!</span>
dropZone.<span class="function">addEventListener</span>(<span class="string">'dragover'</span>, (e) => {
    e.<span class="function">preventDefault</span>(); <span class="comment">// CRITICAL!</span>
    e.dataTransfer.dropEffect = <span class="string">'move'</span>;
    <span class="comment">// Options: 'copy', 'move', 'link', 'none'</span>
});

<span class="comment">// dragleave - remove feedback when leaving</span>
dropZone.<span class="function">addEventListener</span>(<span class="string">'dragleave'</span>, (e) => {
    <span class="comment">// Check if actually leaving (not entering child)</span>
    <span class="keyword">if</span> (e.target === dropZone) {
        dropZone.classList.<span class="function">remove</span>(<span class="string">'drag-over'</span>);
    }
});

<span class="comment">// drop - handle the drop</span>
dropZone.<span class="function">addEventListener</span>(<span class="string">'drop'</span>, (e) => {
    e.<span class="function">preventDefault</span>(); <span class="comment">// Prevent default (opening file)</span>
    dropZone.classList.<span class="function">remove</span>(<span class="string">'drag-over'</span>);
    
    <span class="comment">// Get the data</span>
    <span class="keyword">const</span> id = e.dataTransfer.<span class="function">getData</span>(<span class="string">'text/plain'</span>);
    <span class="keyword">const</span> element = document.<span class="function">getElementById</span>(id);
    
    <span class="comment">// Move element to drop zone</span>
    <span class="keyword">if</span> (element) {
        dropZone.<span class="function">appendChild</span>(element);
    }
});
                </div>
                
                <div class="warning-box">
                    <strong>‚ö†Ô∏è CRITICAL:</strong> You MUST call <code>preventDefault()</code> in the <code>dragover</code> event handler, or the drop won't work!
                </div>
            </div>
            
            <div class="section">
                <h2>üì¶ DataTransfer Object</h2>
                
                <div class="concept-box">
                    <p><strong>DataTransfer</strong> holds the data being dragged and provides methods to access it.</p>
                </div>
                
                <h3>Setting and Getting Data</h3>
                <div class="code-block">
<span class="comment">// Set data (in dragstart)</span>
e.dataTransfer.<span class="function">setData</span>(<span class="string">'text/plain'</span>, <span class="string">'Simple text'</span>);
e.dataTransfer.<span class="function">setData</span>(<span class="string">'text/html'</span>, <span class="string">'&lt;b&gt;HTML&lt;/b&gt;'</span>);
e.dataTransfer.<span class="function">setData</span>(<span class="string">'application/json'</span>, JSON.<span class="function">stringify</span>({ id: <span class="number">1</span> }));

<span class="comment">// Can set multiple formats</span>
e.dataTransfer.<span class="function">setData</span>(<span class="string">'text/plain'</span>, <span class="string">'Plain version'</span>);
e.dataTransfer.<span class="function">setData</span>(<span class="string">'text/html'</span>, <span class="string">'&lt;b&gt;Rich version&lt;/b&gt;'</span>);

<span class="comment">// Get data (in drop)</span>
<span class="keyword">const</span> text = e.dataTransfer.<span class="function">getData</span>(<span class="string">'text/plain'</span>);
<span class="keyword">const</span> html = e.dataTransfer.<span class="function">getData</span>(<span class="string">'text/html'</span>);
<span class="keyword">const</span> json = JSON.<span class="function">parse</span>(e.dataTransfer.<span class="function">getData</span>(<span class="string">'application/json'</span>));

<span class="comment">// Check available types</span>
console.<span class="function">log</span>(e.dataTransfer.types); <span class="comment">// ['text/plain', 'text/html']</span>

<span class="comment">// Clear data</span>
e.dataTransfer.<span class="function">clearData</span>(); <span class="comment">// Clear all</span>
e.dataTransfer.<span class="function">clearData</span>(<span class="string">'text/plain'</span>); <span class="comment">// Clear specific</span>
                </div>
                
                <h3>DataTransfer Properties</h3>
                <div class="code-block">
<span class="comment">// Effect allowed (set in dragstart)</span>
e.dataTransfer.effectAllowed = <span class="string">'move'</span>;
<span class="comment">// 'copy', 'move', 'link', 'copyMove', 'linkMove', 'copyLink', 'all', 'none'</span>

<span class="comment">// Drop effect (set in dragover)</span>
e.dataTransfer.dropEffect = <span class="string">'copy'</span>;
<span class="comment">// 'copy', 'move', 'link', 'none'</span>

<span class="comment">// Files being dragged</span>
<span class="keyword">const</span> files = e.dataTransfer.files; <span class="comment">// FileList</span>

<span class="comment">// Items (DataTransferItemList)</span>
<span class="keyword">const</span> items = e.dataTransfer.items;
                </div>
            </div>
            
            <div class="section">
                <h2>üìÅ File Drag and Drop</h2>
                
                <div class="code-block">
<span class="comment">// Drop zone for files</span>
<span class="keyword">const</span> dropZone = document.<span class="function">getElementById</span>(<span class="string">'file-drop'</span>);

dropZone.<span class="function">addEventListener</span>(<span class="string">'dragover'</span>, (e) => {
    e.<span class="function">preventDefault</span>();
    e.dataTransfer.dropEffect = <span class="string">'copy'</span>;
    dropZone.classList.<span class="function">add</span>(<span class="string">'drag-over'</span>);
});

dropZone.<span class="function">addEventListener</span>(<span class="string">'dragleave'</span>, (e) => {
    dropZone.classList.<span class="function">remove</span>(<span class="string">'drag-over'</span>);
});

dropZone.<span class="function">addEventListener</span>(<span class="string">'drop'</span>, (e) => {
    e.<span class="function">preventDefault</span>();
    dropZone.classList.<span class="function">remove</span>(<span class="string">'drag-over'</span>);
    
    <span class="comment">// Get dropped files</span>
    <span class="keyword">const</span> files = e.dataTransfer.files;
    
    <span class="comment">// Process each file</span>
    Array.<span class="function">from</span>(files).<span class="function">forEach</span>(file => {
        console.<span class="function">log</span>(<span class="string">'Dropped:'</span>, file.name, file.type, file.size);
        <span class="function">processFile</span>(file);
    });
});

<span class="comment">// Using DataTransferItemList (more powerful)</span>
dropZone.<span class="function">addEventListener</span>(<span class="string">'drop'</span>, (e) => {
    e.<span class="function">preventDefault</span>();
    
    <span class="keyword">const</span> items = e.dataTransfer.items;
    
    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> items) {
        <span class="keyword">if</span> (item.kind === <span class="string">'file'</span>) {
            <span class="keyword">const</span> file = item.<span class="function">getAsFile</span>();
            <span class="function">processFile</span>(file);
        }
    }
});
                </div>
            </div>
            
            <div class="section">
                <h2>üíº Practical Examples</h2>
                
                <h3>1. Sortable List</h3>
                <div class="code-block">
<span class="comment">// Make list items sortable</span>
<span class="keyword">const</span> list = document.<span class="function">querySelector</span>(<span class="string">'.sortable-list'</span>);
<span class="keyword">let</span> draggedElement = <span class="keyword">null</span>;

list.<span class="function">addEventListener</span>(<span class="string">'dragstart'</span>, (e) => {
    <span class="keyword">if</span> (e.target.classList.<span class="function">contains</span>(<span class="string">'draggable'</span>)) {
        draggedElement = e.target;
        e.target.classList.<span class="function">add</span>(<span class="string">'dragging'</span>);
    }
});

list.<span class="function">addEventListener</span>(<span class="string">'dragover'</span>, (e) => {
    e.<span class="function">preventDefault</span>();
    
    <span class="keyword">const</span> afterElement = <span class="function">getDragAfterElement</span>(list, e.clientY);
    
    <span class="keyword">if</span> (afterElement == <span class="keyword">null</span>) {
        list.<span class="function">appendChild</span>(draggedElement);
    } <span class="keyword">else</span> {
        list.<span class="function">insertBefore</span>(draggedElement, afterElement);
    }
});

list.<span class="function">addEventListener</span>(<span class="string">'dragend'</span>, (e) => {
    e.target.classList.<span class="function">remove</span>(<span class="string">'dragging'</span>);
});

<span class="keyword">function</span> <span class="function">getDragAfterElement</span>(container, y) {
    <span class="keyword">const</span> draggableElements = [
        ...container.<span class="function">querySelectorAll</span>(<span class="string">'.draggable:not(.dragging)'</span>)
    ];
    
    <span class="keyword">return</span> draggableElements.<span class="function">reduce</span>((closest, child) => {
        <span class="keyword">const</span> box = child.<span class="function">getBoundingClientRect</span>();
        <span class="keyword">const</span> offset = y - box.top - box.height / <span class="number">2</span>;
        
        <span class="keyword">if</span> (offset < <span class="number">0</span> && offset > closest.offset) {
            <span class="keyword">return</span> { offset, element: child };
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> closest;
        }
    }, { offset: <span class="number">-Infinity</span> }).element;
}
                </div>
                
                <h3>2. File Upload with Drag & Drop</h3>
                <div class="code-block">
<span class="keyword">class</span> <span class="function">FileDropUploader</span> {
    <span class="keyword">constructor</span>(dropZoneElement) {
        <span class="keyword">this</span>.dropZone = dropZoneElement;
        <span class="keyword">this</span>.files = [];
        <span class="keyword">this</span>.<span class="function">setupEvents</span>();
    }
    
    <span class="function">setupEvents</span>() {
        <span class="comment">// Prevent default drag behaviors</span>
        [<span class="string">'dragenter'</span>, <span class="string">'dragover'</span>, <span class="string">'dragleave'</span>, <span class="string">'drop'</span>].<span class="function">forEach</span>(eventName => {
            <span class="keyword">this</span>.dropZone.<span class="function">addEventListener</span>(eventName, (e) => {
                e.<span class="function">preventDefault</span>();
                e.<span class="function">stopPropagation</span>();
            });
        });
        
        [<span class="string">'dragenter'</span>, <span class="string">'dragover'</span>].<span class="function">forEach</span>(eventName => {
            <span class="keyword">this</span>.dropZone.<span class="function">addEventListener</span>(eventName, () => {
                <span class="keyword">this</span>.dropZone.classList.<span class="function">add</span>(<span class="string">'drag-over'</span>);
            });
        });
        
        [<span class="string">'dragleave'</span>, <span class="string">'drop'</span>].<span class="function">forEach</span>(eventName => {
            <span class="keyword">this</span>.dropZone.<span class="function">addEventListener</span>(eventName, () => {
                <span class="keyword">this</span>.dropZone.classList.<span class="function">remove</span>(<span class="string">'drag-over'</span>);
            });
        });
        
        <span class="keyword">this</span>.dropZone.<span class="function">addEventListener</span>(<span class="string">'drop'</span>, (e) => {
            <span class="keyword">const</span> files = Array.<span class="function">from</span>(e.dataTransfer.files);
            <span class="keyword">this</span>.<span class="function">handleFiles</span>(files);
        });
    }
    
    <span class="function">handleFiles</span>(files) {
        files.<span class="function">forEach</span>(file => {
            <span class="keyword">if</span> (<span class="keyword">this</span>.<span class="function">validateFile</span>(file)) {
                <span class="keyword">this</span>.files.<span class="function">push</span>(file);
                <span class="keyword">this</span>.<span class="function">onFileAdded</span>?.(file);
            }
        });
    }
    
    <span class="function">validateFile</span>(file) {
        <span class="comment">// Example: Only images under 5MB</span>
        <span class="keyword">const</span> maxSize = <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">// 5MB</span>
        
        <span class="keyword">if</span> (!file.type.<span class="function">startsWith</span>(<span class="string">'image/'</span>)) {
            console.<span class="function">error</span>(<span class="string">'Only images allowed'</span>);
            <span class="keyword">return false</span>;
        }
        
        <span class="keyword">if</span> (file.size > maxSize) {
            console.<span class="function">error</span>(<span class="string">'File too large'</span>);
            <span class="keyword">return false</span>;
        }
        
        <span class="keyword">return true</span>;
    }
}
                </div>
            </div>
            
            <div class="section">
                <h2>üéÆ Interactive Demo</h2>
                
                <div class="demo-section">
                    <h3>Drag and Drop Elements</h3>
                    <p style="margin-bottom: 15px;">Drag items between zones</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                        <div>
                            <h4 style="margin-bottom: 10px;">Source Items</h4>
                            <div class="drop-zone" id="zone1">
                                <div class="draggable" draggable="true" id="item1">üì¶ Item 1</div>
                                <div class="draggable" draggable="true" id="item2">üì¶ Item 2</div>
                                <div class="draggable" draggable="true" id="item3">üì¶ Item 3</div>
                            </div>
                        </div>
                        <div>
                            <h4 style="margin-bottom: 10px;">Drop Zone</h4>
                            <div class="drop-zone empty" id="zone2">
                                Drop items here
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="resetDemo()">Reset Demo</button>
                    
                    <h3 style="margin-top: 30px;">File Drop Zone</h3>
                    <p style="margin-bottom: 15px;">Drag files from your computer</p>
                    
                    <div class="file-drop-zone" id="fileDropZone">
                        üìÅ Drop files here or click to select
                    </div>
                    
                    <div class="file-list" id="fileList"></div>
                    
                    <div class="output" id="output">Drag items or files to see events...</div>
                </div>
            </div>
            
            <div class="section">
                <h2>‚úÖ Best Practices</h2>
                
                <div class="key-point">
                    <h3 style="margin-top: 0;">DO ‚úì</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Always preventDefault in dragover</li>
                        <li>Provide clear visual feedback</li>
                        <li>Validate file types and sizes</li>
                        <li>Handle dragleave correctly (check target)</li>
                        <li>Clean up drag effects in dragend</li>
                        <li>Test on multiple browsers</li>
                    </ul>
                </div>
                
                <div class="warning-box">
                    <h3 style="margin-top: 0;">DON'T ‚úó</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Forget preventDefault in dragover</li>
                        <li>Make everything draggable</li>
                        <li>Ignore accessibility (provide keyboard alternatives)</li>
                        <li>Forget to handle file validation</li>
                        <li>Create confusing drop targets</li>
                    </ul>
                </div>
            </div>
            
        </div>
    </div>
    
    <script>
        let draggedItem = null;
        
        function log(message, type = 'info') {
            const output = document.getElementById('output');
            const colors = { info: '#0d6efd', success: '#28a745', error: '#dc3545' };
            output.innerHTML += `<div style="color: ${colors[type]};">${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        // Setup draggable items
        document.querySelectorAll('.draggable').forEach(item => {
            item.addEventListener('dragstart', (e) => {
                draggedItem = e.target;
                e.dataTransfer.setData('text/plain', e.target.id);
                e.dataTransfer.effectAllowed = 'move';
                e.target.classList.add('dragging');
                log(`üñ±Ô∏è Started dragging: ${e.target.textContent}`, 'info');
            });
            
            item.addEventListener('dragend', (e) => {
                e.target.classList.remove('dragging');
                log(`‚úì Drag ended: ${e.target.textContent}`, 'success');
            });
        });
        
        // Setup drop zones
        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragenter', (e) => {
                e.preventDefault();
                zone.classList.add('drag-over');
            });
            
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            });
            
            zone.addEventListener('dragleave', (e) => {
                if (e.target === zone) {
                    zone.classList.remove('drag-over');
                }
            });
            
            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('drag-over');
                zone.classList.remove('empty');
                
                const id = e.dataTransfer.getData('text/plain');
                const element = document.getElementById(id);
                
                if (element) {
                    zone.appendChild(element);
                    log(`üì¶ Dropped ${element.textContent} into ${zone.id}`, 'success');
                }
            });
        });
        
        // File drop zone
        const fileDropZone = document.getElementById('fileDropZone');
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            fileDropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
            });
        });
        
        ['dragenter', 'dragover'].forEach(eventName => {
            fileDropZone.addEventListener(eventName, () => {
                fileDropZone.classList.add('drag-over');
            });
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            fileDropZone.addEventListener(eventName, () => {
                fileDropZone.classList.remove('drag-over');
            });
        });
        
        fileDropZone.addEventListener('drop', (e) => {
            const files = Array.from(e.dataTransfer.files);
            const fileList = document.getElementById('fileList');
            
            if (files.length === 0) return;
            
            log(`üìÅ Dropped ${files.length} file(s)`, 'success');
            
            files.forEach(file => {
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `
                    <span>üìÑ ${file.name} (${(file.size / 1024).toFixed(2)} KB)</span>
                    <span style="color: #667eea;">${file.type || 'Unknown type'}</span>
                `;
                fileList.appendChild(div);
                log(`  ‚Ä¢ ${file.name}`, 'info');
            });
        });
        
        fileDropZone.addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = 'file';
            input.multiple = true;
            input.onchange = (e) => {
                const files = Array.from(e.target.files);
                fileDropZone.dispatchEvent(new DragEvent('drop', {
                    dataTransfer: new DataTransfer()
                }));
                files.forEach(f => {
                    const dt = new DataTransfer();
                    dt.items.add(f);
                    const event = new DragEvent('drop', { dataTransfer: dt });
                    fileDropZone.dispatchEvent(event);
                });
            };
            input.click();
        });
        
        function resetDemo() {
            const zone1 = document.getElementById('zone1');
            zone1.innerHTML = `
                <div class="draggable" draggable="true" id="item1">üì¶ Item 1</div>
                <div class="draggable" draggable="true" id="item2">üì¶ Item 2</div>
                <div class="draggable" draggable="true" id="item3">üì¶ Item 3</div>
            `;
            
            const zone2 = document.getElementById('zone2');
            zone2.innerHTML = 'Drop items here';
            zone2.classList.add('empty');
            
            document.getElementById('fileList').innerHTML = '';
            document.getElementById('output').innerHTML = '';
            
            // Re-setup event listeners
            document.querySelectorAll('.draggable').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedItem = e.target;
                    e.dataTransfer.setData('text/plain', e.target.id);
                    e.target.classList.add('dragging');
                    log(`üñ±Ô∏è Started dragging: ${e.target.textContent}`, 'info');
                });
                
                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                });
            });
            
            log('üîÑ Demo reset', 'success');
        }
        
        window.addEventListener('load', () => {
            log('üëã Welcome to Drag & Drop Demo!', 'success');
            log('Drag items between zones or drop files', 'info');
        });
    </script>
</body>
</html>
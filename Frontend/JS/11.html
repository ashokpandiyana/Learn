<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Error Handling - Chapter 11</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 50px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #fa709a;
        }
        
        .section h2 {
            color: #fa709a;
            margin-bottom: 20px;
            font-size: 2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section h3 {
            color: #fe8a71;
            margin: 25px 0 15px 0;
            font-size: 1.5em;
        }
        
        .section h4 {
            color: #666;
            margin: 20px 0 10px 0;
            font-size: 1.2em;
        }
        
        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .code-block code {
            display: block;
            white-space: pre;
        }
        
        .keyword { color: #c678dd; }
        .string { color: #98c379; }
        .number { color: #d19a66; }
        .comment { color: #5c6370; font-style: italic; }
        .function { color: #61afef; }
        .property { color: #e06c75; }
        
        .visual-box {
            background: white;
            border: 2px solid #fa709a;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .comparison-table th {
            background: #fa709a;
            color: white;
            padding: 15px;
            text-align: left;
        }
        
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .comparison-table tr:last-child td {
            border-bottom: none;
        }
        
        .comparison-table tr:hover {
            background: #fff5f7;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .note strong {
            color: #856404;
        }
        
        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .warning strong {
            color: #721c24;
        }
        
        .tip {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .tip strong {
            color: #0c5460;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .success strong {
            color: #155724;
        }
        
        .interactive-demo {
            background: white;
            border: 2px solid #fe8a71;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .interactive-demo button {
            background: #fa709a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }
        
        .interactive-demo button:hover {
            background: #fe8a71;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .interactive-demo input {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            margin: 5px;
            width: 200px;
        }
        
        .output {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: monospace;
            min-height: 50px;
            white-space: pre-wrap;
        }
        
        .error-flow {
            background: linear-gradient(135deg, #fff5f7 0%, #ffe5e9 100%);
            border: 3px solid #fa709a;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .flow-box {
            background: white;
            border: 2px solid #fa709a;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .flow-box h4 {
            color: #fa709a;
            margin-bottom: 10px;
        }
        
        .arrow-down {
            text-align: center;
            font-size: 32px;
            color: #fa709a;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .error-type-box {
            background: white;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .error-type-box h4 {
            color: #dc3545;
            margin-bottom: 10px;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .example-card {
            background: white;
            border: 2px solid #fa709a;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .example-card h4 {
            color: #fa709a;
            margin-bottom: 15px;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-top: 10px;
        }
        
        li {
            margin: 8px 0;
        }
        
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ°Ô∏è Chapter 11: Error Handling</h1>
            <p>Master Robust Error Management in JavaScript</p>
        </header>
        
        <div class="content">
            <!-- Section 1: Understanding Errors -->
            <div class="section" id="understanding-errors">
                <h2>üéØ 1. Understanding Errors</h2>
                
                <p><strong>Errors</strong> are objects that represent problems in code execution. Proper error handling prevents crashes and provides better user experience.</p>
                
                <h3>1.1 What Happens When Errors Occur?</h3>
                
                <div class="code-block">
<code><span class="comment">// Without error handling - program crashes</span>
<span class="function">console</span>.<span class="function">log</span>(<span class="string">"Before error"</span>);

<span class="keyword">const</span> obj = <span class="keyword">null</span>;
<span class="function">console</span>.<span class="function">log</span>(obj.property);  <span class="comment">// ‚ùå Uncaught TypeError</span>

<span class="function">console</span>.<span class="function">log</span>(<span class="string">"After error"</span>);  <span class="comment">// Never executes!</span>

<span class="comment">// With error handling - program continues</span>
<span class="function">console</span>.<span class="function">log</span>(<span class="string">"Before error"</span>);

<span class="keyword">try</span> {
    <span class="keyword">const</span> obj = <span class="keyword">null</span>;
    <span class="function">console</span>.<span class="function">log</span>(obj.property);  <span class="comment">// Error caught!</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Caught error:"</span>, error.message);
}

<span class="function">console</span>.<span class="function">log</span>(<span class="string">"After error"</span>);  <span class="comment">// ‚úÖ Executes!</span></code>
                </div>
                
                <div class="error-flow">
                    <h4 style="text-align: center; color: #fa709a; margin-bottom: 20px;">‚ö° Error Flow Without Handling</h4>
                    
                    <div class="flow-box">
                        <h4>1. Code Executing Normally</h4>
                        <p>console.log("Before error") ‚úÖ</p>
                    </div>
                    
                    <div class="arrow-down">‚Üì</div>
                    
                    <div class="flow-box" style="background: #f8d7da; border-color: #dc3545;">
                        <h4>2. Error Occurs!</h4>
                        <p>obj.property throws TypeError ‚ùå</p>
                    </div>
                    
                    <div class="arrow-down">‚Üì</div>
                    
                    <div class="flow-box" style="background: #f8d7da; border-color: #dc3545;">
                        <h4>3. Execution Stops</h4>
                        <p>Remaining code doesn't run üí•</p>
                    </div>
                </div>
                
                <div class="note">
                    <strong>üí° Why Error Handling Matters:</strong>
                    <ul>
                        <li>Prevents application crashes</li>
                        <li>Provides meaningful feedback to users</li>
                        <li>Enables graceful degradation</li>
                        <li>Helps with debugging</li>
                        <li>Allows recovery from failures</li>
                    </ul>
                </div>
            </div>

            <!-- Section 2: Built-in Error Types -->
            <div class="section" id="error-types">
                <h2>üìã 2. Built-in Error Types</h2>
                
                <p>JavaScript has several built-in error types for different error scenarios.</p>
                
                <h3>2.1 Error Types Overview</h3>
                
                <div class="error-type-box">
                    <h4>1. Error (Base Class)</h4>
                    <p>Generic error - parent of all error types</p>
                    <div class="code-block">
<code><span class="keyword">const</span> error = <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Something went wrong"</span>);
<span class="function">console</span>.<span class="function">log</span>(error.name);     <span class="comment">// "Error"</span>
<span class="function">console</span>.<span class="function">log</span>(error.message);  <span class="comment">// "Something went wrong"</span>
<span class="function">console</span>.<span class="function">log</span>(error.stack);    <span class="comment">// Stack trace</span></code>
                    </div>
                </div>
                
                <div class="error-type-box">
                    <h4>2. SyntaxError</h4>
                    <p>Invalid JavaScript syntax</p>
                    <div class="code-block">
<code><span class="comment">// Occurs at parse time</span>
<span class="keyword">try</span> {
    <span class="keyword">eval</span>(<span class="string">"let x = ;"</span>);  <span class="comment">// Invalid syntax</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> SyntaxError);  <span class="comment">// true</span>
}</code>
                    </div>
                </div>
                
                <div class="error-type-box">
                    <h4>3. ReferenceError</h4>
                    <p>Variable doesn't exist or not accessible</p>
                    <div class="code-block">
<code><span class="keyword">try</span> {
    <span class="function">console</span>.<span class="function">log</span>(undefinedVariable);  <span class="comment">// Variable not declared</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> ReferenceError);  <span class="comment">// true</span>
    <span class="function">console</span>.<span class="function">log</span>(error.message);  <span class="comment">// "undefinedVariable is not defined"</span>
}</code>
                    </div>
                </div>
                
                <div class="error-type-box">
                    <h4>4. TypeError</h4>
                    <p>Value is not of expected type or operation not supported</p>
                    <div class="code-block">
<code><span class="keyword">try</span> {
    <span class="keyword">const</span> num = <span class="number">42</span>;
    num.<span class="function">toUpperCase</span>();  <span class="comment">// Numbers don't have toUpperCase</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> TypeError);  <span class="comment">// true</span>
}

<span class="keyword">try</span> {
    <span class="keyword">null</span>.<span class="function">toString</span>();  <span class="comment">// Can't call method on null</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> TypeError);  <span class="comment">// true</span>
}</code>
                    </div>
                </div>
                
                <div class="error-type-box">
                    <h4>5. RangeError</h4>
                    <p>Value is not in the allowed range</p>
                    <div class="code-block">
<code><span class="keyword">try</span> {
    <span class="keyword">const</span> arr = <span class="keyword">new</span> <span class="function">Array</span>(-<span class="number">1</span>);  <span class="comment">// Negative array length</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> RangeError);  <span class="comment">// true</span>
}

<span class="keyword">try</span> {
    <span class="keyword">const</span> num = <span class="number">1</span>;
    num.<span class="function">toFixed</span>(<span class="number">101</span>);  <span class="comment">// Precision out of range (0-100)</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> RangeError);  <span class="comment">// true</span>
}</code>
                    </div>
                </div>
                
                <div class="error-type-box">
                    <h4>6. URIError</h4>
                    <p>Invalid use of URI handling functions</p>
                    <div class="code-block">
<code><span class="keyword">try</span> {
    <span class="function">decodeURIComponent</span>(<span class="string">"%"</span>);  <span class="comment">// Malformed URI</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error <span class="keyword">instanceof</span> URIError);  <span class="comment">// true</span>
}</code>
                    </div>
                </div>
                
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Error Type</th>
                            <th>When It Occurs</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Error</strong></td>
                            <td>Generic errors</td>
                            <td>Base class for all errors</td>
                        </tr>
                        <tr>
                            <td><strong>SyntaxError</strong></td>
                            <td>Invalid syntax</td>
                            <td><code>eval("let x = ;")</code></td>
                        </tr>
                        <tr>
                            <td><strong>ReferenceError</strong></td>
                            <td>Variable not found</td>
                            <td><code>console.log(x)</code> (x not declared)</td>
                        </tr>
                        <tr>
                            <td><strong>TypeError</strong></td>
                            <td>Wrong type or unsupported operation</td>
                            <td><code>null.toString()</code></td>
                        </tr>
                        <tr>
                            <td><strong>RangeError</strong></td>
                            <td>Value out of range</td>
                            <td><code>new Array(-1)</code></td>
                        </tr>
                        <tr>
                            <td><strong>URIError</strong></td>
                            <td>Invalid URI handling</td>
                            <td><code>decodeURIComponent("%")</code></td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="interactive-demo">
                    <h4>üéÆ Error Type Explorer</h4>
                    <button onclick="triggerTypeError()">Trigger TypeError</button>
                    <button onclick="triggerReferenceError()">Trigger ReferenceError</button>
                    <button onclick="triggerRangeError()">Trigger RangeError</button>
                    <div class="output" id="errorTypeOutput"></div>
                </div>
            </div>

            <!-- Section 3: Try-Catch-Finally -->
            <div class="section" id="try-catch-finally">
                <h2>üîß 3. Try-Catch-Finally Blocks</h2>
                
                <h3>3.1 Basic Try-Catch</h3>
                
                <div class="code-block">
<code><span class="comment">// Try block - code that might throw error</span>
<span class="keyword">try</span> {
    <span class="keyword">const</span> result = riskyOperation();
    <span class="function">console</span>.<span class="function">log</span>(result);
} <span class="keyword">catch</span> (error) {
    <span class="comment">// Catch block - handle error</span>
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"An error occurred:"</span>, error.message);
}

<span class="comment">// Real example: JSON parsing</span>
<span class="keyword">function</span> <span class="function">parseJSON</span>(jsonString) {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> data = <span class="function">JSON</span>.<span class="function">parse</span>(jsonString);
        <span class="keyword">return</span> { success: <span class="keyword">true</span>, data };
    } <span class="keyword">catch</span> (error) {
        <span class="keyword">return</span> { success: <span class="keyword">false</span>, error: error.message };
    }
}

<span class="function">console</span>.<span class="function">log</span>(<span class="function">parseJSON</span>(<span class="string">'{"name": "Alice"}'</span>));  <span class="comment">// ‚úÖ Success</span>
<span class="function">console</span>.<span class="function">log</span>(<span class="function">parseJSON</span>(<span class="string">'{invalid json}'</span>));     <span class="comment">// ‚úÖ Handled error</span></code>
                </div>
                
                <h3>3.2 The Finally Block</h3>
                
                <div class="code-block">
<code><span class="comment">// finally ALWAYS executes - success or failure</span>
<span class="keyword">function</span> <span class="function">processFile</span>(filename) {
    <span class="keyword">let</span> file;
    
    <span class="keyword">try</span> {
        file = <span class="function">openFile</span>(filename);  <span class="comment">// Might throw error</span>
        <span class="keyword">const</span> data = file.<span class="function">read</span>();
        <span class="keyword">return</span> data;
    } <span class="keyword">catch</span> (error) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error reading file:"</span>, error);
        <span class="keyword">return</span> <span class="keyword">null</span>;
    } <span class="keyword">finally</span> {
        <span class="comment">// Cleanup - runs regardless of success/failure</span>
        <span class="keyword">if</span> (file) {
            file.<span class="function">close</span>();  <span class="comment">// Always close file</span>
        }
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Cleanup complete"</span>);
    }
}

<span class="comment">// finally runs even with return in try/catch!</span>
<span class="keyword">function</span> <span class="function">test</span>() {
    <span class="keyword">try</span> {
        <span class="keyword">return</span> <span class="string">"from try"</span>;
    } <span class="keyword">finally</span> {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"finally runs first"</span>);
    }
}

<span class="function">console</span>.<span class="function">log</span>(<span class="function">test</span>());
<span class="comment">// Output:
// "finally runs first"
// "from try"</span></code>
                </div>
                
                <div class="error-flow">
                    <h4 style="text-align: center; color: #fa709a; margin-bottom: 20px;">üîÑ Try-Catch-Finally Flow</h4>
                    
                    <div class="grid-2">
                        <div>
                            <div class="flow-box" style="background: #d4edda; border-color: #28a745;">
                                <h4>‚úÖ Success Path</h4>
                                <p>1. try block executes</p>
                                <p>2. No errors occur</p>
                                <p>3. finally block executes</p>
                                <p>4. Return from try</p>
                            </div>
                        </div>
                        <div>
                            <div class="flow-box" style="background: #f8d7da; border-color: #dc3545;">
                                <h4>‚ùå Error Path</h4>
                                <p>1. try block starts</p>
                                <p>2. Error occurs</p>
                                <p>3. catch block executes</p>
                                <p>4. finally block executes</p>
                                <p>5. Return from catch</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="warning">
                    <strong>‚ö†Ô∏è Important:</strong> If <code>finally</code> has a <code>return</code> statement, it overrides any return value from <code>try</code> or <code>catch</code>!
                </div>
                
                <h3>3.3 Nested Try-Catch</h3>
                
                <div class="code-block">
<code><span class="keyword">try</span> {
    <span class="keyword">try</span> {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Inner error"</span>);
    } <span class="keyword">catch</span> (innerError) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Caught in inner:"</span>, innerError.message);
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Re-throwing from inner"</span>);
    }
} <span class="keyword">catch</span> (outerError) {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Caught in outer:"</span>, outerError.message);
}</code>
                </div>
                
                <div class="interactive-demo">
                    <h4>üéÆ Try-Catch-Finally Demo</h4>
                    <button onclick="demoTryCatch()">Run Try-Catch</button>
                    <button onclick="demoFinally()">Run Finally</button>
                    <div class="output" id="tryCatchOutput"></div>
                </div>
            </div>

            <!-- Section 4: Throwing Errors -->
            <div class="section" id="throwing-errors">
                <h2>üí• 4. Throwing Errors</h2>
                
                <h3>4.1 The throw Statement</h3>
                
                <div class="code-block">
<code><span class="comment">// Can throw any value (not just Error objects)</span>
<span class="keyword">throw</span> <span class="string">"Error message"</span>;        <span class="comment">// String</span>
<span class="keyword">throw</span> <span class="number">42</span>;                       <span class="comment">// Number</span>
<span class="keyword">throw</span> <span class="keyword">true</span>;                     <span class="comment">// Boolean</span>
<span class="keyword">throw</span> { message: <span class="string">"Error"</span> };    <span class="comment">// Object</span>

<span class="comment">// ‚úÖ BEST PRACTICE: Always throw Error objects</span>
<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Something went wrong"</span>);

<span class="comment">// Why? Error objects include stack traces!</span>
<span class="keyword">try</span> {
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Test error"</span>);
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(error.stack);  <span class="comment">// Full stack trace for debugging!</span>
}</code>
                </div>
                
                <h3>4.2 Validation with Throw</h3>
                
                <div class="code-block">
<code><span class="keyword">function</span> <span class="function">divide</span>(a, b) {
    <span class="comment">// Input validation</span>
    <span class="keyword">if</span> (<span class="keyword">typeof</span> a !== <span class="string">'number'</span> || <span class="keyword">typeof</span> b !== <span class="string">'number'</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">TypeError</span>(<span class="string">"Arguments must be numbers"</span>);
    }
    
    <span class="keyword">if</span> (b === <span class="number">0</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Cannot divide by zero"</span>);
    }
    
    <span class="keyword">return</span> a / b;
}

<span class="keyword">try</span> {
    <span class="function">console</span>.<span class="function">log</span>(<span class="function">divide</span>(<span class="number">10</span>, <span class="number">2</span>));   <span class="comment">// 5 ‚úÖ</span>
    <span class="function">console</span>.<span class="function">log</span>(<span class="function">divide</span>(<span class="number">10</span>, <span class="number">0</span>));   <span class="comment">// ‚ùå Throws error</span>
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">error</span>(error.message);  <span class="comment">// "Cannot divide by zero"</span>
}</code>
                </div>
                
                <h3>4.3 When to Throw vs Return</h3>
                
                <div class="grid-2">
                    <div class="example-card">
                        <h4>‚ùå Using Return for Errors</h4>
                        <div class="code-block">
<code><span class="keyword">function</span> <span class="function">getUser</span>(id) {
    <span class="keyword">if</span> (!id) {
        <span class="keyword">return</span> <span class="keyword">null</span>;  <span class="comment">// Unclear if error or valid</span>
    }
    <span class="comment">// ...</span>
}

<span class="keyword">const</span> user = <span class="function">getUser</span>();
<span class="keyword">if</span> (!user) {
    <span class="comment">// Is this an error or valid null?</span>
}</code>
                        </div>
                    </div>
                    
                    <div class="example-card">
                        <h4>‚úÖ Using Throw for Errors</h4>
                        <div class="code-block">
<code><span class="keyword">function</span> <span class="function">getUser</span>(id) {
    <span class="keyword">if</span> (!id) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"ID required"</span>);
    }
    <span class="comment">// ...</span>
}

<span class="keyword">try</span> {
    <span class="keyword">const</span> user = <span class="function">getUser</span>();
} <span class="keyword">catch</span> (error) {
    <span class="comment">// Clear error handling</span>
    <span class="function">console</span>.<span class="function">error</span>(error.message);
}</code>
                        </div>
                    </div>
                </div>
                
                <div class="tip">
                    <strong>üí° Best Practice:</strong> Throw errors for exceptional conditions (things that shouldn't happen). Use return values for expected outcomes (like "not found").
                </div>
            </div>

            <!-- Section 5: Custom Error Classes -->
            <div class="section" id="custom-errors">
                <h2>üé® 5. Custom Error Classes</h2>
                
                <p>Create custom error types for specific error scenarios in your application.</p>
                
                <h3>5.1 Basic Custom Error</h3>
                
                <div class="code-block">
<code><span class="comment">// Extend Error class</span>
<span class="keyword">class</span> <span class="function">ValidationError</span> <span class="keyword">extends</span> <span class="function">Error</span> {
    <span class="function">constructor</span>(message) {
        <span class="keyword">super</span>(message);
        <span class="keyword">this</span>.name = <span class="string">"ValidationError"</span>;  <span class="comment">// Set error name</span>
    }
}

<span class="keyword">function</span> <span class="function">validateAge</span>(age) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> age !== <span class="string">'number'</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">ValidationError</span>(<span class="string">"Age must be a number"</span>);
    }
    <span class="keyword">if</span> (age < <span class="number">0</span> || age > <span class="number">150</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">RangeError</span>(<span class="string">"Age must be between 0 and 150"</span>);
    }
    <span class="keyword">return</span> <span class="keyword">true</span>;
}

<span class="keyword">try</span> {
    <span class="function">validateAge</span>(<span class="string">"25"</span>);
} <span class="keyword">catch</span> (error) {
    <span class="keyword">if</span> (error <span class="keyword">instanceof</span> ValidationError) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Validation failed:"</span>, error.message);
    } <span class="keyword">else</span> <span class="keyword">if</span> (error <span class="keyword">instanceof</span> RangeError) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Range error:"</span>, error.message);
    } <span class="keyword">else</span> {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Unknown error:"</span>, error);
    }
}</code>
                </div>
                
                <h3>5.2 Advanced Custom Errors</h3>
                
                <div class="code-block">
<code><span class="comment">// Custom error with additional properties</span>
<span class="keyword">class</span> <span class="function">HTTPError</span> <span class="keyword">extends</span> <span class="function">Error</span> {
    <span class="function">constructor</span>(message, statusCode) {
        <span class="keyword">super</span>(message);
        <span class="keyword">this</span>.name = <span class="string">"HTTPError"</span>;
        <span class="keyword">this</span>.statusCode = statusCode;
        <span class="keyword">this</span>.timestamp = <span class="keyword">new</span> <span class="function">Date</span>();
    }
    
    <span class="function">isClientError</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.statusCode >= <span class="number">400</span> && <span class="keyword">this</span>.statusCode < <span class="number">500</span>;
    }
    
    <span class="function">isServerError</span>() {
        <span class="keyword">return</span> <span class="keyword">this</span>.statusCode >= <span class="number">500</span>;
    }
}

<span class="keyword">class</span> <span class="function">NotFoundError</span> <span class="keyword">extends</span> <span class="function">HTTPError</span> {
    <span class="function">constructor</span>(resource) {
        <span class="keyword">super</span>(<span class="string">`${resource} not found`</span>, <span class="number">404</span>);
        <span class="keyword">this</span>.name = <span class="string">"NotFoundError"</span>;
        <span class="keyword">this</span>.resource = resource;
    }
}

<span class="keyword">class</span> <span class="function">UnauthorizedError</span> <span class="keyword">extends</span> <span class="function">HTTPError</span> {
    <span class="function">constructor</span>(message = <span class="string">"Unauthorized access"</span>) {
        <span class="keyword">super</span>(message, <span class="number">401</span>);
        <span class="keyword">this</span>.name = <span class="string">"UnauthorizedError"</span>;
    }
}

<span class="comment">// Usage in API</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">fetchUser</span>(id) {
    <span class="keyword">if</span> (!id) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">ValidationError</span>(<span class="string">"User ID is required"</span>);
    }
    
    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="function">fetch</span>(<span class="string">`/api/users/${id}`</span>);
    
    <span class="keyword">if</span> (response.status === <span class="number">404</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">NotFoundError</span>(<span class="string">"User"</span>);
    }
    
    <span class="keyword">if</span> (response.status === <span class="number">401</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">UnauthorizedError</span>();
    }
    
    <span class="keyword">if</span> (!response.ok) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">HTTPError</span>(<span class="string">"Request failed"</span>, response.status);
    }
    
    <span class="keyword">return</span> response.<span class="function">json</span>();
}

<span class="comment">// Handle different error types</span>
<span class="keyword">try</span> {
    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="function">fetchUser</span>(<span class="number">123</span>);
} <span class="keyword">catch</span> (error) {
    <span class="keyword">if</span> (error <span class="keyword">instanceof</span> NotFoundError) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">`${error.resource} not found`</span>);
    } <span class="keyword">else</span> <span class="keyword">if</span> (error <span class="keyword">instanceof</span> UnauthorizedError) {
        <span class="comment">// Redirect to login</span>
        window.location = <span class="string">'/login'</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (error <span class="keyword">instanceof</span> HTTPError) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">`HTTP ${error.statusCode}: ${error.message}`</span>);
    } <span class="keyword">else</span> {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Unknown error"</span>, error);
    }
}</code>
                </div>
                
                <div class="success">
                    <strong>‚úÖ Benefits of Custom Errors:</strong>
                    <ul>
                        <li>Specific error handling based on type</li>
                        <li>Add context-specific properties</li>
                        <li>Better debugging with descriptive names</li>
                        <li>Cleaner error handling code</li>
                    </ul>
                </div>
                
                <div class="interactive-demo">
                    <h4>üéÆ Custom Error Demo</h4>
                    <input type="number" id="ageInput" placeholder="Enter age" min="0" max="150">
                    <button onclick="validateAge()">Validate Age</button>
                    <div class="output" id="customErrorOutput"></div>
                </div>
            </div>

            <!-- Section 6: Error Handling in Promises -->
            <div class="section" id="promise-errors">
                <h2>ü§ù 6. Error Handling in Promises</h2>
                
                <h3>6.1 Promise Rejection</h3>
                
                <div class="code-block">
<code><span class="comment">// Promise can be rejected in two ways</span>

<span class="comment">// 1. Using reject()</span>
<span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="function">Promise</span>((resolve, reject) => {
    <span class="keyword">const</span> success = <span class="keyword">false</span>;
    
    <span class="keyword">if</span> (success) {
        <span class="function">resolve</span>(<span class="string">"Success!"</span>);
    } <span class="keyword">else</span> {
        <span class="function">reject</span>(<span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Failed!"</span>));
    }
});

<span class="comment">// 2. Throwing error in promise</span>
<span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="function">Promise</span>((resolve, reject) => {
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Error thrown!"</span>);  <span class="comment">// Automatically rejects</span>
});

<span class="comment">// Both are caught by .catch()</span>
promise1.<span class="function">catch</span>(error => <span class="function">console</span>.<span class="function">error</span>(error.message));
promise2.<span class="function">catch</span>(error => <span class="function">console</span>.<span class="function">error</span>(error.message));</code>
                </div>
                
                <h3>6.2 Error Propagation in Promise Chains</h3>
                
                <div class="code-block">
<code><span class="comment">// Error in any .then() propagates to .catch()</span>
<span class="function">Promise</span>.<span class="function">resolve</span>(<span class="number">5</span>)
    .<span class="function">then</span>(num => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Step 1:"</span>, num);  <span class="comment">// Executes</span>
        <span class="keyword">return</span> num * <span class="number">2</span>;
    })
    .<span class="function">then</span>(num => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Step 2:"</span>, num);  <span class="comment">// Executes</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Error in step 2"</span>);  <span class="comment">// Error!</span>
    })
    .<span class="function">then</span>(num => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Step 3:"</span>, num);  <span class="comment">// Skipped!</span>
    })
    .<span class="function">catch</span>(error => {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Caught:"</span>, error.message);  <span class="comment">// Catches error</span>
    })
    .<span class="function">then</span>(() => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"After catch"</span>);  <span class="comment">// ‚úÖ Executes! Chain continues</span>
    });

<span class="comment">// Output:
// Step 1: 5
// Step 2: 10
// Caught: Error in step 2
// After catch</span></code>
                </div>
                
                <h3>6.3 Recovering from Errors</h3>
                
                <div class="code-block">
<code><span class="comment">// .catch() can return value to recover</span>
<span class="function">fetchUserFromCache</span>()
    .<span class="function">catch</span>(() => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Cache miss, fetching from API"</span>);
        <span class="keyword">return</span> <span class="function">fetchUserFromAPI</span>();  <span class="comment">// Fallback</span>
    })
    .<span class="function">catch</span>(() => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"API failed, using default"</span>);
        <span class="keyword">return</span> { name: <span class="string">"Guest"</span> };  <span class="comment">// Default value</span>
    })
    .<span class="function">then</span>(user => {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"User:"</span>, user);  <span class="comment">// Always gets a user</span>
    });</code>
                </div>
                
                <h3>6.4 Unhandled Promise Rejections</h3>
                
                <div class="code-block">
<code><span class="comment">// ‚ùå BAD: Promise rejection not handled</span>
<span class="function">Promise</span>.<span class="function">reject</span>(<span class="string">"Unhandled error"</span>);  
<span class="comment">// Warning: Unhandled promise rejection</span>

<span class="comment">// ‚úÖ GOOD: Always handle rejections</span>
<span class="function">Promise</span>.<span class="function">reject</span>(<span class="string">"Handled error"</span>)
    .<span class="function">catch</span>(err => <span class="function">console</span>.<span class="function">error</span>(err));

<span class="comment">// Global handler for unhandled rejections (browser)</span>
window.<span class="function">addEventListener</span>(<span class="string">'unhandledrejection'</span>, event => {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Unhandled rejection:"</span>, event.reason);
    event.<span class="function">preventDefault</span>();  <span class="comment">// Prevent default error logging</span>
});

<span class="comment">// Node.js version</span>
process.<span class="function">on</span>(<span class="string">'unhandledRejection'</span>, (reason, promise) => {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">'Unhandled Rejection at:'</span>, promise, <span class="string">'reason:'</span>, reason);
});</code>
                </div>
                
                <div class="warning">
                    <strong>‚ö†Ô∏è Critical:</strong> Unhandled promise rejections can crash Node.js applications! Always add .catch() or try-catch to handle rejections.
                </div>
            </div>

            <!-- Section 7: Async/Await Error Handling -->
            <div class="section" id="async-errors">
                <h2>‚ö° 7. Error Handling in Async/Await</h2>
                
                <h3>7.1 Try-Catch with Async</h3>
                
                <div class="code-block">
<code><span class="comment">// Standard try-catch works with async/await</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">fetchData</span>() {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="function">fetch</span>(<span class="string">'/api/data'</span>);
        <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="function">json</span>();
        <span class="keyword">return</span> data;
    } <span class="keyword">catch</span> (error) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Fetch failed:"</span>, error);
        <span class="keyword">throw</span> error;  <span class="comment">// Re-throw if needed</span>
    } <span class="keyword">finally</span> {
        <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Fetch attempt complete"</span>);
    }
}

<span class="comment">// Using the async function</span>
<span class="keyword">try</span> {
    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="function">fetchData</span>();
    <span class="function">console</span>.<span class="function">log</span>(data);
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error in main:"</span>, error);
}</code>
                </div>
                
                <h3>7.2 Multiple Async Operations</h3>
                
                <div class="code-block">
<code><span class="comment">// Option 1: Single try-catch for all</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">getAllData</span>() {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="function">fetchUser</span>();
        <span class="keyword">const</span> posts = <span class="keyword">await</span> <span class="function">fetchPosts</span>();
        <span class="keyword">const</span> comments = <span class="keyword">await</span> <span class="function">fetchComments</span>();
        <span class="keyword">return</span> { user, posts, comments };
    } <span class="keyword">catch</span> (error) {
        <span class="comment">// All errors caught here</span>
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error fetching data:"</span>, error);
        <span class="keyword">return</span> <span class="keyword">null</span>;
    }
}

<span class="comment">// Option 2: Individual try-catch with fallbacks</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">getDataWithFallbacks</span>() {
    <span class="keyword">let</span> user, posts, comments;
    
    <span class="keyword">try</span> {
        user = <span class="keyword">await</span> <span class="function">fetchUser</span>();
    } <span class="keyword">catch</span> (error) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"User fetch failed"</span>, error);
        user = { name: <span class="string">"Guest"</span> };  <span class="comment">// Fallback</span>
    }
    
    <span class="keyword">try</span> {
        posts = <span class="keyword">await</span> <span class="function">fetchPosts</span>();
    } <span class="keyword">catch</span> (error) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Posts fetch failed"</span>, error);
        posts = [];  <span class="comment">// Fallback</span>
    }
    
    <span class="keyword">return</span> { user, posts };  <span class="comment">// Partial success possible</span>
}

<span class="comment">// Option 3: Promise.allSettled for parallel with errors</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">getDataParallel</span>() {
    <span class="keyword">const</span> results = <span class="keyword">await</span> <span class="function">Promise</span>.<span class="function">allSettled</span>([
        <span class="function">fetchUser</span>(),
        <span class="function">fetchPosts</span>(),
        <span class="function">fetchComments</span>()
    ]);
    
    <span class="keyword">return</span> {
        user: results[<span class="number">0</span>].status === <span class="string">"fulfilled"</span> ? results[<span class="number">0</span>].value : <span class="keyword">null</span>,
        posts: results[<span class="number">1</span>].status === <span class="string">"fulfilled"</span> ? results[<span class="number">1</span>].value : [],
        comments: results[<span class="number">2</span>].status === <span class="string">"fulfilled"</span> ? results[<span class="number">2</span>].value : []
    };
}</code>
                </div>
                
                <h3>7.3 Error Re-throwing</h3>
                
                <div class="code-block">
<code><span class="keyword">async</span> <span class="keyword">function</span> <span class="function">processData</span>() {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="function">fetchData</span>();
        
        <span class="keyword">if</span> (!data) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"No data received"</span>);
        }
        
        <span class="keyword">return</span> data;
    } <span class="keyword">catch</span> (error) {
        <span class="comment">// Log for debugging</span>
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error in processData:"</span>, error);
        
        <span class="comment">// Re-throw for caller to handle</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">`Failed to process: ${error.message}`</span>);
    }
}

<span class="comment">// Caller handles the re-thrown error</span>
<span class="keyword">try</span> {
    <span class="keyword">await</span> <span class="function">processData</span>();
} <span class="keyword">catch</span> (error) {
    <span class="comment">// Handle at appropriate level</span>
    <span class="function">showUserError</span>(error.message);
}</code>
                </div>
                
                <div class="interactive-demo">
                    <h4>üéÆ Async Error Handling Demo</h4>
                    <button onclick="demoAsyncSuccess()">Successful Fetch</button>
                    <button onclick="demoAsyncError()">Failed Fetch</button>
                    <button onclick="demoAsyncFallback()">With Fallback</button>
                    <div class="output" id="asyncErrorOutput"></div>
                </div>
            </div>

            <!-- Section 8: Best Practices -->
            <div class="section" id="best-practices">
                <h2>‚ú® 8. Error Handling Best Practices</h2>
                
                <h3>8.1 Meaningful Error Messages</h3>
                
                <div class="code-block">
<code><span class="comment">// ‚ùå BAD: Vague error messages</span>
<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Error"</span>);
<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Something went wrong"</span>);

<span class="comment">// ‚úÖ GOOD: Specific, actionable messages</span>
<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"User ID must be a positive number"</span>);
<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"Failed to fetch user: Network timeout after 30s"</span>);
<span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">ValidationError</span>(<span class="string">"Email format invalid: must contain @"</span>);</code>
                </div>
                
                <h3>8.2 Don't Swallow Errors</h3>
                
                <div class="code-block">
<code><span class="comment">// ‚ùå BAD: Silent failure (error swallowing)</span>
<span class="keyword">try</span> {
    riskyOperation();
} <span class="keyword">catch</span> (error) {
    <span class="comment">// Empty catch - error disappears!</span>
}

<span class="comment">// ‚ùå BAD: Logging without handling</span>
<span class="keyword">try</span> {
    riskyOperation();
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Error happened"</span>);  <span class="comment">// Not enough!</span>
}

<span class="comment">// ‚úÖ GOOD: Log AND handle</span>
<span class="keyword">try</span> {
    riskyOperation();
} <span class="keyword">catch</span> (error) {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Operation failed:"</span>, error);
    <span class="comment">// Then: show user message, use fallback, retry, etc.</span>
    <span class="function">showUserNotification</span>(<span class="string">"Operation failed. Please try again."</span>);
}</code>
                </div>
                
                <h3>8.3 Fail Fast Principle</h3>
                
                <div class="code-block">
<code><span class="comment">// Validate early, fail fast</span>
<span class="keyword">function</span> <span class="function">processUser</span>(user) {
    <span class="comment">// Validate at the start</span>
    <span class="keyword">if</span> (!user) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">"User is required"</span>);
    }
    
    <span class="keyword">if</span> (!user.email) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">ValidationError</span>(<span class="string">"Email is required"</span>);
    }
    
    <span class="keyword">if</span> (!<span class="function">isValidEmail</span>(user.email)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">ValidationError</span>(<span class="string">"Email format invalid"</span>);
    }
    
    <span class="comment">// Now safe to process</span>
    <span class="keyword">return</span> <span class="function">saveUser</span>(user);
}</code>
                </div>
                
                <h3>8.4 Error Boundaries Pattern</h3>
                
                <div class="code-block">
<code><span class="comment">// Wrap risky operations in error boundary</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">withErrorBoundary</span>(fn, fallback) {
    <span class="keyword">try</span> {
        <span class="keyword">return</span> <span class="keyword">await</span> <span class="function">fn</span>();
    } <span class="keyword">catch</span> (error) {
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error caught by boundary:"</span>, error);
        
        <span class="keyword">if</span> (fallback) {
            <span class="keyword">return</span> <span class="function">fallback</span>(error);
        }
        
        <span class="keyword">throw</span> error;
    }
}

<span class="comment">// Usage</span>
<span class="keyword">const</span> data = <span class="keyword">await</span> <span class="function">withErrorBoundary</span>(
    () => <span class="function">fetchData</span>(),
    (error) => ({ error: <span class="keyword">true</span>, message: error.message })
);</code>
                </div>
                
                <h3>8.5 Structured Error Responses</h3>
                
                <div class="code-block">
<code><span class="comment">// Return consistent error format</span>
<span class="keyword">class</span> <span class="function">Result</span> {
    <span class="keyword">static</span> <span class="function">success</span>(data) {
        <span class="keyword">return</span> { success: <span class="keyword">true</span>, data };
    }
    
    <span class="keyword">static</span> <span class="function">failure</span>(error) {
        <span class="keyword">return</span> { 
            success: <span class="keyword">false</span>, 
            error: error.message,
            type: error.name
        };
    }
}

<span class="keyword">async</span> <span class="keyword">function</span> <span class="function">safeOperation</span>() {
    <span class="keyword">try</span> {
        <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="function">riskyOperation</span>();
        <span class="keyword">return</span> Result.<span class="function">success</span>(data);
    } <span class="keyword">catch</span> (error) {
        <span class="keyword">return</span> Result.<span class="function">failure</span>(error);
    }
}

<span class="comment">// Clean usage - no try-catch needed</span>
<span class="keyword">const</span> result = <span class="keyword">await</span> <span class="function">safeOperation</span>();

<span class="keyword">if</span> (result.success) {
    <span class="function">console</span>.<span class="function">log</span>(<span class="string">"Data:"</span>, result.data);
} <span class="keyword">else</span> {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error:"</span>, result.error);
}</code>
                </div>
            </div>

            <!-- Section 9: Error Logging -->
            <div class="section" id="error-logging">
                <h2>üìä 9. Error Logging and Monitoring</h2>
                
                <h3>9.1 Structured Logging</h3>
                
                <div class="code-block">
<code><span class="comment">// Create error logger utility</span>
<span class="keyword">class</span> <span class="function">ErrorLogger</span> {
    <span class="keyword">static</span> <span class="function">log</span>(error, context = {}) {
        <span class="keyword">const</span> errorInfo = {
            timestamp: <span class="keyword">new</span> <span class="function">Date</span>().<span class="function">toISOString</span>(),
            name: error.name,
            message: error.message,
            stack: error.stack,
            context,
            userAgent: navigator.userAgent,
            url: window.location.href
        };
        
        <span class="comment">// Log to console</span>
        <span class="function">console</span>.<span class="function">error</span>(<span class="string">"Error logged:"</span>, errorInfo);
        
        <span class="comment">// Send to logging service</span>
        <span class="keyword">this</span>.<span class="function">sendToLoggingService</span>(errorInfo);
    }
    
    <span class="keyword">static</span> <span class="function">sendToLoggingService</span>(errorInfo) {
        <span class="comment">// Send to Sentry, LogRocket, etc.</span>
        <span class="function">fetch</span>(<span class="string">'/api/logs'</span>, {
            method: <span class="string">'POST'</span>,
            body: <span class="function">JSON</span>.<span class="function">stringify</span>(errorInfo)
        }).<span class="function">catch</span>(() => {
            <span class="comment">// Don't throw if logging fails</span>
        });
    }
}

<span class="comment">// Usage</span>
<span class="keyword">try</span> {
    <span class="function">processPayment</span>(order);
} <span class="keyword">catch</span> (error) {
    ErrorLogger.<span class="function">log</span>(error, { 
        orderId: order.id,
        userId: user.id 
    });
}</code>
                </div>
                
                <h3>9.2 Global Error Handlers</h3>
                
                <div class="code-block">
<code><span class="comment">// Browser: Catch all uncaught errors</span>
window.<span class="function">addEventListener</span>(<span class="string">'error'</span>, (event) => {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">'Global error:'</span>, event.error);
    
    <span class="comment">// Log to monitoring service</span>
    ErrorLogger.<span class="function">log</span>(event.error);
    
    <span class="comment">// Prevent default browser error handling</span>
    event.<span class="function">preventDefault</span>();
});

<span class="comment">// Browser: Catch unhandled promise rejections</span>
window.<span class="function">addEventListener</span>(<span class="string">'unhandledrejection'</span>, (event) => {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">'Unhandled rejection:'</span>, event.reason);
    ErrorLogger.<span class="function">log</span>(event.reason);
    event.<span class="function">preventDefault</span>();
});

<span class="comment">// Node.js: Uncaught exceptions</span>
process.<span class="function">on</span>(<span class="string">'uncaughtException'</span>, (error) => {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">'Uncaught exception:'</span>, error);
    ErrorLogger.<span class="function">log</span>(error);
    process.<span class="function">exit</span>(<span class="number">1</span>);  <span class="comment">// Exit after logging</span>
});

<span class="comment">// Node.js: Unhandled promise rejections</span>
process.<span class="function">on</span>(<span class="string">'unhandledRejection'</span>, (reason, promise) => {
    <span class="function">console</span>.<span class="function">error</span>(<span class="string">'Unhandled rejection at:'</span>, promise, <span class="string">'reason:'</span>, reason);
    ErrorLogger.<span class="function">log</span>(reason);
});</code>
                </div>
                
                <div class="warning">
                    <strong>‚ö†Ô∏è Warning:</strong> Global error handlers are last resort! Don't rely on them for regular error handling. They're for catching unexpected errors.
                </div>
            </div>

            <!-- Section 10: Summary -->
            <div class="section" id="summary">
                <h2>üìù Chapter Summary & Interview Questions</h2>
                
                <h3>Key Takeaways:</h3>
                <ol>
                    <li><strong>Error Types:</strong> Error, TypeError, ReferenceError, RangeError, SyntaxError, URIError</li>
                    <li><strong>Try-Catch:</strong> Catches synchronous errors and awaited promise rejections</li>
                    <li><strong>Finally:</strong> Always executes for cleanup, runs before return</li>
                    <li><strong>Throw:</strong> Use Error objects (include stack trace)</li>
                    <li><strong>Custom Errors:</strong> Extend Error class for specific scenarios</li>
                    <li><strong>Promise Errors:</strong> Use .catch() or try-catch with await</li>
                    <li><strong>Error Propagation:</strong> Errors bubble up until caught</li>
                    <li><strong>Fail Fast:</strong> Validate early, throw immediately</li>
                    <li><strong>Meaningful Messages:</strong> Include context and actionable info</li>
                    <li><strong>Logging:</strong> Log errors with context for debugging</li>
                </ol>
                
                <h3>Common Interview Questions:</h3>
                <div class="visual-box">
                    <ol>
                        <li><strong>Q:</strong> What's the difference between Error types in JavaScript?<br>
                            <strong>A:</strong> TypeError (wrong type), ReferenceError (variable not found), RangeError (value out of range), SyntaxError (invalid syntax), etc. Each represents a specific error category.</li>
                        
                        <li><strong>Q:</strong> When does finally block execute?<br>
                            <strong>A:</strong> Always executes - whether try succeeds or catch handles error. Runs before return statement. Used for cleanup (closing files, connections).</li>
                        
                        <li><strong>Q:</strong> How do you handle errors in async/await?<br>
                            <strong>A:</strong> Use try-catch blocks. await converts promise rejections to thrown errors that try-catch can handle.</li>
                        
                        <li><strong>Q:</strong> What happens if you don't catch a promise rejection?<br>
                            <strong>A:</strong> Unhandled promise rejection - can crash Node.js apps. Browser shows warning. Use .catch() or try-catch with await.</li>
                        
                        <li><strong>Q:</strong> Should you throw or return errors?<br>
                            <strong>A:</strong> Throw for exceptional conditions (shouldn't happen). Return for expected failures (like "not found"). Throwing makes error handling explicit.</li>
                        
                        <li><strong>Q:</strong> How to create custom error classes?<br>
                            <strong>A:</strong> Extend Error class, set name property, call super() with message. Can add custom properties for context.</li>
                        
                        <li><strong>Q:</strong> What's error propagation?<br>
                            <strong>A:</strong> Errors bubble up the call stack until caught. If never caught, becomes uncaught exception.</li>
                        
                        <li><strong>Q:</strong> Can finally block have return statement?<br>
                            <strong>A:</strong> Yes, but it overrides any return from try/catch - usually not recommended.</li>
                        
                        <li><strong>Q:</strong> How to handle multiple async operations' errors?<br>
                            <strong>A:</strong> Options: Single try-catch for all, individual try-catch with fallbacks, or Promise.allSettled() for partial success.</li>
                    </ol>
                </div>
                
                <div class="success">
                    <strong>üí™ Practice Exercises:</strong>
                    <ol>
                        <li>Create a custom ValidationError class with field name property</li>
                        <li>Write function with proper input validation and error throwing</li>
                        <li>Handle JSON parsing with try-catch and return success/error object</li>
                        <li>Convert promise chain error handling to async/await</li>
                        <li>Implement retry logic with error logging</li>
                        <li>Create error logger that categorizes errors by type</li>
                        <li>Build error boundary wrapper for async functions</li>
                        <li>Implement graceful degradation with multiple fallbacks</li>
                        <li>Set up global error handlers for browser and Node.js</li>
                        <li>Create error hierarchy (BaseError ‚Üí ValidationError ‚Üí SpecificError)</li>
                    </ol>
                </div>
                
                <div class="tip">
                    <strong>üéØ Production Error Handling Checklist:</strong>
                    <ul>
                        <li>‚úÖ All async operations have error handling</li>
                        <li>‚úÖ Meaningful error messages for debugging</li>
                        <li>‚úÖ Custom error types for different scenarios</li>
                        <li>‚úÖ Structured logging with context</li>
                        <li>‚úÖ User-friendly error messages displayed</li>
                        <li>‚úÖ Global error handlers as safety net</li>
                        <li>‚úÖ Error monitoring service integrated</li>
                        <li>‚úÖ Retry logic for transient failures</li>
                        <li>‚úÖ Fallback values for graceful degradation</li>
                        <li>‚úÖ Stack traces preserved for debugging</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        function triggerTypeError() {
            const output = document.getElementById('errorTypeOutput');
            
            try {
                const num = 42;
                num.toUpperCase();  // TypeError
            } catch (error) {
                let result = '=== TypeError Demo ===\n\n';
                result += `Name: ${error.name}\n`;
                result += `Message: ${error.message}\n\n`;
                result += 'What happened?\n';
                result += '‚Ä¢ Tried to call toUpperCase() on a number\n';
                result += '‚Ä¢ Numbers don\'t have this method\n';
                result += '‚Ä¢ JavaScript throws TypeError\n\n';
                result += 'Common causes:\n';
                result += '‚Ä¢ Calling method on wrong type\n';
                result += '‚Ä¢ null/undefined access\n';
                result += '‚Ä¢ Calling non-function as function';
                
                output.textContent = result;
            }
        }
        
        function triggerReferenceError() {
            const output = document.getElementById('errorTypeOutput');
            
            try {
                console.log(nonExistentVariable);
            } catch (error) {
                let result = '=== ReferenceError Demo ===\n\n';
                result += `Name: ${error.name}\n`;
                result += `Message: ${error.message}\n\n`;
                result += 'What happened?\n';
                result += '‚Ä¢ Tried to access undeclared variable\n';
                result += '‚Ä¢ Variable doesn\'t exist in any scope\n';
                result += '‚Ä¢ JavaScript throws ReferenceError\n\n';
                result += 'Common causes:\n';
                result += '‚Ä¢ Typo in variable name\n';
                result += '‚Ä¢ Variable not declared\n';
                result += '‚Ä¢ Out of scope access';
                
                output.textContent = result;
            }
        }
        
        function triggerRangeError() {
            const output = document.getElementById('errorTypeOutput');
            
            try {
                const arr = new Array(-1);
            } catch (error) {
                let result = '=== RangeError Demo ===\n\n';
                result += `Name: ${error.name}\n`;
                result += `Message: ${error.message}\n\n`;
                result += 'What happened?\n';
                result += '‚Ä¢ Tried to create array with negative length\n';
                result += '‚Ä¢ Value is out of valid range\n';
                result += '‚Ä¢ JavaScript throws RangeError\n\n';
                result += 'Common causes:\n';
                result += '‚Ä¢ Invalid array length\n';
                result += '‚Ä¢ toFixed() with invalid precision\n';
                result += '‚Ä¢ Recursion depth exceeded';
                
                output.textContent = result;
            }
        }
        
        function demoTryCatch() {
            const output = document.getElementById('tryCatchOutput');
            
            let result = '=== Try-Catch Demo ===\n\n';
            
            result += 'Code:\n';
            result += 'console.log("Before try");\n';
            result += 'try {\n';
            result += '  throw new Error("Test error");\n';
            result += '  console.log("After throw"); // Never runs\n';
            result += '} catch (error) {\n';
            result += '  console.log("Caught:", error.message);\n';
            result += '}\n';
            result += 'console.log("After catch");\n\n';
            
            result += 'Output:\n';
            result += '1. "Before try"\n';
            result += '2. "Caught: Test error"\n';
            result += '3. "After catch"\n\n';
            result += '‚úì Execution continues after error is caught!';
            
            output.textContent = result;
        }
        
        function demoFinally() {
            const output = document.getElementById('tryCatchOutput');
            
            let result = '=== Finally Block Demo ===\n\n';
            
            result += 'Test 1: Successful execution\n';
            result += 'try { return "success"; }\n';
            result += 'finally { console.log("cleanup"); }\n\n';
            result += 'Output:\n';
            result += '1. "cleanup" (finally runs first!)\n';
            result += '2. Returns "success"\n\n';
            
            result += 'Test 2: Error occurs\n';
            result += 'try { throw new Error("fail"); }\n';
            result += 'catch { return "error handled"; }\n';
            result += 'finally { console.log("cleanup"); }\n\n';
            result += 'Output:\n';
            result += '1. Error caught\n';
            result += '2. "cleanup" (finally runs!)\n';
            result += '3. Returns "error handled"\n\n';
            result += '‚úì Finally ALWAYS executes!';
            
            output.textContent = result;
        }
        
        function validateAge() {
            const output = document.getElementById('customErrorOutput');
            const ageInput = document.getElementById('ageInput');
            const age = parseInt(ageInput.value);
            
            class ValidationError extends Error {
                constructor(message) {
                    super(message);
                    this.name = 'ValidationError';
                }
            }
            
            try {
                if (isNaN(age)) {
                    throw new ValidationError('Age must be a number');
                }
                
                if (age < 0) {
                    throw new RangeError('Age cannot be negative');
                }
                
                if (age > 150) {
                    throw new RangeError('Age cannot exceed 150');
                }
                
                if (age < 18) {
                    throw new ValidationError('Must be 18 or older');
                }
                
                output.textContent = `‚úì Valid age: ${age}\nValidation passed!`;
                
            } catch (error) {
                let result = `‚úó ${error.name}\n\n`;
                result += `Message: ${error.message}\n\n`;
                
                if (error instanceof ValidationError) {
                    result += 'Type: ValidationError\n';
                    result += 'Action: Show user-friendly message';
                } else if (error instanceof RangeError) {
                    result += 'Type: RangeError\n';
                    result += 'Action: Check input constraints';
                }
                
                output.textContent = result;
            }
        }
        
        function demoAsyncSuccess() {
            const output = document.getElementById('asyncErrorOutput');
            
            async function fetchData() {
                return new Promise(resolve => {
                    setTimeout(() => resolve({ name: 'Alice', age: 25 }), 1000);
                });
            }
            
            async function demo() {
                output.textContent = 'Fetching data...\n';
                
                try {
                    const data = await fetchData();
                    output.textContent += '\n‚úì Success!\n';
                    output.textContent += `Data: ${JSON.stringify(data, null, 2)}\n\n`;
                    output.textContent += 'No errors occurred';
                } catch (error) {
                    output.textContent += `\n‚úó Error: ${error.message}`;
                }
            }
            
            demo();
        }
        
        function demoAsyncError() {
            const output = document.getElementById('asyncErrorOutput');
            
            async function fetchData() {
                return new Promise((resolve, reject) => {
                    setTimeout(() => reject(new Error('Network timeout')), 1000);
                });
            }
            
            async function demo() {
                output.textContent = 'Fetching data...\n';
                
                try {
                    const data = await fetchData();
                    output.textContent += `Data: ${data}`;
                } catch (error) {
                    output.textContent += '\n‚úó Caught error!\n\n';
                    output.textContent += `Error: ${error.message}\n\n`;
                    output.textContent += 'Error handling:\n';
                    output.textContent += '1. Promise rejected\n';
                    output.textContent += '2. await throws the error\n';
                    output.textContent += '3. catch block handles it\n';
                    output.textContent += '4. Execution continues';
                }
            }
            
            demo();
        }
        
        function demoAsyncFallback() {
            const output = document.getElementById('asyncErrorOutput');
            
            async function fetchFromCache() {
                return Promise.reject(new Error('Cache miss'));
            }
            
            async function fetchFromAPI() {
                return Promise.reject(new Error('API failed'));
            }
            
            async function demo() {
                output.textContent = 'Trying multiple sources...\n\n';
                
                let user;
                
                try {
                    output.textContent += '1. Trying cache...\n';
                    user = await fetchFromCache();
                } catch (error) {
                    output.textContent += `   ‚úó ${error.message}\n\n`;
                    
                    try {
                        output.textContent += '2. Trying API...\n';
                        user = await fetchFromAPI();
                    } catch (error) {
                        output.textContent += `   ‚úó ${error.message}\n\n`;
                        output.textContent += '3. Using default...\n';
                        user = { name: 'Guest' };
                    }
                }
                
                output.textContent += `\nFinal user: ${JSON.stringify(user)}\n\n`;
                output.textContent += 'Graceful degradation achieved!';
            }
            
            demo();
        }
    </script>
</body>
</html>
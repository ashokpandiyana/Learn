<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 9: Lighthouse & Auditing</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #0c1222 0%, #1a2744 100%);
      color: #e4e4e7;
      line-height: 1.8;
      min-height: 100vh;
      padding: 40px 20px;
    }
    .container { max-width: 1000px; margin: 0 auto; }
    header {
      text-align: center;
      padding: 50px 40px;
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 20px 60px rgba(249, 115, 22, 0.3);
    }
    header h1 { font-size: 2.5em; margin-bottom: 10px; }
    header p { opacity: 0.95; font-size: 1.2em; }
    .badge { 
      display: inline-block; 
      background: rgba(255,255,255,0.2); 
      padding: 5px 15px; 
      border-radius: 20px; 
      font-size: 0.9em;
      margin-top: 15px;
    }
    section {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      padding: 35px;
      margin-bottom: 30px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    h2 {
      color: #fb923c;
      font-size: 1.8em;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid rgba(251, 146, 60, 0.3);
    }
    h3 {
      color: #fdba74;
      font-size: 1.3em;
      margin: 25px 0 15px 0;
    }
    h4 {
      color: #fed7aa;
      font-size: 1.1em;
      margin: 20px 0 10px 0;
    }
    p { margin-bottom: 15px; color: #d1d5db; }
    .concept-box {
      background: linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(234, 88, 12, 0.1));
      border-left: 4px solid #f97316;
      padding: 20px 25px;
      border-radius: 0 12px 12px 0;
      margin: 20px 0;
    }
    .code-block {
      background: #1e1e2e;
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      overflow-x: auto;
      border: 1px solid #333;
    }
    .code-block pre {
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.9em;
      color: #a6e3a1;
      white-space: pre-wrap;
    }
    .code-title {
      background: #333;
      color: #fb923c;
      padding: 8px 15px;
      border-radius: 8px 8px 0 0;
      font-size: 0.85em;
      margin-bottom: -12px;
      display: inline-block;
    }
    .highlight { color: #fb923c; font-weight: 600; }
    .note {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: #1a1a2e;
      padding: 18px 22px;
      border-radius: 12px;
      margin: 20px 0;
    }
    .note::before { content: "‚ö° Key Point: "; font-weight: 700; }
    .warning {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
      padding: 18px 22px;
      border-radius: 12px;
      margin: 20px 0;
    }
    .warning::before { content: "üö® Interview Alert: "; font-weight: 700; }
    .tip {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 18px 22px;
      border-radius: 12px;
      margin: 20px 0;
    }
    .tip::before { content: "üí° Pro Tip: "; font-weight: 700; }
    .visual-diagram {
      background: #1a1a2e;
      border-radius: 16px;
      padding: 30px;
      margin: 25px 0;
      border: 2px solid #333;
    }
    .diagram-title {
      text-align: center;
      color: #fb923c;
      font-weight: 600;
      margin-bottom: 20px;
      font-size: 1.1em;
    }
    ul, ol { margin: 15px 0 15px 25px; }
    li { margin: 10px 0; color: #d1d5db; }
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    .comparison-table th, .comparison-table td {
      padding: 15px;
      text-align: left;
      border: 1px solid #333;
    }
    .comparison-table th {
      background: #374151;
      color: #fb923c;
    }
    .comparison-table td { background: rgba(255,255,255,0.02); }
    code {
      background: #374151;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Consolas', monospace;
      font-size: 0.9em;
      color: #a6e3a1;
    }
    .score-card {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 25px 0;
    }
    .score-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    .score-circle.good { 
      background: conic-gradient(#10b981 0% 92%, #1f2937 92% 100%);
      box-shadow: 0 0 30px rgba(16, 185, 129, 0.4);
    }
    .score-circle.average { 
      background: conic-gradient(#f59e0b 0% 68%, #1f2937 68% 100%);
      box-shadow: 0 0 30px rgba(245, 158, 11, 0.4);
    }
    .score-circle.poor { 
      background: conic-gradient(#ef4444 0% 35%, #1f2937 35% 100%);
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.4);
    }
    .score-inner {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: #1a2744;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .score-value { font-size: 1.8em; }
    .score-label { font-size: 0.7em; color: #9ca3af; margin-top: 5px; }
    .metric-card {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      border-left: 4px solid #f97316;
    }
    .metric-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .metric-name { color: #fdba74; font-weight: 600; }
    .metric-value { font-weight: bold; padding: 4px 12px; border-radius: 20px; }
    .metric-value.good { background: #10b981; color: white; }
    .metric-value.average { background: #f59e0b; color: #1a1a2e; }
    .metric-value.poor { background: #ef4444; color: white; }
    .opportunity {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
    }
    .opportunity h4 {
      color: #10b981;
      display: flex;
      justify-content: space-between;
    }
    .savings { 
      background: #10b981; 
      color: white; 
      padding: 3px 10px; 
      border-radius: 15px;
      font-size: 0.85em;
    }
    .audit-category {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .category-card {
      background: #1f2937;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      border: 2px solid transparent;
      transition: border-color 0.3s;
    }
    .category-card:hover { border-color: #f97316; }
    .category-icon { font-size: 2em; margin-bottom: 10px; }
    .category-name { color: #fdba74; font-weight: 600; }
    .cwv-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .cwv-card {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border-radius: 16px;
      padding: 25px;
      border: 1px solid #374151;
    }
    .cwv-card h4 {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }
    .cwv-thresholds {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    .threshold {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      text-align: center;
      font-size: 0.85em;
    }
    .threshold.good { background: rgba(16, 185, 129, 0.2); color: #10b981; }
    .threshold.improve { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
    .threshold.poor { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üî¶ Chapter 9: Lighthouse & Auditing</h1>
      <p>Automated Website Quality & Performance Analysis</p>
      <span class="badge">üü° Intermediate Level</span>
    </header>

    <!-- Section 9.1 -->
    <section>
      <h2>9.1 Lighthouse Overview</h2>
      
      <p>Lighthouse is an open-source, automated tool for improving web page quality. It audits performance, accessibility, best practices, SEO, and PWA capabilities.</p>

      <h3>Audit Categories</h3>

      <div class="audit-category">
        <div class="category-card">
          <div class="category-icon">‚ö°</div>
          <div class="category-name">Performance</div>
          <p style="font-size: 0.85em; color: #9ca3af; margin-top: 8px;">Loading speed & runtime performance</p>
        </div>
        <div class="category-card">
          <div class="category-icon">‚ôø</div>
          <div class="category-name">Accessibility</div>
          <p style="font-size: 0.85em; color: #9ca3af; margin-top: 8px;">A11y compliance & usability</p>
        </div>
        <div class="category-card">
          <div class="category-icon">‚úÖ</div>
          <div class="category-name">Best Practices</div>
          <p style="font-size: 0.85em; color: #9ca3af; margin-top: 8px;">Web standards & security</p>
        </div>
        <div class="category-card">
          <div class="category-icon">üîç</div>
          <div class="category-name">SEO</div>
          <p style="font-size: 0.85em; color: #9ca3af; margin-top: 8px;">Search engine optimization</p>
        </div>
        <div class="category-card">
          <div class="category-icon">üì±</div>
          <div class="category-name">PWA</div>
          <p style="font-size: 0.85em; color: #9ca3af; margin-top: 8px;">Progressive Web App readiness</p>
        </div>
      </div>

      <h3>Ways to Run Lighthouse</h3>
      <ol>
        <li><strong>DevTools:</strong> Lighthouse panel in Chrome DevTools</li>
        <li><strong>CLI:</strong> <code>npx lighthouse https://example.com</code></li>
        <li><strong>PageSpeed Insights:</strong> pagespeed.web.dev</li>
        <li><strong>CI/CD:</strong> Lighthouse CI for automated testing</li>
        <li><strong>Web.dev Measure:</strong> web.dev/measure</li>
      </ol>

      <div class="note">DevTools Lighthouse provides the most control, but PageSpeed Insights uses real-world data from Chrome User Experience Report (CrUX).</div>
    </section>

    <!-- Section 9.2 -->
    <section>
      <h2>9.2 Running Lighthouse Audits</h2>

      <h3>Step-by-Step Process</h3>
      <ol>
        <li>Open Chrome DevTools ‚Üí Lighthouse tab</li>
        <li>Select device: <strong>Mobile</strong> or <strong>Desktop</strong></li>
        <li>Choose categories to audit</li>
        <li>Click <strong>"Analyze page load"</strong></li>
        <li>Wait for audit to complete (30-60 seconds)</li>
        <li>Review the report</li>
      </ol>

      <h3>Configuration Options</h3>

      <table class="comparison-table">
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Recommendation</th>
        </tr>
        <tr>
          <td><strong>Device</strong></td>
          <td>Simulates mobile or desktop viewport</td>
          <td>Test both; mobile is stricter</td>
        </tr>
        <tr>
          <td><strong>Categories</strong></td>
          <td>Which audits to run</td>
          <td>Run all for comprehensive view</td>
        </tr>
        <tr>
          <td><strong>Throttling</strong></td>
          <td>Simulated vs DevTools throttling</td>
          <td>Simulated for consistent results</td>
        </tr>
        <tr>
          <td><strong>Clear storage</strong></td>
          <td>Start with empty cache/storage</td>
          <td>Enable for first-visit testing</td>
        </tr>
      </table>

      <div class="warning">Always test on Mobile with throttling! Most users access websites on mobile devices with slower connections.</div>

      <h3>Understanding Scores</h3>

      <div class="score-card">
        <div class="score-circle good">
          <div class="score-inner">
            <span class="score-value" style="color: #10b981;">92</span>
            <span class="score-label">GOOD</span>
          </div>
        </div>
        <div class="score-circle average">
          <div class="score-inner">
            <span class="score-value" style="color: #f59e0b;">68</span>
            <span class="score-label">NEEDS WORK</span>
          </div>
        </div>
        <div class="score-circle poor">
          <div class="score-inner">
            <span class="score-value" style="color: #ef4444;">35</span>
            <span class="score-label">POOR</span>
          </div>
        </div>
      </div>

      <ul>
        <li><strong style="color: #10b981;">90-100 (Green):</strong> Good - meets performance standards</li>
        <li><strong style="color: #f59e0b;">50-89 (Orange):</strong> Needs Improvement - room for optimization</li>
        <li><strong style="color: #ef4444;">0-49 (Red):</strong> Poor - significant issues to address</li>
      </ul>
    </section>

    <!-- Section 9.3 -->
    <section>
      <h2>9.3 Core Web Vitals - Deep Dive</h2>

      <p>Core Web Vitals are Google's metrics for measuring real-world user experience. They directly impact search rankings!</p>

      <div class="cwv-grid">
        <div class="cwv-card">
          <h4><span style="font-size: 1.5em;">üé®</span> LCP - Largest Contentful Paint</h4>
          <p style="color: #9ca3af; font-size: 0.95em;">Measures <strong>loading performance</strong>. How long until the largest content element is visible?</p>
          <div class="cwv-thresholds">
            <div class="threshold good">‚â§2.5s<br>Good</div>
            <div class="threshold improve">‚â§4.0s<br>Improve</div>
            <div class="threshold poor">&gt;4.0s<br>Poor</div>
          </div>
        </div>
        <div class="cwv-card">
          <h4><span style="font-size: 1.5em;">üëÜ</span> INP - Interaction to Next Paint</h4>
          <p style="color: #9ca3af; font-size: 0.95em;">Measures <strong>interactivity</strong>. How responsive is the page to user interactions?</p>
          <div class="cwv-thresholds">
            <div class="threshold good">‚â§200ms<br>Good</div>
            <div class="threshold improve">‚â§500ms<br>Improve</div>
            <div class="threshold poor">&gt;500ms<br>Poor</div>
          </div>
        </div>
        <div class="cwv-card">
          <h4><span style="font-size: 1.5em;">üìê</span> CLS - Cumulative Layout Shift</h4>
          <p style="color: #9ca3af; font-size: 0.95em;">Measures <strong>visual stability</strong>. How much does the page layout shift unexpectedly?</p>
          <div class="cwv-thresholds">
            <div class="threshold good">‚â§0.1<br>Good</div>
            <div class="threshold improve">‚â§0.25<br>Improve</div>
            <div class="threshold poor">&gt;0.25<br>Poor</div>
          </div>
        </div>
      </div>

      <div class="warning">Core Web Vitals are a Google ranking factor! Poor CWV scores can hurt your SEO.</div>

      <h3>Improving LCP (Largest Contentful Paint)</h3>

      <div class="code-block">
        <div class="code-title">Common LCP Issues & Fixes</div>
        <pre>
<!-- ISSUE 1: Slow server response (high TTFB) -->
<!-- FIX: Use CDN, caching, optimize server code -->

<!-- ISSUE 2: Render-blocking resources -->
<!-- FIX: Inline critical CSS, defer non-critical JS -->
&lt;link rel="preload" href="critical.css" as="style"&gt;
&lt;script defer src="non-critical.js"&gt;&lt;/script&gt;

<!-- ISSUE 3: Slow resource load times -->
<!-- FIX: Compress images, use modern formats -->
&lt;img 
    src="hero.webp" 
    srcset="hero-400.webp 400w, hero-800.webp 800w"
    sizes="(max-width: 600px) 400px, 800px"
    loading="eager"  &lt;!-- LCP image should NOT be lazy loaded --&gt;
    fetchpriority="high"
    alt="Hero image"
&gt;

<!-- ISSUE 4: Client-side rendering delay -->
<!-- FIX: Use SSR/SSG, prerender critical content -->

<!-- Preconnect to required origins -->
&lt;link rel="preconnect" href="https://fonts.googleapis.com"&gt;
&lt;link rel="preconnect" href="https://cdn.example.com" crossorigin&gt;</pre>
      </div>

      <h3>Improving INP (Interaction to Next Paint)</h3>

      <div class="code-block">
        <div class="code-title">INP Optimization Techniques</div>
        <pre>
// ISSUE: Long tasks blocking main thread
// FIX: Break up long tasks with yield points

// BAD - Long blocking task
function processLargeArray(items) {
    items.forEach(item => {
        heavyComputation(item);  // Blocks for 500ms+
    });
}

// GOOD - Yielding to main thread
async function processLargeArray(items) {
    for (const item of items) {
        heavyComputation(item);
        
        // Yield to main thread every 50ms
        if (shouldYield()) {
            await scheduler.yield();  // or use setTimeout
        }
    }
}

// Helper to check if we should yield
function shouldYield() {
    return performance.now() - lastYield > 50;
}

// Alternative: Use requestIdleCallback for non-urgent work
requestIdleCallback((deadline) => {
    while (deadline.timeRemaining() > 0 && tasks.length > 0) {
        processTask(tasks.shift());
    }
});

// ISSUE: Heavy event handlers
// FIX: Debounce and defer expensive operations

// BAD
input.addEventListener('input', (e) => {
    expensiveSearch(e.target.value);  // Runs on every keystroke
});

// GOOD
input.addEventListener('input', debounce((e) => {
    expensiveSearch(e.target.value);
}, 300));</pre>
      </div>

      <h3>Improving CLS (Cumulative Layout Shift)</h3>

      <div class="code-block">
        <div class="code-title">CLS Prevention Techniques</div>
        <pre>
/* ISSUE 1: Images without dimensions */
/* FIX: Always set width and height, or use aspect-ratio */

/* BAD - No dimensions, causes layout shift */
&lt;img src="photo.jpg" alt="Photo"&gt;

/* GOOD - Explicit dimensions */
&lt;img src="photo.jpg" width="800" height="600" alt="Photo"&gt;

/* GOOD - CSS aspect-ratio */
&lt;style&gt;
.responsive-img {
    width: 100%;
    aspect-ratio: 16 / 9;
    object-fit: cover;
}
&lt;/style&gt;
&lt;img class="responsive-img" src="photo.jpg" alt="Photo"&gt;


/* ISSUE 2: Dynamically injected content */
/* FIX: Reserve space for dynamic content */

/* BAD - Ad shifts content */
.ad-container { }

/* GOOD - Reserved space */
.ad-container {
    min-height: 250px;  /* Reserve space for ad */
    background: #f0f0f0;
}


/* ISSUE 3: Web fonts causing FOIT/FOUT */
/* FIX: Use font-display and preload fonts */

@font-face {
    font-family: 'CustomFont';
    src: url('font.woff2') format('woff2');
    font-display: swap;  /* Show fallback immediately */
}

/* Preload critical fonts */
&lt;link rel="preload" href="font.woff2" as="font" type="font/woff2" crossorigin&gt;


/* ISSUE 4: Animations triggering layout */
/* FIX: Use transform instead of top/left/width/height */

/* BAD - Triggers layout */
.animate {
    animation: slide 1s;
}
@keyframes slide {
    from { left: 0; }
    to { left: 100px; }
}

/* GOOD - Only compositing */
.animate {
    animation: slide 1s;
}
@keyframes slide {
    from { transform: translateX(0); }
    to { transform: translateX(100px); }
}</pre>
      </div>

      <div class="note">CLS is often caused by images, ads, embeds, and dynamically injected content. Always reserve space!</div>
    </section>

    <!-- Section 9.4 -->
    <section>
      <h2>9.4 Performance Metrics Explained</h2>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-name">First Contentful Paint (FCP)</span>
          <span class="metric-value good">&lt; 1.8s</span>
        </div>
        <p style="color: #9ca3af;">Time from navigation start until the first text or image is painted. Users see "something is happening."</p>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-name">Largest Contentful Paint (LCP)</span>
          <span class="metric-value good">&lt; 2.5s</span>
        </div>
        <p style="color: #9ca3af;">Time until the largest content element (image, video, text block) is visible. Core Web Vital!</p>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-name">Total Blocking Time (TBT)</span>
          <span class="metric-value average">&lt; 200ms</span>
        </div>
        <p style="color: #9ca3af;">Sum of all time periods where the main thread was blocked for >50ms between FCP and Time to Interactive.</p>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-name">Speed Index</span>
          <span class="metric-value average">&lt; 3.4s</span>
        </div>
        <p style="color: #9ca3af;">How quickly content is visually populated. Lower is better - measured in milliseconds.</p>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-name">Cumulative Layout Shift (CLS)</span>
          <span class="metric-value good">&lt; 0.1</span>
        </div>
        <p style="color: #9ca3af;">Measures unexpected layout shifts. Score is unitless - sum of impact √ó distance fractions.</p>
      </div>

      <h3>Metric Weights (Performance Score)</h3>

      <table class="comparison-table">
        <tr>
          <th>Metric</th>
          <th>Weight</th>
          <th>Impact on Score</th>
        </tr>
        <tr>
          <td>Total Blocking Time (TBT)</td>
          <td>30%</td>
          <td>Highest impact</td>
        </tr>
        <tr>
          <td>Largest Contentful Paint (LCP)</td>
          <td>25%</td>
          <td>Very high impact</td>
        </tr>
        <tr>
          <td>Cumulative Layout Shift (CLS)</td>
          <td>25%</td>
          <td>Very high impact</td>
        </tr>
        <tr>
          <td>First Contentful Paint (FCP)</td>
          <td>10%</td>
          <td>Medium impact</td>
        </tr>
        <tr>
          <td>Speed Index</td>
          <td>10%</td>
          <td>Medium impact</td>
        </tr>
      </table>

      <div class="tip">Focus on TBT, LCP, and CLS - they account for 80% of your performance score!</div>
    </section>

    <!-- Section 9.5 -->
    <section>
      <h2>9.5 Opportunities & Diagnostics</h2>

      <p>Lighthouse provides actionable recommendations in two categories:</p>

      <h3>Opportunities (Potential Savings)</h3>
      <p>These show estimated time/size savings if implemented:</p>

      <div class="opportunity">
        <h4>Properly size images <span class="savings">‚Üì 1.2s</span></h4>
        <p style="color: #9ca3af;">Serve images that are appropriately-sized to save cellular data and improve load time.</p>
        <ul>
          <li>hero-image.jpg: Could save 450 KB</li>
          <li>banner.png: Could save 230 KB</li>
        </ul>
      </div>

      <div class="opportunity">
        <h4>Eliminate render-blocking resources <span class="savings">‚Üì 0.8s</span></h4>
        <p style="color: #9ca3af;">Resources are blocking the first paint of your page.</p>
        <ul>
          <li>styles.css (120ms blocking time)</li>
          <li>vendor.js (680ms blocking time)</li>
        </ul>
      </div>

      <div class="opportunity">
        <h4>Remove unused JavaScript <span class="savings">‚Üì 0.5s</span></h4>
        <p style="color: #9ca3af;">Remove unused JavaScript to reduce bytes consumed by network activity.</p>
        <ul>
          <li>chunk-vendors.js: 45% unused (180 KB)</li>
          <li>analytics.js: 70% unused (40 KB)</li>
        </ul>
      </div>

      <h3>Diagnostics (Additional Information)</h3>
      <p>These don't directly affect score but indicate areas for improvement:</p>

      <ul>
        <li><strong>Avoid enormous network payloads</strong> - Total size: 4.5 MB</li>
        <li><strong>Minimize main-thread work</strong> - 5.2s of work</li>
        <li><strong>Reduce JavaScript execution time</strong> - 3.8s</li>
        <li><strong>Avoid large layout shifts</strong> - CLS contribution from elements</li>
        <li><strong>Largest Contentful Paint element</strong> - Which element is LCP</li>
        <li><strong>Avoid long main-thread tasks</strong> - 15 tasks found</li>
      </ul>
    </section>

    <!-- Section 9.6 -->
    <section>
      <h2>9.6 Accessibility Audit</h2>

      <p>The accessibility audit checks for common a11y issues that impact users with disabilities.</p>

      <h3>Common Accessibility Issues</h3>

      <div class="code-block">
        <div class="code-title">Accessibility Fixes</div>
        <pre>
<!-- ISSUE: Images missing alt text -->
<!-- BAD -->
&lt;img src="photo.jpg"&gt;

<!-- GOOD -->
&lt;img src="photo.jpg" alt="Team members at annual meeting"&gt;

<!-- Decorative image (no alt needed) -->
&lt;img src="decoration.png" alt="" role="presentation"&gt;


<!-- ISSUE: Low color contrast -->
/* BAD - 2.5:1 ratio */
.text { color: #999; background: #fff; }

/* GOOD - 4.5:1 ratio minimum for normal text */
.text { color: #595959; background: #fff; }


<!-- ISSUE: Form inputs without labels -->
<!-- BAD -->
&lt;input type="email" placeholder="Email"&gt;

<!-- GOOD -->
&lt;label for="email"&gt;Email address&lt;/label&gt;
&lt;input type="email" id="email" placeholder="you@example.com"&gt;

<!-- Or using aria-label -->
&lt;input type="email" aria-label="Email address" placeholder="Email"&gt;


<!-- ISSUE: Missing document language -->
<!-- BAD -->
&lt;html&gt;

<!-- GOOD -->
&lt;html lang="en"&gt;


<!-- ISSUE: Incorrect heading order -->
<!-- BAD -->
&lt;h1&gt;Page Title&lt;/h1&gt;
&lt;h3&gt;Section&lt;/h3&gt;  <!-- Skipped h2! -->

<!-- GOOD -->
&lt;h1&gt;Page Title&lt;/h1&gt;
&lt;h2&gt;Section&lt;/h2&gt;
&lt;h3&gt;Subsection&lt;/h3&gt;


<!-- ISSUE: Non-descriptive link text -->
<!-- BAD -->
&lt;a href="/docs"&gt;Click here&lt;/a&gt;

<!-- GOOD -->
&lt;a href="/docs"&gt;Read the documentation&lt;/a&gt;


<!-- ISSUE: Missing landmark regions -->
<!-- GOOD structure -->
&lt;header role="banner"&gt;...&lt;/header&gt;
&lt;nav role="navigation"&gt;...&lt;/nav&gt;
&lt;main role="main"&gt;...&lt;/main&gt;
&lt;footer role="contentinfo"&gt;...&lt;/footer&gt;


<!-- ISSUE: Focus not visible -->
/* BAD - Removes focus indicator */
*:focus { outline: none; }

/* GOOD - Custom focus indicator */
*:focus {
    outline: 2px solid #4A90D9;
    outline-offset: 2px;
}

/* Or use :focus-visible for keyboard-only focus */
*:focus-visible {
    outline: 2px solid #4A90D9;
}</pre>
      </div>

      <div class="warning">Accessibility is a legal requirement in many regions (ADA, WCAG). Lighthouse catches ~30% of issues - use tools like axe for comprehensive testing!</div>
    </section>

    <!-- Section 9.7 -->
    <section>
      <h2>9.7 Best Practices & SEO Audits</h2>

      <h3>Best Practices Checks</h3>

      <table class="comparison-table">
        <tr>
          <th>Check</th>
          <th>What It Means</th>
        </tr>
        <tr>
          <td>Uses HTTPS</td>
          <td>Page is served securely</td>
        </tr>
        <tr>
          <td>No vulnerable libraries</td>
          <td>No known security issues in JS libraries</td>
        </tr>
        <tr>
          <td>No browser errors logged</td>
          <td>Console should be error-free</td>
        </tr>
        <tr>
          <td>Images have correct aspect ratio</td>
          <td>Rendered size matches natural size</td>
        </tr>
        <tr>
          <td>Avoids deprecated APIs</td>
          <td>Uses modern, supported features</td>
        </tr>
        <tr>
          <td>Allows paste to password fields</td>
          <td>Doesn't block password managers</td>
        </tr>
        <tr>
          <td>CSP effective against XSS</td>
          <td>Content Security Policy is set</td>
        </tr>
      </table>

      <h3>SEO Checks</h3>

      <div class="code-block">
        <div class="code-title">SEO Requirements</div>
        <pre>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    
    &lt;!-- SEO: Document has a title --&gt;
    &lt;title&gt;Descriptive Page Title | Brand Name&lt;/title&gt;
    
    &lt;!-- SEO: Meta description --&gt;
    &lt;meta name="description" content="A compelling description of your page content, 150-160 characters."&gt;
    
    &lt;!-- SEO: Canonical URL --&gt;
    &lt;link rel="canonical" href="https://example.com/page"&gt;
    
    &lt;!-- SEO: Robots meta --&gt;
    &lt;meta name="robots" content="index, follow"&gt;
    
    &lt;!-- SEO: Open Graph for social sharing --&gt;
    &lt;meta property="og:title" content="Page Title"&gt;
    &lt;meta property="og:description" content="Page description"&gt;
    &lt;meta property="og:image" content="https://example.com/image.jpg"&gt;
    &lt;meta property="og:url" content="https://example.com/page"&gt;
    &lt;meta property="og:type" content="website"&gt;
    
    &lt;!-- SEO: Structured data --&gt;
    &lt;script type="application/ld+json"&gt;
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Page Title",
        "description": "Page description"
    }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- SEO: Tap targets sized appropriately (48x48px min) --&gt;
    &lt;a href="/link" style="min-height: 48px; min-width: 48px;"&gt;...&lt;/a&gt;
    
    &lt;!-- SEO: Crawlable links (not JavaScript-only) --&gt;
    &lt;a href="/page"&gt;Regular link&lt;/a&gt;  &lt;!-- GOOD --&gt;
    &lt;span onclick="navigate()"&gt;JS link&lt;/span&gt;  &lt;!-- BAD --&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
      </div>
    </section>

    <!-- Section 9.8 -->
    <section>
      <h2>9.8 Exporting & Comparing Reports</h2>

      <h3>Export Options</h3>
      <ul>
        <li><strong>Save as HTML:</strong> Standalone viewable report</li>
        <li><strong>Save as JSON:</strong> Programmatic analysis</li>
        <li><strong>Open in Viewer:</strong> Lighthouse Report Viewer</li>
        <li><strong>Print:</strong> PDF generation</li>
      </ul>

      <h3>Lighthouse CI for Automated Testing</h3>

      <div class="code-block">
        <div class="code-title">lighthouserc.js (CI Configuration)</div>
        <pre>
module.exports = {
    ci: {
        collect: {
            url: ['http://localhost:3000/', 'http://localhost:3000/about'],
            numberOfRuns: 3,  // Run 3 times, take median
        },
        assert: {
            assertions: {
                'categories:performance': ['error', { minScore: 0.9 }],
                'categories:accessibility': ['error', { minScore: 0.9 }],
                'categories:best-practices': ['warn', { minScore: 0.9 }],
                'categories:seo': ['error', { minScore: 0.9 }],
                'first-contentful-paint': ['error', { maxNumericValue: 2000 }],
                'largest-contentful-paint': ['error', { maxNumericValue: 2500 }],
                'cumulative-layout-shift': ['error', { maxNumericValue: 0.1 }],
            },
        },
        upload: {
            target: 'temporary-public-storage',  // Or your LHCI server
        },
    },
};

// Run with: npx lhci autorun</pre>
      </div>

      <div class="tip">Integrate Lighthouse CI into your GitHub Actions or Jenkins pipeline to catch performance regressions before they reach production!</div>
    </section>

    <!-- Interview Questions -->
    <section>
      <h2>üéØ Interview Questions - Lighthouse</h2>

      <div class="concept-box">
        <h4>Q1: What are Core Web Vitals and why do they matter?</h4>
        <p><strong>Answer:</strong> Core Web Vitals are Google's metrics for user experience: LCP (loading - &lt;2.5s), INP (interactivity - &lt;200ms), and CLS (stability - &lt;0.1). They directly impact search rankings and represent real-world user experience.</p>
      </div>

      <div class="concept-box">
        <h4>Q2: How would you improve a slow LCP score?</h4>
        <p><strong>Answer:</strong> Optimize server response (TTFB), eliminate render-blocking resources, preload LCP image with fetchpriority="high", use modern image formats (WebP/AVIF), implement CDN, and ensure the LCP element is NOT lazy-loaded.</p>
      </div>

      <div class="concept-box">
        <h4>Q3: What causes Cumulative Layout Shift?</h4>
        <p><strong>Answer:</strong> Images without dimensions, dynamically injected content (ads, embeds), web fonts causing FOIT/FOUT, and animations using layout properties (top/left) instead of transforms. Fix by reserving space and using transform for animations.</p>
      </div>

      <div class="concept-box">
        <h4>Q4: What's the difference between lab data and field data?</h4>
        <p><strong>Answer:</strong> Lab data is collected in a controlled environment (Lighthouse). Field data is from real users (CrUX data in PageSpeed Insights). Lab data is reproducible for debugging; field data reflects actual user experience across different devices/networks.</p>
      </div>

      <div class="concept-box">
        <h4>Q5: Which metrics have the biggest impact on the Performance score?</h4>
        <p><strong>Answer:</strong> TBT (30%), LCP (25%), and CLS (25%) account for 80% of the score. FCP and Speed Index each contribute 10%. Focus on reducing JavaScript blocking time and optimizing the largest content element.</p>
      </div>
    </section>

  </div>
</body>
</html>

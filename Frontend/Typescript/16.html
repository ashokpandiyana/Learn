<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 16: Design System & Component Library</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .content {
            padding: 40px;
        }
        .section {
            margin-bottom: 50px;
        }
        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #764ba2;
        }
        .section h3 {
            color: #7c3aed;
            font-size: 1.5em;
            margin: 30px 0 15px 0;
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .code-block .keyword { color: #c792ea; }
        .code-block .function { color: #82aaff; }
        .code-block .string { color: #c3e88d; }
        .code-block .comment { color: #676e95; font-style: italic; }
        .code-block .type { color: #ffcb6b; }
        .note {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .warning {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .tip {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .visual-demo {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
        }
        .demo-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .btn {
            padding: 12px 24px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        .btn-secondary:hover {
            background: #4b5563;
            transform: translateY(-2px);
        }
        .btn-success {
            background: #10b981;
            color: white;
        }
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }
        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }
        .btn-lg {
            padding: 16px 32px;
            font-size: 18px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
        }
        .comparison-table tr:nth-child(even) {
            background: #f8fafc;
        }
        .icon {
            display: inline-block;
            margin-right: 8px;
            font-weight: bold;
        }
        .color-palette {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .color-box {
            width: 120px;
            height: 100px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .theme-example {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .light-theme {
            background: #ffffff;
            color: #1f2937;
            border: 2px solid #e5e7eb;
        }
        .dark-theme {
            background: #1f2937;
            color: #f9fafb;
            border: 2px solid #374151;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Chapter 16: Design System & Component Library</h1>
            <p>Build scalable, type-safe component systems with TypeScript</p>
        </div>
        
        <div class="content">
            <!-- Section 16.1 -->
            <div class="section">
                <h2>16.1 Theme Typing</h2>
                
                <p><strong>Theming</strong> allows you to define design tokens (colors, spacing, typography) that can be used consistently across your application and easily switched (light/dark mode).</p>

                <h3>Defining a Type-Safe Theme</h3>

                <div class="code-block">
<span class="comment">// theme.ts - Define your theme structure</span>
<span class="keyword">export interface</span> <span class="type">Theme</span> {
  colors: {
    primary: <span class="keyword">string</span>;
    secondary: <span class="keyword">string</span>;
    background: <span class="keyword">string</span>;
    text: <span class="keyword">string</span>;
    error: <span class="keyword">string</span>;
    success: <span class="keyword">string</span>;
    warning: <span class="keyword">string</span>;
  };
  spacing: {
    xs: <span class="keyword">string</span>;
    sm: <span class="keyword">string</span>;
    md: <span class="keyword">string</span>;
    lg: <span class="keyword">string</span>;
    xl: <span class="keyword">string</span>;
  };
  typography: {
    fontFamily: <span class="keyword">string</span>;
    fontSize: {
      sm: <span class="keyword">string</span>;
      md: <span class="keyword">string</span>;
      lg: <span class="keyword">string</span>;
      xl: <span class="keyword">string</span>;
    };
    fontWeight: {
      normal: <span class="keyword">number</span>;
      medium: <span class="keyword">number</span>;
      bold: <span class="keyword">number</span>;
    };
  };
  borderRadius: {
    sm: <span class="keyword">string</span>;
    md: <span class="keyword">string</span>;
    lg: <span class="keyword">string</span>;
  };
  shadows: {
    sm: <span class="keyword">string</span>;
    md: <span class="keyword">string</span>;
    lg: <span class="keyword">string</span>;
  };
}

<span class="comment">// Light theme</span>
<span class="keyword">export const</span> <span class="type">lightTheme</span>: <span class="type">Theme</span> = {
  colors: {
    primary: <span class="string">'#3b82f6'</span>,
    secondary: <span class="string">'#6b7280'</span>,
    background: <span class="string">'#ffffff'</span>,
    text: <span class="string">'#1f2937'</span>,
    error: <span class="string">'#ef4444'</span>,
    success: <span class="string">'#10b981'</span>,
    warning: <span class="string">'#f59e0b'</span>,
  },
  spacing: {
    xs: <span class="string">'4px'</span>,
    sm: <span class="string">'8px'</span>,
    md: <span class="string">'16px'</span>,
    lg: <span class="string">'24px'</span>,
    xl: <span class="string">'32px'</span>,
  },
  typography: {
    fontFamily: <span class="string">'Inter, system-ui, sans-serif'</span>,
    fontSize: {
      sm: <span class="string">'14px'</span>,
      md: <span class="string">'16px'</span>,
      lg: <span class="string">'20px'</span>,
      xl: <span class="string">'24px'</span>,
    },
    fontWeight: {
      normal: <span class="keyword">400</span>,
      medium: <span class="keyword">500</span>,
      bold: <span class="keyword">700</span>,
    },
  },
  borderRadius: {
    sm: <span class="string">'4px'</span>,
    md: <span class="string">'8px'</span>,
    lg: <span class="string">'12px'</span>,
  },
  shadows: {
    sm: <span class="string">'0 1px 2px rgba(0, 0, 0, 0.05)'</span>,
    md: <span class="string">'0 4px 6px rgba(0, 0, 0, 0.1)'</span>,
    lg: <span class="string">'0 10px 15px rgba(0, 0, 0, 0.1)'</span>,
  },
};

<span class="comment">// Dark theme</span>
<span class="keyword">export const</span> <span class="type">darkTheme</span>: <span class="type">Theme</span> = {
  ...lightTheme,
  colors: {
    primary: <span class="string">'#60a5fa'</span>,
    secondary: <span class="string">'#9ca3af'</span>,
    background: <span class="string">'#1f2937'</span>,
    text: <span class="string">'#f9fafb'</span>,
    error: <span class="string">'#f87171'</span>,
    success: <span class="string">'#34d399'</span>,
    warning: <span class="string">'#fbbf24'</span>,
  },
};
                </div>

                <div class="visual-demo">
                    <h3>Theme Comparison</h3>
                    <div class="grid-2">
                        <div class="theme-example light-theme">
                            <h4>Light Theme</h4>
                            <p>Background: #ffffff</p>
                            <p>Text: #1f2937</p>
                            <div class="color-palette">
                                <div class="color-box" style="background: #3b82f6;">Primary</div>
                                <div class="color-box" style="background: #10b981;">Success</div>
                                <div class="color-box" style="background: #ef4444;">Error</div>
                            </div>
                        </div>
                        <div class="theme-example dark-theme">
                            <h4>Dark Theme</h4>
                            <p>Background: #1f2937</p>
                            <p>Text: #f9fafb</p>
                            <div class="color-palette">
                                <div class="color-box" style="background: #60a5fa;">Primary</div>
                                <div class="color-box" style="background: #34d399;">Success</div>
                                <div class="color-box" style="background: #f87171;">Error</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>Theme Context with TypeScript</h3>

                <div class="code-block">
<span class="keyword">import</span> { createContext, useContext, useState, ReactNode } <span class="keyword">from</span> <span class="string">'react'</span>;

<span class="comment">// Theme context type</span>
<span class="keyword">interface</span> <span class="type">ThemeContextType</span> {
  theme: <span class="type">Theme</span>;
  themeName: <span class="string">'light'</span> | <span class="string">'dark'</span>;
  toggleTheme: () => <span class="keyword">void</span>;
}

<span class="comment">// Create context with undefined default</span>
<span class="keyword">const</span> <span class="type">ThemeContext</span> = createContext&lt;<span class="type">ThemeContextType</span> | <span class="keyword">undefined</span>&gt;(<span class="keyword">undefined</span>);

<span class="comment">// Provider component</span>
<span class="keyword">export function</span> <span class="function">ThemeProvider</span>({ children }: { children: ReactNode }) {
  <span class="keyword">const</span> [themeName, setThemeName] = useState&lt;<span class="string">'light'</span> | <span class="string">'dark'</span>&gt;(<span class="string">'light'</span>);
  
  <span class="keyword">const</span> theme = themeName === <span class="string">'light'</span> ? lightTheme : darkTheme;

  <span class="keyword">const</span> <span class="function">toggleTheme</span> = () => {
    setThemeName((prev) => (prev === <span class="string">'light'</span> ? <span class="string">'dark'</span> : <span class="string">'light'</span>));
  };

  <span class="keyword">return</span> (
    &lt;<span class="type">ThemeContext</span>.Provider value={{ theme, themeName, toggleTheme }}&gt;
      {children}
    &lt;/<span class="type">ThemeContext</span>.Provider&gt;
  );
}

<span class="comment">// Custom hook with type safety</span>
<span class="keyword">export function</span> <span class="function">useTheme</span>(): <span class="type">ThemeContextType</span> {
  <span class="keyword">const</span> context = useContext(<span class="type">ThemeContext</span>);
  
  <span class="keyword">if</span> (!context) {
    <span class="keyword">throw new</span> Error(<span class="string">'useTheme must be used within ThemeProvider'</span>);
  }
  
  <span class="keyword">return</span> context;
}

<span class="comment">// Usage in components</span>
<span class="keyword">function</span> <span class="function">MyComponent</span>() {
  <span class="keyword">const</span> { theme, toggleTheme } = useTheme();

  <span class="keyword">return</span> (
    &lt;div style={{ 
      background: theme.colors.background,
      color: theme.colors.text,
      padding: theme.spacing.md 
    }}&gt;
      &lt;h1&gt;Themed Component&lt;/h1&gt;
      &lt;button onClick={toggleTheme}&gt;Toggle Theme&lt;/button&gt;
    &lt;/div&gt;
  );
}
                </div>

                <h3>Styled-Components with TypeScript</h3>

                <div class="code-block">
<span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">'styled-components'</span>;

<span class="comment">// Extend styled-components types</span>
<span class="keyword">import</span> <span class="string">'styled-components'</span>;

<span class="keyword">declare module</span> <span class="string">'styled-components'</span> {
  <span class="keyword">export interface</span> <span class="type">DefaultTheme</span> <span class="keyword">extends</span> <span class="type">Theme</span> {}
}

<span class="comment">// Now styled-components knows about your theme!</span>
<span class="keyword">const</span> <span class="type">Button</span> = styled.button`
  background: ${props => props.theme.colors.primary};
  color: white;
  padding: ${props => props.theme.spacing.md};
  border-radius: ${props => props.theme.borderRadius.md};
  border: none;
  font-size: ${props => props.theme.typography.fontSize.md};
  font-weight: ${props => props.theme.typography.fontWeight.medium};
  cursor: pointer;
  transition: all 0.2s;

  &:hover {
    transform: translateY(-2px);
    box-shadow: ${props => props.theme.shadows.md};
  }
`;

<span class="comment">// With additional props</span>
<span class="keyword">interface</span> <span class="type">CardProps</span> {
  variant?: <span class="string">'elevated'</span> | <span class="string">'outlined'</span>;
}

<span class="keyword">const</span> <span class="type">Card</span> = styled.div&lt;<span class="type">CardProps</span>&gt;`
  padding: ${props => props.theme.spacing.lg};
  border-radius: ${props => props.theme.borderRadius.lg};
  background: ${props => props.theme.colors.background};
  
  ${props => props.variant === <span class="string">'elevated'</span> && `
    box-shadow: ${props.theme.shadows.lg};
  `}
  
  ${props => props.variant === <span class="string">'outlined'</span> && `
    border: 1px solid ${props.theme.colors.secondary};
  `}
`;
                </div>

                <h3>Tailwind CSS with TypeScript</h3>

                <div class="code-block">
<span class="comment">// tailwind.config.js - Define theme</span>
<span class="keyword">module</span>.exports = {
  theme: {
    extend: {
      colors: {
        primary: <span class="string">'#3b82f6'</span>,
        secondary: <span class="string">'#6b7280'</span>,
      },
      spacing: {
        <span class="string">'72'</span>: <span class="string">'18rem'</span>,
        <span class="string">'84'</span>: <span class="string">'21rem'</span>,
      },
    },
  },
};

<span class="comment">// Usage with TypeScript (type-safe with VSCode extension)</span>
<span class="keyword">function</span> <span class="function">Button</span>() {
  <span class="keyword">return</span> (
    &lt;button className={<span class="string">"bg-primary text-white px-4 py-2 rounded-md hover:bg-blue-600"</span>}&gt;
      Click me
    &lt;/button&gt;
  );
}

<span class="comment">// Using clsx for conditional classes</span>
<span class="keyword">import</span> clsx <span class="keyword">from</span> <span class="string">'clsx'</span>;

<span class="keyword">interface</span> <span class="type">ButtonProps</span> {
  variant: <span class="string">'primary'</span> | <span class="string">'secondary'</span>;
  size: <span class="string">'sm'</span> | <span class="string">'md'</span> | <span class="string">'lg'</span>;
  disabled?: <span class="keyword">boolean</span>;
}

<span class="keyword">function</span> <span class="function">Button</span>({ variant, size, disabled }: <span class="type">ButtonProps</span>) {
  <span class="keyword">const</span> className = clsx(
    <span class="string">'rounded-md font-medium transition-all'</span>,
    {
      <span class="string">'bg-primary text-white hover:bg-blue-600'</span>: variant === <span class="string">'primary'</span>,
      <span class="string">'bg-secondary text-white hover:bg-gray-700'</span>: variant === <span class="string">'secondary'</span>,
      <span class="string">'px-2 py-1 text-sm'</span>: size === <span class="string">'sm'</span>,
      <span class="string">'px-4 py-2 text-base'</span>: size === <span class="string">'md'</span>,
      <span class="string">'px-6 py-3 text-lg'</span>: size === <span class="string">'lg'</span>,
      <span class="string">'opacity-50 cursor-not-allowed'</span>: disabled,
    }
  );

  <span class="keyword">return</span> &lt;button className={className}&gt;Click me&lt;/button&gt;;
}
                </div>

                <div class="tip">
                    <strong><span class="icon">üí°</span>Production Tip:</strong> Use CSS-in-JS (styled-components, Emotion) for dynamic theming or Tailwind for utility-first approach. Choose based on team preference and project needs.
                </div>
            </div>

            <!-- Section 16.2 -->
            <div class="section">
                <h2>16.2 Variant Props Pattern</h2>
                
                <p>The <strong>variant props pattern</strong> allows you to create flexible components with multiple visual styles while maintaining type safety.</p>

                <h3>Class Variance Authority (CVA)</h3>

                <div class="code-block">
<span class="keyword">import</span> { cva, <span class="keyword">type</span> <span class="type">VariantProps</span> } <span class="keyword">from</span> <span class="string">'class-variance-authority'</span>;

<span class="comment">// Define button variants with CVA</span>
<span class="keyword">const</span> buttonVariants = cva(
  <span class="comment">// Base styles (always applied)</span>
  <span class="string">'inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none'</span>,
  {
    variants: {
      <span class="comment">// Intent variants</span>
      intent: {
        primary: <span class="string">'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500'</span>,
        secondary: <span class="string">'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500'</span>,
        success: <span class="string">'bg-green-600 text-white hover:bg-green-700 focus:ring-green-500'</span>,
        danger: <span class="string">'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500'</span>,
        outline: <span class="string">'border-2 border-gray-300 bg-transparent hover:bg-gray-50 focus:ring-gray-500'</span>,
        ghost: <span class="string">'hover:bg-gray-100 focus:ring-gray-500'</span>,
      },
      <span class="comment">// Size variants</span>
      size: {
        sm: <span class="string">'h-8 px-3 text-sm'</span>,
        md: <span class="string">'h-10 px-4 text-base'</span>,
        lg: <span class="string">'h-12 px-6 text-lg'</span>,
        xl: <span class="string">'h-14 px-8 text-xl'</span>,
      },
      <span class="comment">// Full width variant</span>
      fullWidth: {
        true: <span class="string">'w-full'</span>,
      },
    },
    <span class="comment">// Compound variants (combinations)</span>
    compoundVariants: [
      {
        intent: <span class="string">'primary'</span>,
        size: <span class="string">'lg'</span>,
        className: <span class="string">'text-xl font-bold'</span>,
      },
    ],
    <span class="comment">// Default variants</span>
    defaultVariants: {
      intent: <span class="string">'primary'</span>,
      size: <span class="string">'md'</span>,
    },
  }
);

<span class="comment">// Extract types from CVA</span>
<span class="keyword">type</span> <span class="type">ButtonVariantProps</span> = <span class="type">VariantProps</span>&lt;<span class="keyword">typeof</span> buttonVariants&gt;;

<span class="comment">// Define component props</span>
<span class="keyword">interface</span> <span class="type">ButtonProps</span> 
  <span class="keyword">extends</span> React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,
    <span class="type">ButtonVariantProps</span> {
  loading?: <span class="keyword">boolean</span>;
}

<span class="comment">// Component implementation</span>
<span class="keyword">function</span> <span class="function">Button</span>({
  children,
  className,
  intent,
  size,
  fullWidth,
  loading,
  disabled,
  ...props
}: <span class="type">ButtonProps</span>) {
  <span class="keyword">return</span> (
    &lt;button
      className={buttonVariants({ intent, size, fullWidth, className })}
      disabled={disabled || loading}
      {...props}
    &gt;
      {loading && &lt;Spinner /&gt;}
      {children}
    &lt;/button&gt;
  );
}

<span class="comment">// Usage - Fully type-safe!</span>
&lt;<span class="type">Button</span> intent={<span class="string">"primary"</span>} size={<span class="string">"lg"</span>}&gt;Click me&lt;/<span class="type">Button</span>&gt;
&lt;<span class="type">Button</span> intent={<span class="string">"danger"</span>} size={<span class="string">"sm"</span>} fullWidth&gt;Delete&lt;/<span class="type">Button</span>&gt;
&lt;<span class="type">Button</span> intent={<span class="string">"invalid"</span>}&gt;Error! TypeScript catches this&lt;/<span class="type">Button</span>&gt;
                </div>

                <div class="visual-demo">
                    <h3>Live Button Examples</h3>
                    <div class="demo-buttons">
                        <button class="btn btn-primary">Primary</button>
                        <button class="btn btn-secondary">Secondary</button>
                        <button class="btn btn-success">Success</button>
                        <button class="btn btn-primary btn-sm">Small</button>
                        <button class="btn btn-primary btn-lg">Large</button>
                    </div>
                </div>

                <h3>Manual Variant Implementation</h3>

                <div class="code-block">
<span class="comment">// Without CVA - manual implementation</span>
<span class="keyword">interface</span> <span class="type">ButtonProps</span> {
  variant: <span class="string">'primary'</span> | <span class="string">'secondary'</span> | <span class="string">'outline'</span>;
  size: <span class="string">'sm'</span> | <span class="string">'md'</span> | <span class="string">'lg'</span>;
  children: React.ReactNode;
  onClick?: () => <span class="keyword">void</span>;
  disabled?: <span class="keyword">boolean</span>;
}

<span class="keyword">function</span> <span class="function">Button</span>({ variant, size, children, ...props }: <span class="type">ButtonProps</span>) {
  <span class="comment">// Base styles</span>
  <span class="keyword">let</span> className = <span class="string">'btn '</span>;

  <span class="comment">// Variant styles</span>
  <span class="keyword">switch</span> (variant) {
    <span class="keyword">case</span> <span class="string">'primary'</span>:
      className += <span class="string">'bg-blue-600 text-white hover:bg-blue-700 '</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'secondary'</span>:
      className += <span class="string">'bg-gray-600 text-white hover:bg-gray-700 '</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'outline'</span>:
      className += <span class="string">'border-2 border-blue-600 text-blue-600 hover:bg-blue-50 '</span>;
      <span class="keyword">break</span>;
  }

  <span class="comment">// Size styles</span>
  <span class="keyword">switch</span> (size) {
    <span class="keyword">case</span> <span class="string">'sm'</span>:
      className += <span class="string">'px-3 py-1 text-sm '</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'md'</span>:
      className += <span class="string">'px-4 py-2 text-base '</span>;
      <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'lg'</span>:
      className += <span class="string">'px-6 py-3 text-lg '</span>;
      <span class="keyword">break</span>;
  }

  <span class="keyword">return</span> (
    &lt;button className={className.trim()} {...props}&gt;
      {children}
    &lt;/button&gt;
  );
}
                </div>

                <h3>Extending Component Variants</h3>

                <div class="code-block">
<span class="comment">// Create icon button by extending button variants</span>
<span class="keyword">const</span> iconButtonVariants = cva(
  buttonVariants({ className: <span class="string">'!p-0'</span> }), <span class="comment">// Inherit base button styles</span>
  {
    variants: {
      size: {
        sm: <span class="string">'h-8 w-8'</span>,
        md: <span class="string">'h-10 w-10'</span>,
        lg: <span class="string">'h-12 w-12'</span>,
      },
      shape: {
        circle: <span class="string">'rounded-full'</span>,
        square: <span class="string">'rounded-md'</span>,
      },
    },
    defaultVariants: {
      size: <span class="string">'md'</span>,
      shape: <span class="string">'circle'</span>,
    },
  }
);

<span class="keyword">interface</span> <span class="type">IconButtonProps</span> 
  <span class="keyword">extends</span> React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,
    <span class="type">VariantProps</span>&lt;<span class="keyword">typeof</span> iconButtonVariants&gt; {
  icon: React.ReactNode;
}

<span class="keyword">function</span> <span class="function">IconButton</span>({ icon, size, shape, className, ...props }: <span class="type">IconButtonProps</span>) {
  <span class="keyword">return</span> (
    &lt;button
      className={iconButtonVariants({ size, shape, className })}
      {...props}
    &gt;
      {icon}
    &lt;/button&gt;
  );
}
                </div>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Approach</th>
                            <th>Pros</th>
                            <th>Cons</th>
                            <th>Use When</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>CVA</strong></td>
                            <td>Type-safe, composable, compound variants, auto-completion</td>
                            <td>Extra dependency, learning curve</td>
                            <td>Design systems, component libraries</td>
                        </tr>
                        <tr>
                            <td><strong>Manual</strong></td>
                            <td>No dependencies, simple, full control</td>
                            <td>More verbose, harder to maintain at scale</td>
                            <td>Simple projects, learning</td>
                        </tr>
                        <tr>
                            <td><strong>Styled-components</strong></td>
                            <td>Dynamic styles, theme integration, CSS-in-JS</td>
                            <td>Runtime cost, bundle size</td>
                            <td>Complex styling, heavy theming</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Section 16.3 -->
            <div class="section">
                <h2>16.3 Component Documentation</h2>
                
                <p>Good documentation makes your component library usable by others (and future you!).</p>

                <h3>JSDoc Comments for IntelliSense</h3>

                <div class="code-block">
<span class="comment">/**
 * Primary button component for user actions
 * 
 * @example
 * ```tsx
 * &lt;Button 
 *   variant="primary" 
 *   size="md"
 *   onClick={() => console.log('clicked')}
 * &gt;
 *   Click me
 * &lt;/Button&gt;
 * ```
 */</span>
<span class="keyword">interface</span> <span class="type">ButtonProps</span> {
  <span class="comment">/**
   * Visual style of the button
   * @default "primary"
   */</span>
  variant?: <span class="string">'primary'</span> | <span class="string">'secondary'</span> | <span class="string">'outline'</span>;
  
  <span class="comment">/**
   * Size of the button
   * @default "md"
   */</span>
  size?: <span class="string">'sm'</span> | <span class="string">'md'</span> | <span class="string">'lg'</span>;
  
  <span class="comment">/**
   * Whether button is in loading state
   * Shows spinner and disables interaction
   */</span>
  loading?: <span class="keyword">boolean</span>;
  
  <span class="comment">/**
   * Callback when button is clicked
   */</span>
  onClick?: () => <span class="keyword">void</span>;
  
  <span class="comment">/**
   * Button content
   */</span>
  children: React.ReactNode;
}
                </div>

                <h3>Storybook with TypeScript</h3>

                <div class="code-block">
<span class="comment">// Button.stories.tsx</span>
<span class="keyword">import type</span> { Meta, StoryObj } <span class="keyword">from</span> <span class="string">'@storybook/react'</span>;
<span class="keyword">import</span> { <span class="type">Button</span> } <span class="keyword">from</span> <span class="string">'./Button'</span>;

<span class="comment">// Meta configuration</span>
<span class="keyword">const</span> meta: <span class="type">Meta</span>&lt;<span class="keyword">typeof</span> <span class="type">Button</span>&gt; = {
  title: <span class="string">'Components/Button'</span>,
  component: <span class="type">Button</span>,
  tags: [<span class="string">'autodocs'</span>],
  argTypes: {
    variant: {
      control: <span class="string">'select'</span>,
      options: [<span class="string">'primary'</span>, <span class="string">'secondary'</span>, <span class="string">'outline'</span>],
      description: <span class="string">'Visual style of the button'</span>,
    },
    size: {
      control: <span class="string">'radio'</span>,
      options: [<span class="string">'sm'</span>, <span class="string">'md'</span>, <span class="string">'lg'</span>],
    },
    loading: {
      control: <span class="string">'boolean'</span>,
    },
    disabled: {
      control: <span class="string">'boolean'</span>,
    },
  },
};

<span class="keyword">export default</span> meta;
<span class="keyword">type</span> <span class="type">Story</span> = <span class="type">StoryObj</span>&lt;<span class="keyword">typeof</span> <span class="type">Button</span>&gt;;

<span class="comment">// Stories</span>
<span class="keyword">export const</span> <span class="type">Primary</span>: <span class="type">Story</span> = {
  args: {
    variant: <span class="string">'primary'</span>,
    children: <span class="string">'Primary Button'</span>,
  },
};

<span class="keyword">export const</span> <span class="type">Secondary</span>: <span class="type">Story</span> = {
  args: {
    variant: <span class="string">'secondary'</span>,
    children: <span class="string">'Secondary Button'</span>,
  },
};

<span class="keyword">export const</span> <span class="type">Sizes</span>: <span class="type">Story</span> = {
  render: () => (
    &lt;div style={{ display: <span class="string">'flex'</span>, gap: <span class="string">'1rem'</span> }}&gt;
      &lt;<span class="type">Button</span> size={<span class="string">"sm"</span>}&gt;Small&lt;/<span class="type">Button</span>&gt;
      &lt;<span class="type">Button</span> size={<span class="string">"md"</span>}&gt;Medium&lt;/<span class="type">Button</span>&gt;
      &lt;<span class="type">Button</span> size={<span class="string">"lg"</span>}&gt;Large&lt;/<span class="type">Button</span>&gt;
    &lt;/div&gt;
  ),
};

<span class="keyword">export const</span> <span class="type">Loading</span>: <span class="type">Story</span> = {
  args: {
    loading: <span class="keyword">true</span>,
    children: <span class="string">'Loading...'</span>,
  },
};

<span class="keyword">export const</span> <span class="type">Disabled</span>: <span class="type">Story</span> = {
  args: {
    disabled: <span class="keyword">true</span>,
    children: <span class="string">'Disabled Button'</span>,
  },
};
                </div>

                <h3>Exporting Types</h3>

                <div class="code-block">
<span class="comment">// components/Button/index.ts</span>
<span class="keyword">export</span> { <span class="type">Button</span> } <span class="keyword">from</span> <span class="string">'./Button'</span>;
<span class="keyword">export type</span> { <span class="type">ButtonProps</span> } <span class="keyword">from</span> <span class="string">'./Button'</span>;

<span class="comment">// This allows consumers to:</span>
<span class="keyword">import</span> { <span class="type">Button</span>, <span class="keyword">type</span> <span class="type">ButtonProps</span> } <span class="keyword">from</span> <span class="string">'@your-lib/components'</span>;

<span class="comment">// Extend your components</span>
<span class="keyword">interface</span> <span class="type">CustomButtonProps</span> <span class="keyword">extends</span> <span class="type">ButtonProps</span> {
  customProp: <span class="keyword">string</span>;
}
                </div>

                <div class="note">
                    <strong><span class="icon">‚ÑπÔ∏è</span>Best Practice:</strong> Always export component prop types. This allows users of your library to extend components, create wrappers, and get full TypeScript support.
                </div>

                <div class="tip">
                    <strong><span class="icon">üéØ</span>Documentation Checklist:</strong>
                    <ul style="margin-top: 10px;">
                        <li>‚úÖ JSDoc comments with examples</li>
                        <li>‚úÖ Default values documented</li>
                        <li>‚úÖ Storybook stories for all variants</li>
                        <li>‚úÖ Exported TypeScript types</li>
                        <li>‚úÖ Usage examples in README</li>
                        <li>‚úÖ Accessibility notes</li>
                    </ul>
                </div>
            </div>

            <div class="section" style="background: #f8fafc; padding: 30px; border-radius: 8px; margin-top: 50px;">
                <h2 style="color: #667eea;">üéì Key Takeaways</h2>
                <ul style="line-height: 2; font-size: 1.1em;">
                    <li><strong>Theme Typing:</strong> Define strict types for design tokens (colors, spacing, typography)</li>
                    <li><strong>Context API:</strong> Use typed context for theme switching across app</li>
                    <li><strong>CVA:</strong> Class Variance Authority provides type-safe variant props</li>
                    <li><strong>Variants:</strong> Use discriminated unions for variant props</li>
                    <li><strong>Documentation:</strong> JSDoc + Storybook = great developer experience</li>
                    <li><strong>Export Types:</strong> Always export prop types for consumers</li>
                    <li><strong>Consistency:</strong> Design systems ensure UI consistency at scale</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
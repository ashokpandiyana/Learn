# Chapter 1: CSS Fundamentals - In-Depth Explanation

## 1.1 Syntax and Selectors

### Basic CSS Syntax

CSS (Cascading Style Sheets) follows a simple pattern:

```css
selector {
    property: value;
    another-property: another-value;
}
```

**Components:**
- **Selector**: Targets HTML elements you want to style
- **Declaration Block**: Contains one or more declarations inside `{ }`
- **Property**: The style attribute you want to change (e.g., color, font-size)
- **Value**: The setting for that property
- **Declaration**: A property-value pair ending with semicolon

**Example:**
```css
h1 {
    color: blue;           /* Declaration 1 */
    font-size: 24px;       /* Declaration 2 */
    font-weight: bold;     /* Declaration 3 */
}
```

---

### Type Selectors (Element Selectors)

Targets all elements of a specific HTML tag.

```css
/* Selects ALL paragraph elements */
p {
    color: #333;
    line-height: 1.6;
}

/* Selects ALL div elements */
div {
    margin: 10px;
}

/* Selects ALL anchor tags */
a {
    text-decoration: none;
    color: blue;
}
```

**Use Case:** Setting base styles for HTML elements throughout your site.

---

### Class Selectors

Targets elements with a specific class attribute. Prefix with a dot (`.`).

```css
/* Selects elements with class="button" */
.button {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border-radius: 5px;
}

/* Multiple classes on same element */
.button.primary {
    background-color: #28a745;
}

/* Class can be on any element */
.highlight {
    background-color: yellow;
}
```

**HTML Usage:**
```html
<button class="button">Click Me</button>
<a href="#" class="button primary">Primary Button</a>
<span class="highlight">Important text</span>
```

**Key Points:**
- Classes are reusable across multiple elements
- Elements can have multiple classes (space-separated)
- Most commonly used selector type
- Specificity: 0,0,1,0

---

### ID Selectors

Targets a single element with a specific ID. Prefix with hash (`#`).

```css
/* Selects element with id="header" */
#header {
    background-color: #f8f9fa;
    padding: 20px;
}

#main-navigation {
    display: flex;
    justify-content: space-between;
}
```

**HTML Usage:**
```html
<div id="header">Site Header</div>
<nav id="main-navigation">...</nav>
```

**Important Rules:**
- IDs must be unique per page (one element only)
- Higher specificity than classes (0,1,0,0)
- **Best Practice:** Use classes for styling, IDs for JavaScript hooks
- Avoid using IDs for styling in modern CSS (too specific, hard to override)

---

### Universal Selector

Selects ALL elements on the page. Use with caution!

```css
/* Applies to every single element */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Common reset pattern */
*, *::before, *::after {
    box-sizing: inherit;
}
```

**Performance Note:** Modern browsers optimize this well, but be mindful of overuse.

---

### Attribute Selectors

Targets elements based on their attributes.

```css
/* Has attribute (any value) */
[type] {
    border: 1px solid #ccc;
}

/* Exact match */
[type="text"] {
    padding: 5px;
}

/* Starts with (^) */
[href^="https"] {
    color: green;
}
[class^="btn-"] {
    padding: 10px;
}

/* Ends with ($) */
[href$=".pdf"] {
    background: url('pdf-icon.png') no-repeat;
    padding-left: 20px;
}

/* Contains (*) */
[class*="button"] {
    cursor: pointer;
}

/* Space-separated word match (~) */
[class~="active"] {
    font-weight: bold;
}

/* Hyphen-separated match (|) */
[lang|="en"] {
    /* Matches lang="en" or lang="en-US" */
}

/* Case-insensitive match (i flag) */
[href*="example" i] {
    /* Matches example, EXAMPLE, Example, etc. */
}
```

**Real-World Examples:**
```css
/* Style external links */
a[href^="http"]:not([href*="mysite.com"]) {
    color: #0066cc;
}
a[href^="http"]:not([href*="mysite.com"])::after {
    content: " â†—";
}

/* Style file download links */
a[href$=".pdf"]::before {
    content: "ğŸ“„ ";
}
a[href$=".zip"]::before {
    content: "ğŸ“¦ ";
}

/* Style disabled inputs */
input[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
}
```

---

### Specificity Hierarchy

**CRITICAL CONCEPT:** When multiple rules target the same element, specificity determines which rule wins.

**Specificity Calculation (a, b, c, d):**
- **a**: Inline styles (in HTML style attribute) = 1,0,0,0
- **b**: ID selectors = 0,1,0,0
- **c**: Classes, attributes, pseudo-classes = 0,0,1,0
- **d**: Elements, pseudo-elements = 0,0,0,1

**Examples:**
```css
/* Specificity: 0,0,0,1 */
p {
    color: black;
}

/* Specificity: 0,0,1,0 */
.text {
    color: blue;
}

/* Specificity: 0,1,0,0 */
#unique {
    color: red;
}

/* Specificity: 0,0,1,1 */
p.text {
    color: green;
}

/* Specificity: 0,1,1,0 */
#unique.text {
    color: purple;
}

/* Specificity: 0,0,2,1 */
p.text.highlight {
    color: orange;
}
```

**Calculation Practice:**
```css
/* 0,0,0,1 - one element */
div { }

/* 0,0,1,1 - one class + one element */
div.container { }

/* 0,1,0,0 - one ID */
#header { }

/* 0,1,2,3 - one ID + two classes + three elements */
div#header .nav .nav-item a { }

/* 0,0,3,2 - three classes + two elements */
ul.menu li.active a.link { }
```

**The Winner:**
```css
/* If all these target the same element: */
p { color: black; }              /* 0,0,0,1 */
.text { color: blue; }            /* 0,0,1,0 - WINS over p */
#para { color: red; }             /* 0,1,0,0 - WINS over .text */
<p style="color: green;">         /* 1,0,0,0 - WINS over #para */
p { color: yellow !important; }   /* !important WINS over everything */
```

**Interview Question:** "What color will this text be?"
```html
<p class="text" id="para" style="color: green;">Hello</p>
```
```css
p { color: black; }
.text { color: blue; }
#para { color: red; }
```
**Answer:** Green (inline style wins with specificity 1,0,0,0)

---

## 1.2 The Cascade

### Understanding the Cascade

CSS = **Cascading** Style Sheets. The cascade is the algorithm that determines which styles apply when there are conflicts.

**The Cascade Algorithm (in order of importance):**

1. **Origin and Importance**
   - User-agent !important (browser defaults with !important)
   - User !important (user stylesheet with !important)
   - Author !important (your CSS with !important)
   - CSS Animations
   - Author styles (your normal CSS)
   - User styles
   - User-agent styles

2. **Specificity** (if origin is the same)

3. **Order of Appearance** (if specificity is the same, last one wins)

### Origin Example

```css
/* Browser default (User-agent) */
p {
    margin: 16px 0;  /* Browser provides this */
}

/* Your CSS (Author) */
p {
    margin: 20px 0;  /* This overrides browser default */
}
```

### Order of Appearance

```css
p {
    color: blue;
}

p {
    color: red;   /* This wins - it comes last */
}
```

**In External Stylesheets:**
```html
<link rel="stylesheet" href="style1.css">  /* p { color: blue; } */
<link rel="stylesheet" href="style2.css">  /* p { color: red; } - WINS */
```

---

### Inheritance

Some CSS properties are inherited from parent to child elements automatically.

**Inherited Properties:**
- Text properties: `color`, `font-family`, `font-size`, `font-weight`, `line-height`, `text-align`
- List properties: `list-style-type`
- `visibility`, `cursor`

**Not Inherited:**
- Box model: `margin`, `padding`, `border`, `width`, `height`
- `background`, `display`, `position`
- Most layout properties

**Example:**
```css
body {
    color: #333;           /* Inherited by all descendants */
    font-family: Arial;    /* Inherited by all descendants */
    background: white;     /* NOT inherited */
}

div {
    /* Automatically has color: #333 and font-family: Arial */
    /* Does NOT have background: white */
}
```

---

### CSS Keywords: inherit, initial, unset, revert

```css
/* inherit: Force inheritance */
div {
    border: 1px solid black;
}
p {
    border: inherit;  /* Forces p to inherit border from parent */
}

/* initial: Reset to CSS default (not browser default) */
div {
    display: initial;  /* Becomes 'inline' (CSS spec default) */
}

/* unset: inherit if inheritable, otherwise initial */
.reset {
    color: unset;      /* Acts like 'inherit' (color is inheritable) */
    display: unset;    /* Acts like 'initial' (display not inheritable) */
}

/* revert: Goes back to browser default */
h1 {
    font-size: revert;  /* Back to browser's default h1 size */
}
```

**Practical Example:**
```css
.button {
    all: unset;  /* Reset ALL properties */
    /* Now style from scratch */
    padding: 10px 20px;
    background: blue;
}
```

---

## 1.3 Box Model

### The CSS Box Model

Every element in CSS is a rectangular box with four areas:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MARGIN (transparent)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        BORDER                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚      PADDING                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚      CONTENT          â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    (width Ã— height)   â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                              â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
1. **Content**: The actual content (text, images)
2. **Padding**: Space between content and border (transparent)
3. **Border**: Line around padding (can be styled)
4. **Margin**: Space outside border (transparent, creates distance from other elements)

### Box Model Example

```css
.box {
    /* Content dimensions */
    width: 200px;
    height: 100px;
    
    /* Padding */
    padding: 20px;
    /* OR */
    padding-top: 10px;
    padding-right: 15px;
    padding-bottom: 10px;
    padding-left: 15px;
    /* Shorthand: padding: top right bottom left; */
    
    /* Border */
    border: 2px solid black;
    /* OR */
    border-width: 2px;
    border-style: solid;
    border-color: black;
    
    /* Margin */
    margin: 30px;
    /* OR individual sides like padding */
}
```

**Total Element Size Calculation (content-box):**
- **Total Width** = width + padding-left + padding-right + border-left + border-right
- **Total Height** = height + padding-top + padding-bottom + border-top + border-bottom

**Example Calculation:**
```css
.box {
    width: 200px;
    padding: 20px;      /* 20px on each side */
    border: 5px solid;  /* 5px on each side */
}

/* Total width = 200 + 20 + 20 + 5 + 5 = 250px */
```

---

### box-sizing Property

**CRITICAL FOR PRODUCTION:** Changes how width/height are calculated.

```css
/* Default behavior */
.content-box {
    box-sizing: content-box;  /* Default */
    width: 200px;
    padding: 20px;
    border: 5px solid;
    /* Total width = 250px (width + padding + border) */
}

/* Better behavior */
.border-box {
    box-sizing: border-box;
    width: 200px;
    padding: 20px;
    border: 5px solid;
    /* Total width = 200px (padding and border included) */
    /* Content width = 200 - 40 - 10 = 150px */
}
```

**Production Best Practice (Universal Box-Sizing):**
```css
/* Apply to ALL elements - HIGHLY RECOMMENDED */
*, *::before, *::after {
    box-sizing: border-box;
}

/* OR using inheritance */
html {
    box-sizing: border-box;
}
*, *::before, *::after {
    box-sizing: inherit;
}
```

**Why border-box?**
- Predictable sizing (width means total width)
- Easier calculations
- Adding padding doesn't break layouts
- Matches developer mental model

---

### Margin Collapsing

**CONFUSING BEHAVIOR:** Vertical margins between elements collapse (combine) rather than add up.

**Scenario 1: Adjacent Siblings**
```css
.box1 {
    margin-bottom: 30px;
}
.box2 {
    margin-top: 20px;
}
/* Actual space between them: 30px (not 50px!) */
/* The larger margin wins */
```

**Scenario 2: Parent and First/Last Child**
```html
<div class="parent">
    <div class="child">Content</div>
</div>
```
```css
.parent {
    margin-top: 50px;
}
.child {
    margin-top: 30px;
}
/* These margins collapse! Total margin: 50px */
```

**Preventing Margin Collapse:**
```css
/* Method 1: Add border to parent */
.parent {
    border-top: 1px solid transparent;
}

/* Method 2: Add padding to parent */
.parent {
    padding-top: 1px;
}

/* Method 3: Use flexbox or grid */
.parent {
    display: flex;
    flex-direction: column;
}

/* Method 4: Overflow */
.parent {
    overflow: auto;
}
```

**Important Notes:**
- Only **vertical** margins collapse (not horizontal)
- Margins don't collapse with `float`, `position: absolute`, or `inline-block`
- Negative margins can collapse too

---

## 1.4 CSS Values and Units

### Absolute Units

**Fixed sizes that don't change.**

```css
/* Pixels (most common) */
.element {
    width: 300px;
    font-size: 16px;
}

/* Points (print media) */
.print-text {
    font-size: 12pt;
}

/* Other absolute units (rarely used in web) */
.rare {
    width: 2cm;     /* Centimeters */
    width: 20mm;    /* Millimeters */
    width: 0.5in;   /* Inches */
    width: 6pc;     /* Picas (1pc = 12pt) */
}
```

**When to Use:**
- `px`: General web design, precise control
- `pt`: Print stylesheets
- Others: Usually only in print CSS

---

### Relative Units

**Sizes relative to something else.**

#### em Units

Relative to the **parent element's font-size** or the element's own font-size (for properties other than font-size).

```css
/* Example 1: font-size */
.parent {
    font-size: 16px;
}
.child {
    font-size: 1.5em;  /* 1.5 Ã— 16px = 24px */
}

/* Example 2: Compounding */
.parent {
    font-size: 16px;
}
.child {
    font-size: 1.5em;  /* 24px */
}
.grandchild {
    font-size: 1.5em;  /* 1.5 Ã— 24px = 36px - COMPOUNDS! */
}

/* Example 3: Other properties */
.box {
    font-size: 16px;
    padding: 1em;      /* 1 Ã— 16px = 16px */
    margin: 0.5em;     /* 0.5 Ã— 16px = 8px */
}
```

**Problem with em:** Compounding effect makes it hard to predict final size.

---

#### rem Units

Relative to the **root element's font-size** (html element). More predictable than em.

```css
/* Set root size */
html {
    font-size: 16px;  /* This is usually the default */
}

/* All rem values reference this root size */
.element1 {
    font-size: 1.5rem;    /* 1.5 Ã— 16px = 24px */
    padding: 2rem;        /* 2 Ã— 16px = 32px */
}

.nested-deep-element {
    font-size: 1.5rem;    /* Still 24px - doesn't compound! */
}
```

**rem vs em:**
```css
/* Comparison */
.parent {
    font-size: 20px;
}
.child {
    font-size: 1.5em;    /* 30px (relative to parent) */
    padding: 1.5em;      /* 45px (relative to own font-size!) */
    
    font-size: 1.5rem;   /* 24px (relative to root 16px) */
    padding: 1.5rem;     /* 24px (relative to root 16px) */
}
```

**Best Practice:** Use `rem` for most sizing, `em` for properties that should scale with element's font-size.

---

#### Percentage (%)

Relative to the **parent element's size**.

```css
.parent {
    width: 1000px;
    height: 500px;
    font-size: 20px;
}

.child {
    width: 50%;         /* 50% of 1000px = 500px */
    height: 50%;        /* 50% of 500px = 250px */
    font-size: 150%;    /* 150% of 20px = 30px */
    padding: 10%;       /* 10% of parent's WIDTH (always width!) */
}
```

**Important:** Percentage padding/margin uses parent's **width**, not height!

---

#### Viewport Units

Relative to the **browser viewport** (visible area).

```css
/* vw: 1% of viewport width */
.full-width {
    width: 100vw;      /* Full viewport width */
}
.half-width {
    width: 50vw;       /* Half viewport width */
}

/* vh: 1% of viewport height */
.full-height {
    height: 100vh;     /* Full viewport height */
}
.hero {
    height: 80vh;      /* 80% of viewport height */
}

/* vmin: 1% of viewport's smaller dimension */
.square {
    width: 50vmin;
    height: 50vmin;    /* Always square */
}

/* vmax: 1% of viewport's larger dimension */
.responsive {
    font-size: 5vmax;  /* Scales with larger dimension */
}
```

**Practical Examples:**
```css
/* Full-screen hero section */
.hero {
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Responsive typography */
h1 {
    font-size: calc(2rem + 2vw);  /* Grows with viewport */
}

/* Centered modal */
.modal {
    width: 90vw;
    max-width: 600px;
    height: 80vh;
}
```

---

#### ch and ex Units

**ch**: Width of the "0" (zero) character in the current font.
**ex**: Height of the "x" character in the current font.

```css
/* Optimal line length (45-75 characters) */
.readable-text {
    max-width: 65ch;  /* About 65 characters wide */
}

/* Useful for monospace fonts */
.code-block {
    width: 80ch;      /* Exactly 80 characters wide */
}

/* ex is rarely used */
.small-cap {
    font-size: 2ex;
}
```

**Real-World Use:**
```css
/* Readable article width */
article {
    max-width: 70ch;
    margin: 0 auto;
    line-height: 1.6;
}
```

---

### Interview Question: em vs rem

**Q: "Explain the difference between em and rem units."**

**A:**
- **em**: Relative to parent's font-size (or own font-size for non-font properties). Can compound in nested elements.
- **rem**: Relative to root (html) font-size. Consistent throughout document, doesn't compound.

**Example:**
```css
html { font-size: 16px; }
.parent { font-size: 20px; }

.child {
    font-size: 1.5em;   /* 30px (1.5 Ã— parent's 20px) */
    font-size: 1.5rem;  /* 24px (1.5 Ã— root's 16px) */
}
```

**When to use:**
- **rem**: Sizing that should be consistent (spacing, layout)
- **em**: Properties that should scale with element's font-size (padding around text)

---

### Production Tip: Setting Base Font Size

```css
/* Method 1: Using percentage (accessibility-friendly) */
html {
    font-size: 62.5%;  /* 10px if browser default is 16px */
}
/* Now 1rem = 10px, 1.6rem = 16px, easy math! */

/* Method 2: Direct pixel value */
html {
    font-size: 16px;
}

/* Method 3: Responsive base size */
html {
    font-size: 16px;
}
@media (min-width: 768px) {
    html {
        font-size: 18px;
    }
}
```

---

## Key Takeaways for Chapter 1

1. **Specificity is crucial** - Calculate it as (inline, ID, class, element)
2. **Always use `box-sizing: border-box`** - Makes layout math easier
3. **Prefer `rem` over `em`** for predictable sizing
4. **Understand the cascade** - Origin â†’ Specificity â†’ Order
5. **Watch for margin collapsing** - Vertical margins behave differently
6. **Use classes for styling** - Avoid IDs in CSS (too specific)
7. **Relative units are responsive** - Use viewport units for modern layouts

---

## Practice Exercises

Try to solve these without looking at the answers:

1. Calculate specificity: `div#header .nav ul li a.active`
2. What's the total width? `.box { width: 300px; padding: 25px; border: 5px solid; box-sizing: content-box; }`
3. If `html { font-size: 16px; }` and `.text { font-size: 1.25rem; }`, what's the computed font-size in pixels?
4. Will margins collapse? `.box1 { margin-bottom: 40px; }` `.box2 { margin-top: 30px; }`

**Answers:**
1. 0,1,2,3
2. 360px (300 + 50 + 10)
3. 20px (1.25 Ã— 16)
4. Yes, actual space is 40px (larger wins)

---

This foundation is essential for everything else in CSS. Master these concepts before moving to Chapter 2!
# Chapter 24: Integration Patterns - Complete In-Depth Guide

## Table of Contents
1. [Introduction to Integration Patterns](#introduction-to-integration-patterns)
2. [With CSS Modules](#1-with-css-modules)
3. [With Styled Components](#2-with-styled-components)
4. [With Headless UI](#3-with-headless-ui)
5. [Class Merging (clsx/tailwind-merge)](#4-class-merging-clsxtailwind-merge)
6. [Complete Real-World Examples](#complete-real-world-examples)

---

## Introduction to Integration Patterns

### Why Integration Matters

In real-world projects, you rarely use a single styling approach. Integration patterns help you:

- **Leverage existing code** - Add Tailwind to projects with existing CSS
- **Use best tools** - Combine Tailwind's strengths with other libraries
- **Manage complexity** - Use different tools for different problems
- **Team collaboration** - Work with developers who prefer different approaches
- **Gradual adoption** - Migrate to Tailwind incrementally

### Common Integration Scenarios

| Scenario | Solution | When to Use |
|----------|----------|-------------|
| Component-specific styles | CSS Modules | Complex animations, unique styles |
| JavaScript-based styling | Styled Components | Dynamic theming, React apps |
| Accessible components | Headless UI | Dropdowns, modals, tabs |
| Component libraries | Class merging | Reusable components with overrides |

---

## 1. With CSS Modules

### What are CSS Modules?

CSS Modules automatically scope CSS to components, preventing global namespace pollution.

**Before CSS Modules:**
```css
/* button.css - Affects ALL buttons globally */
.button {
  padding: 10px;
}
```

**With CSS Modules:**
```css
/* button.module.css - Only affects this component */
.button {
  padding: 10px;
}
/* Becomes: .button_a1b2c3 in production */
```

### Why Combine with Tailwind?

**Tailwind Strengths:**
- ‚úÖ Rapid prototyping
- ‚úÖ Utility-first approach
- ‚úÖ Responsive design
- ‚úÖ Spacing and layout

**CSS Modules Strengths:**
- ‚úÖ Complex animations
- ‚úÖ Pseudo-elements (::before, ::after)
- ‚úÖ Component-specific unique styles
- ‚úÖ Keyframe animations

### Basic Integration Setup

**1. Project Structure:**
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Button/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Button.module.css
‚îÇ   ‚îú‚îÄ‚îÄ Card/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Card.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Card.module.css
‚îÇ   ‚îî‚îÄ‚îÄ Form/
‚îÇ       ‚îú‚îÄ‚îÄ Form.jsx
‚îÇ       ‚îî‚îÄ‚îÄ Form.module.css
‚îî‚îÄ‚îÄ styles/
    ‚îî‚îÄ‚îÄ globals.css
```

**2. Global Tailwind Setup (globals.css):**
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base styles if needed */
@layer base {
  body {
    @apply bg-gray-50 text-gray-900;
  }
}
```

### Example 1: Button Component

**Button.module.css:**
```css
/* Use @apply for common Tailwind patterns */
.button {
  @apply px-6 py-3 rounded-lg font-semibold transition-all duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
}

/* Variant styles */
.primary {
  @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
}

.secondary {
  @apply bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500;
}

.danger {
  @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
}

/* Size variants */
.small {
  @apply text-sm px-4 py-2;
}

.large {
  @apply text-lg px-8 py-4;
}

/* Complex styles that can't be done with Tailwind */
.gradient {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  position: relative;
  overflow: hidden;
}

.gradient::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.3),
    transparent
  );
  transition: left 0.5s;
}

.gradient:hover::before {
  left: 100%;
}

.gradient:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

/* Loading state with animation */
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.loading {
  @apply opacity-70 cursor-not-allowed;
  position: relative;
}

.loading::after {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  top: 50%;
  right: 10px;
  margin-top: -8px;
  border: 2px solid transparent;
  border-top-color: currentColor;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
```

**Button.jsx:**
```jsx
import React from 'react';
import styles from './Button.module.css';

function Button({ 
  children, 
  variant = 'primary',
  size = 'medium',
  loading = false,
  className = '',
  disabled = false,
  ...props 
}) {
  // Combine CSS Module classes
  const buttonClasses = [
    styles.button,
    styles[variant],
    size === 'small' && styles.small,
    size === 'large' && styles.large,
    loading && styles.loading,
    className, // Allow additional Tailwind classes from parent
  ].filter(Boolean).join(' ');

  return (
    <button 
      className={buttonClasses} 
      disabled={disabled || loading}
      {...props}
    >
      {loading ? 'Loading...' : children}
    </button>
  );
}

export default Button;
```

**Usage Examples:**
```jsx
import Button from './components/Button/Button';

function App() {
  return (
    <div className="p-8 space-y-4">
      {/* Basic variants */}
      <Button variant="primary">Primary Button</Button>
      <Button variant="secondary">Secondary Button</Button>
      <Button variant="danger">Danger Button</Button>
      
      {/* Sizes */}
      <Button variant="primary" size="small">Small</Button>
      <Button variant="primary" size="large">Large</Button>
      
      {/* Special variants */}
      <Button variant="gradient">Gradient with Shine Effect</Button>
      
      {/* Loading state */}
      <Button variant="primary" loading>Processing</Button>
      
      {/* With additional Tailwind classes */}
      <Button variant="primary" className="w-full mt-4">
        Full Width Button
      </Button>
      
      {/* Disabled */}
      <Button variant="primary" disabled>Disabled</Button>
    </div>
  );
}
```

### Example 2: Card Component with Complex Animations

**Card.module.css:**
```css
.card {
  @apply bg-white rounded-xl shadow-lg overflow-hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card:hover {
  @apply shadow-2xl;
  transform: translateY(-8px);
}

/* Featured card with gradient border effect */
.featured {
  position: relative;
  padding: 2px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.featured::before {
  content: '';
  position: absolute;
  inset: 2px;
  background: white;
  border-radius: 0.75rem;
  z-index: 0;
}

.featured > * {
  position: relative;
  z-index: 1;
}

/* Card sections */
.cardHeader {
  @apply p-6 border-b border-gray-200;
}

.cardBody {
  @apply p-6;
}

.cardFooter {
  @apply px-6 py-4 bg-gray-50 border-t border-gray-200;
}

/* Hover reveal effect */
.cardImage {
  @apply relative overflow-hidden;
  height: 200px;
}

.cardImage img {
  @apply w-full h-full object-cover;
  transition: transform 0.5s ease;
}

.card:hover .cardImage img {
  transform: scale(1.1);
}

.imageOverlay {
  @apply absolute inset-0 bg-black/50 flex items-center justify-center gap-4;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.card:hover .imageOverlay {
  opacity: 1;
}

/* Shimmer loading effect */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.loading {
  background: linear-gradient(
    90deg,
    #f0f0f0 0px,
    #e0e0e0 40px,
    #f0f0f0 80px
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite linear;
  @apply min-h-[300px];
}

/* Pulse effect for new items */
@keyframes pulse-border {
  0%, 100% {
    border-color: rgba(59, 130, 246, 0);
  }
  50% {
    border-color: rgba(59, 130, 246, 1);
  }
}

.new {
  animation: pulse-border 2s ease-in-out infinite;
  @apply border-2;
}
```

**Card.jsx:**
```jsx
import React from 'react';
import styles from './Card.module.css';

function Card({ 
  children, 
  featured = false,
  loading = false,
  isNew = false,
  className = '' 
}) {
  const cardClass = [
    styles.card,
    featured && styles.featured,
    loading && styles.loading,
    isNew && styles.new,
    className,
  ].filter(Boolean).join(' ');

  if (loading) {
    return <div className={cardClass} />;
  }

  return <div className={cardClass}>{children}</div>;
}

// Sub-components
Card.Header = ({ children, className = '' }) => (
  <div className={`${styles.cardHeader} ${className}`}>
    {children}
  </div>
);

Card.Body = ({ children, className = '' }) => (
  <div className={`${styles.cardBody} ${className}`}>
    {children}
  </div>
);

Card.Footer = ({ children, className = '' }) => (
  <div className={`${styles.cardFooter} ${className}`}>
    {children}
  </div>
);

Card.Image = ({ src, alt, showOverlay = false, overlayContent, className = '' }) => (
  <div className={`${styles.cardImage} ${className}`}>
    <img src={src} alt={alt} />
    {showOverlay && overlayContent && (
      <div className={styles.imageOverlay}>
        {overlayContent}
      </div>
    )}
  </div>
);

export default Card;
```

**Usage Examples:**
```jsx
import Card from './components/Card/Card';

function ProductGrid() {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6">
      {/* Basic Card */}
      <Card>
        <Card.Image 
          src="product.jpg" 
          alt="Product"
          showOverlay
          overlayContent={
            <>
              <button className="p-3 bg-white rounded-full hover:bg-gray-100">
                <svg className="w-6 h-6">üëÅÔ∏è</svg>
              </button>
              <button className="p-3 bg-white rounded-full hover:bg-gray-100">
                <svg className="w-6 h-6">‚ù§Ô∏è</svg>
              </button>
            </>
          }
        />
        <Card.Body>
          <h3 className="text-xl font-bold mb-2">Product Name</h3>
          <p className="text-gray-600 mb-4">Product description...</p>
          <div className="flex items-center justify-between">
            <span className="text-2xl font-bold">$99.99</span>
            <button className="px-4 py-2 bg-blue-600 text-white rounded-lg">
              Add to Cart
            </button>
          </div>
        </Card.Body>
      </Card>

      {/* Featured Card */}
      <Card featured>
        <Card.Header>
          <div className="flex items-center justify-between">
            <h3 className="text-xl font-bold">Featured Product</h3>
            <span className="px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full">
              New
            </span>
          </div>
        </Card.Header>
        <Card.Body>
          <p className="text-gray-600">Special featured content...</p>
        </Card.Body>
        <Card.Footer>
          <button className="w-full py-2 bg-purple-600 text-white rounded-lg">
            View Details
          </button>
        </Card.Footer>
      </Card>

      {/* Loading Card */}
      <Card loading />

      {/* New Item Card */}
      <Card isNew>
        <Card.Body>
          <span className="inline-block px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full mb-3">
            JUST ADDED
          </span>
          <h3 className="text-xl font-bold mb-2">New Arrival</h3>
          <p className="text-gray-600">Check out our newest product!</p>
        </Card.Body>
      </Card>
    </div>
  );
}
```

### Example 3: Form Component with Complex Validation States

**Form.module.css:**
```css
.formGroup {
  @apply mb-6 relative;
}

.label {
  @apply block text-sm font-medium text-gray-700 mb-2;
  transition: color 0.2s ease;
}

.input {
  @apply w-full px-4 py-3 border border-gray-300 rounded-lg;
  @apply transition-all duration-200;
  @apply focus:outline-none;
}

/* Focus state with glow */
.input:focus {
  @apply border-blue-500;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.input:focus + .label {
  @apply text-blue-600;
}

/* Error state */
.inputError {
  @apply border-red-500 bg-red-50;
}

.inputError:focus {
  @apply border-red-500;
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

.inputError + .label {
  @apply text-red-600;
}

/* Success state */
.inputSuccess {
  @apply border-green-500 bg-green-50;
  padding-right: 2.5rem;
}

.inputSuccess:focus {
  @apply border-green-500;
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* Error message animation */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
  20%, 40%, 60%, 80% { transform: translateX(10px); }
}

.errorMessage {
  @apply text-red-600 text-sm mt-2 flex items-center gap-2;
  animation: shake 0.5s ease-in-out;
}

.successMessage {
  @apply text-green-600 text-sm mt-2 flex items-center gap-2;
}

/* Success checkmark icon */
.successIcon {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
}

.successIcon::after {
  content: '';
  position: absolute;
  left: 7px;
  top: 3px;
  width: 6px;
  height: 12px;
  border: solid #10b981;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* Floating label effect */
.floatingLabel {
  position: relative;
}

.floatingLabel .label {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  @apply text-gray-500 bg-white px-1;
  pointer-events: none;
  transition: all 0.2s ease;
}

.floatingLabel .input:focus ~ .label,
.floatingLabel .input:not(:placeholder-shown) ~ .label {
  top: 0;
  @apply text-xs text-blue-600;
}

/* Custom checkbox */
.checkbox {
  @apply relative inline-block w-5 h-5 mr-3;
}

.checkbox input {
  @apply sr-only;
}

.checkboxLabel {
  @apply absolute inset-0 bg-white border-2 border-gray-300 rounded cursor-pointer;
  transition: all 0.2s ease;
}

.checkbox input:checked + .checkboxLabel {
  @apply bg-blue-600 border-blue-600;
}

.checkbox input:focus + .checkboxLabel {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.checkbox input:checked + .checkboxLabel::after {
  content: '';
  position: absolute;
  left: 6px;
  top: 2px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

/* Password strength indicator */
.strengthMeter {
  @apply mt-2 h-2 bg-gray-200 rounded-full overflow-hidden;
}

.strengthBar {
  @apply h-full transition-all duration-300;
}

.strengthWeak {
  width: 33%;
  @apply bg-red-500;
}

.strengthMedium {
  width: 66%;
  @apply bg-yellow-500;
}

.strengthStrong {
  width: 100%;
  @apply bg-green-500;
}
```

**Form.jsx:**
```jsx
import React, { useState } from 'react';
import styles from './Form.module.css';

function FormGroup({ 
  label, 
  error, 
  success, 
  children,
  floating = false 
}) {
  const wrapperClass = floating ? styles.floatingLabel : '';
  
  return (
    <div className={`${styles.formGroup} ${wrapperClass}`}>
      {children}
      {label && <label className={styles.label}>{label}</label>}
      {error && (
        <p className={styles.errorMessage}>
          <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
          </svg>
          {error}
        </p>
      )}
      {success && (
        <p className={styles.successMessage}>
          <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
          </svg>
          {success}
        </p>
      )}
    </div>
  );
}

function Input({ error, success, className = '', ...props }) {
  const inputClass = [
    styles.input,
    error && styles.inputError,
    success && styles.inputSuccess,
    className,
  ].filter(Boolean).join(' ');

  return (
    <div className="relative">
      <input className={inputClass} {...props} />
      {success && <div className={styles.successIcon} />}
    </div>
  );
}

function PasswordInput({ 
  value, 
  onChange, 
  showStrength = true,
  ...props 
}) {
  const [showPassword, setShowPassword] = useState(false);
  
  const calculateStrength = (password) => {
    let strength = 0;
    if (password.length >= 8) strength++;
    if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
    if (/\d/.test(password)) strength++;
    if (/[^a-zA-Z\d]/.test(password)) strength++;
    return strength;
  };
  
  const strength = calculateStrength(value);
  const strengthClass = 
    strength <= 1 ? styles.strengthWeak :
    strength <= 2 ? styles.strengthMedium :
    styles.strengthStrong;

  return (
    <>
      <div className="relative">
        <input
          type={showPassword ? 'text' : 'password'}
          value={value}
          onChange={onChange}
          className={styles.input}
          style={{ paddingRight: '2.5rem' }}
          {...props}
        />
        <button
          type="button"
          onClick={() => setShowPassword(!showPassword)}
          className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"
        >
          {showPassword ? 'üôà' : 'üëÅÔ∏è'}
        </button>
      </div>
      {showStrength && value && (
        <div className={styles.strengthMeter}>
          <div className={`${styles.strengthBar} ${strengthClass}`} />
        </div>
      )}
    </>
  );
}

function Checkbox({ label, ...props }) {
  return (
    <label className="flex items-center cursor-pointer">
      <div className={styles.checkbox}>
        <input type="checkbox" {...props} />
        <div className={styles.checkboxLabel} />
      </div>
      <span className="text-sm text-gray-700 select-none">{label}</span>
    </label>
  );
}

// Complete form example
function ContactForm() {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    password: '',
    message: '',
    subscribe: false,
  });
  
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});

  const validateField = (name, value) => {
    switch (name) {
      case 'name':
        return value.length < 2 ? 'Name must be at least 2 characters' : '';
      case 'email':
        return !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value) 
          ? 'Invalid email address' 
          : '';
      case 'password':
        return value.length < 8 ? 'Password must be at least 8 characters' : '';
      case 'message':
        return value.length < 10 ? 'Message must be at least 10 characters' : '';
      default:
        return '';
    }
  };

  const handleBlur = (e) => {
    const { name, value } = e.target;
    setTouched({ ...touched, [name]: true });
    setErrors({ ...errors, [name]: validateField(name, value) });
  };

  const handleChange = (e) => {
    const { name, value, type, checked } = e.target;
    const newValue = type === 'checkbox' ? checked : value;
    setFormData({ ...formData, [name]: newValue });
    
    if (touched[name]) {
      setErrors({ ...errors, [name]: validateField(name, value) });
    }
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    // Validate all fields
    const newErrors = {};
    Object.keys(formData).forEach(key => {
      if (key !== 'subscribe') {
        const error = validateField(key, formData[key]);
        if (error) newErrors[key] = error;
      }
    });
    
    if (Object.keys(newErrors).length > 0) {
      setErrors(newErrors);
      setTouched(Object.keys(formData).reduce((acc, key) => ({ ...acc, [key]: true }), {}));
      return;
    }
    
    console.log('Form submitted:', formData);
  };

  return (
    <form onSubmit={handleSubmit} className="max-w-md mx-auto p-8 bg-white rounded-xl shadow-lg">
      <h2 className="text-3xl font-bold text-gray-900 mb-8">Contact Us</h2>

      <FormGroup 
        label="Full Name *" 
        error={touched.name && errors.name}
        success={touched.name && !errors.name && formData.name ? 'Looks good!' : ''}
      >
        <Input
          type="text"
          name="name"
          value={formData.name}
          onChange={handleChange}
          onBlur={handleBlur}
          error={touched.name && errors.name}
          success={touched.name && !errors.name && formData.name}
          placeholder="John Doe"
        />
      </FormGroup>

      <FormGroup 
        label="Email Address *" 
        error={touched.email && errors.email}
        success={touched.email && !errors.email && formData.email ? 'Valid email' : ''}
      >
        <Input
          type="email"
          name="email"
          value={formData.email}
          onChange={handleChange}
          onBlur={handleBlur}
          error={touched.email && errors.email}
          success={touched.email && !errors.email && formData.email}
          placeholder="john@example.com"
        />
      </FormGroup>

      <FormGroup 
        label="Password *" 
        error={touched.password && errors.password}
      >
        <PasswordInput
          name="password"
          value={formData.password}
          onChange={handleChange}
          onBlur={handleBlur}
          placeholder="Min 8 characters"
        />
      </FormGroup>

      <FormGroup 
        label="Message *" 
        error={touched.message && errors.message}
      >
        <textarea
          name="message"
          value={formData.message}
          onChange={handleChange}
          onBlur={handleBlur}
          className={`${styles.input} resize-none`}
          rows="4"
          placeholder="Your message..."
        />
      </FormGroup>

      <div className="mb-6">
        <Checkbox
          name="subscribe"
          checked={formData.subscribe}
          onChange={handleChange}
          label="Subscribe to our newsletter"
        />
      </div>

      <button 
        type="submit"
        className="w-full py-3 bg-blue-600 text-white font-semibold rounded-lg
                   hover:bg-blue-700 active:bg-blue-800
                   transition-colors duration-200"
      >
        Send Message
      </button>
    </form>
  );
}

export { FormGroup, Input, PasswordInput, Checkbox, ContactForm };
```

### Best Practices for CSS Modules + Tailwind

```jsx
// ‚úÖ GOOD: Use @apply for repeated patterns
// Button.module.css
.button {
  @apply px-4 py-2 rounded font-semibold transition-colors;
}

// ‚úÖ GOOD: Use CSS for complex animations
@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animated {
  animation: fadeSlideIn 0.3s ease-out;
}

// ‚úÖ GOOD: Combine CSS Modules with utility classes
<Button className="mt-4 w-full" variant="primary">
  Submit
</Button>

// ‚ùå BAD: Overusing @apply (defeats Tailwind's purpose)
.container {
  @apply max-w-7xl mx-auto px-4 py-8 bg-white rounded-lg shadow-md 
         border border-gray-200 flex flex-col gap-4 items-center;
}
// Better: Just use utility classes directly in JSX

// ‚ùå BAD: Duplicating Tailwind utilities in CSS
.text {
  font-size: 1rem;
  line-height: 1.5;
  color: #374151;
  font-weight: 500;
}
// Better: className="text-base leading-6 text-gray-700 font-medium"

// ‚úÖ GOOD: Use CSS for pseudo-elements
.icon::before {
  content: '‚Üí';
  margin-right: 8px;
}

// ‚úÖ GOOD: Use CSS for complex selectors
.list > li:not(:last-child) {
  @apply border-b border-gray-200;
}
```

### When to Use CSS Modules vs Tailwind

| Use Case | Solution | Example |
|----------|----------|---------|
| Layout & spacing | Tailwind utilities | `flex gap-4 p-6` |
| Colors & typography | Tailwind utilities | `text-gray-900 font-bold` |
| Hover states | Tailwind utilities | `hover:bg-blue-700` |
| Complex animations | CSS Modules | Keyframes, multi-step |
| Pseudo-elements | CSS Modules | `::before`, `::after` |
| Component variants | CSS Modules with @apply | Button variants |
| Unique gradients | CSS Modules | Complex gradient patterns |
| Browser-specific styles | CSS Modules | `-webkit-`, `-moz-` |

---

## Summary: CSS Modules Integration

### Key Takeaways:

1. **Use @apply judiciously** - Only for repeated patterns, not one-off utilities
2. **CSS for animations** - Complex keyframes and transitions
3. **Combine approaches** - CSS Modules for component styles, Tailwind for utilities
4. **Allow overrides** - Accept className prop for additional Tailwind utilities
5. **Semantic structure** - Use CSS Modules for component structure, Tailwind for variations

### Complete Integration Workflow:

```
1. Create component structure
   ‚îú‚îÄ‚îÄ Component.jsx
   ‚îî‚îÄ‚îÄ Component.module.css

2. Define base styles with @apply in CSS Module

3. Add complex styles (animations, pseudo-elements) in CSS

4. Use utility classes for one-off adjustments

5. Allow className prop for consumer overrides
```

This approach gives you the best of both worlds: Tailwind's utility-first speed and CSS Modules' scoped complexity handling.

---

## 2. With Styled Components

### What is Styled Components?

Styled Components is a popular CSS-in-JS library that allows you to write CSS directly in JavaScript using tagged template literals. It provides:

- üé® **Component-scoped styles** - No global pollution
- üí™ **Dynamic styling** - Props-based styling
- üîÑ **Automatic critical CSS** - Only loads styles needed
- üéØ **TypeScript support** - Type-safe styling
- üåô **Theming** - Built-in theme provider

### Integration with twin.macro

`twin.macro` bridges Tailwind and styled-components, letting you use Tailwind classes inside styled-components.

#### Installation

```bash
npm install styled-components
npm install -D twin.macro @babel/plugin-macros
```

#### Configuration

**babel-plugin-macros.config.js:**
```javascript
module.exports = {
  twin: {
    preset: 'styled-components',
  },
};
```

**.babelrc:**
```json
{
  "plugins": [
    "babel-plugin-macros",
    ["babel-plugin-styled-components", {
      "ssr": false
    }]
  ]
}
```

### Basic Usage

```jsx
import tw from 'twin.macro';

// Simple component with Tailwind classes
const Button = tw.button`
  px-6 py-3 bg-blue-600 text-white rounded-lg
  hover:bg-blue-700 transition-colors
  font-semibold
`;

// Usage
function App() {
  return <Button>Click Me</Button>;
}
```

**What Happens:**
- `tw.button` creates a styled button component
- Classes inside backticks are Tailwind utilities
- Result: Styled component with Tailwind styling

### Advanced Patterns

#### 1. Conditional Styling with Props

```jsx
import tw, { styled } from 'twin.macro';

// Props-based conditional styling
const Button = styled.button(({ variant, size, fullWidth }) => [
  // Base styles (always applied)
  tw`px-6 py-3 rounded-lg font-semibold transition-all`,
  tw`focus:outline-none focus:ring-2 focus:ring-offset-2`,
  
  // Conditional styles based on props
  variant === 'primary' && tw`bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500`,
  variant === 'secondary' && tw`bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500`,
  variant === 'danger' && tw`bg-red-600 text-white hover:bg-red-700 focus:ring-red-500`,
  variant === 'outline' && tw`border-2 border-blue-600 text-blue-600 bg-white hover:bg-blue-50`,
  
  size === 'small' && tw`text-sm px-4 py-2`,
  size === 'large' && tw`text-lg px-8 py-4`,
  
  fullWidth && tw`w-full`,
]);

// Usage
<Button variant="primary">Primary</Button>
<Button variant="danger" size="large">Delete</Button>
<Button variant="outline" fullWidth>Full Width Outline</Button>
```

#### 2. Extending Styled Components

```jsx
import tw, { styled } from 'twin.macro';

// Base button
const Button = tw.button`
  px-6 py-3 rounded-lg font-semibold transition-colors
  bg-blue-600 text-white hover:bg-blue-700
`;

// Extend with additional styles
const IconButton = styled(Button)`
  ${tw`flex items-center justify-center gap-2`}
`;

const GradientButton = styled(Button)`
  ${tw`bg-gradient-to-r from-purple-500 to-pink-500`}
  ${tw`hover:from-purple-600 hover:to-pink-600`}
  
  /* Custom CSS can be mixed in */
  box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
  
  &:hover {
    box-shadow: 0 6px 20px rgba(168, 85, 247, 0.6);
  }
`;

const PulsingButton = styled(Button)`
  ${tw`relative overflow-hidden`}
  
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }
  
  &:hover::before {
    width: 300px;
    height: 300px;
  }
`;

// Usage
<IconButton>
  <svg>...</svg>
  Click Me
</IconButton>

<GradientButton>Gradient Style</GradientButton>

<PulsingButton>Hover for Effect</PulsingButton>
```

#### 3. Theme Integration

```jsx
import tw, { styled, theme } from 'twin.macro';
import { ThemeProvider } from 'styled-components';

// Custom theme
const customTheme = {
  colors: {
    primary: '#3b82f6',
    secondary: '#8b5cf6',
  },
};

// Component using theme
const ThemedButton = styled.button(({ variant }) => [
  tw`px-6 py-3 rounded-lg font-semibold`,
  variant === 'primary' && `
    background-color: ${theme`colors.blue.600`};
    color: white;
  `,
]);

// App with theme provider
function App() {
  return (
    <ThemeProvider theme={customTheme}>
      <ThemedButton variant="primary">Themed Button</ThemedButton>
    </ThemeProvider>
  );
}
```

#### 4. Complex Component Example

```jsx
import tw, { styled, css } from 'twin.macro';

// Animated card component
const Card = styled.div(({ featured, hoverable }) => [
  tw`bg-white rounded-xl shadow-lg overflow-hidden`,
  tw`transition-all duration-300`,
  
  featured && tw`border-2 border-blue-500`,
  featured && css`
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
  `,
  
  hoverable && tw`hover:shadow-2xl hover:-translate-y-2`,
]);

const CardImage = styled.div`
  ${tw`relative h-48 overflow-hidden bg-gray-200`}
  
  img {
    ${tw`w-full h-full object-cover transition-transform duration-500`}
  }
  
  &:hover img {
    ${tw`scale-110`}
  }
`;

const CardOverlay = styled.div`
  ${tw`absolute inset-0 bg-black/50 flex items-center justify-center gap-3`}
  ${tw`opacity-0 transition-opacity duration-300`}
  
  ${Card}:hover & {
    ${tw`opacity-100`}
  }
`;

const CardContent = tw.div`p-6`;

const CardTitle = tw.h3`text-xl font-bold text-gray-900 mb-2 line-clamp-2`;

const CardDescription = tw.p`text-gray-600 text-sm mb-4 line-clamp-3`;

const CardFooter = tw.div`
  px-6 py-4 bg-gray-50 border-t border-gray-200
  flex items-center justify-between
`;

const PrimaryButton = tw.button`
  px-4 py-2 bg-blue-600 text-white rounded-lg
  hover:bg-blue-700 transition-colors
  font-medium text-sm
`;

const SecondaryButton = tw.button`
  px-4 py-2 border border-gray-300 rounded-lg
  hover:bg-gray-50 transition-colors
  font-medium text-sm
`;

// Complete usage
function ProductCard({ product, featured }) {
  return (
    <Card featured={featured} hoverable>
      <CardImage>
        <img src={product.image} alt={product.name} />
        <CardOverlay>
          <button tw="p-3 bg-white rounded-full hover:bg-gray-100 transition-colors">
            <svg tw="w-5 h-5">üëÅÔ∏è</svg>
          </button>
          <button tw="p-3 bg-white rounded-full hover:bg-gray-100 transition-colors">
            <svg tw="w-5 h-5">‚ù§Ô∏è</svg>
          </button>
        </CardOverlay>
      </CardImage>
      
      <CardContent>
        <CardTitle>{product.name}</CardTitle>
        <CardDescription>{product.description}</CardDescription>
        
        <div tw="flex items-baseline gap-2">
          <span tw="text-2xl font-bold text-gray-900">${product.price}</span>
          {product.oldPrice && (
            <span tw="text-sm text-gray-500 line-through">${product.oldPrice}</span>
          )}
        </div>
      </CardContent>
      
      <CardFooter>
        <span tw="text-sm text-gray-600">{product.category}</span>
        <PrimaryButton>Add to Cart</PrimaryButton>
      </CardFooter>
    </Card>
  );
}
```

### When to Use Styled Components + Tailwind

**‚úÖ Great for:**
- React-based projects
- Dynamic theming
- Complex component libraries
- When team prefers CSS-in-JS

**‚ùå Not ideal for:**
- Simple projects (overhead)
- SSR-first apps (runtime cost)
- When bundle size is critical
- Teams unfamiliar with CSS-in-JS

---

## 3. With Headless UI

### What is Headless UI?

Headless UI is a collection of completely unstyled, accessible UI components made by the Tailwind team. It provides:

- ‚ôø **Fully accessible** - WAI-ARIA compliant
- ‚å®Ô∏è **Keyboard navigation** - Built-in
- üé® **Completely unstyled** - Style with Tailwind
- ‚öõÔ∏è **React & Vue** - Framework support
- ü™∂ **Zero dependencies** - Lightweight

### Installation

```bash
# For React
npm install @headlessui/react

# For Vue
npm install @headlessui/vue
```

### Available Components

| Component | Purpose | Use Case |
|-----------|---------|----------|
| `<Menu>` | Dropdown menus | User menus, action menus |
| `<Listbox>` | Custom select | Styled dropdowns |
| `<Combobox>` | Autocomplete | Search, autocomplete |
| `<Switch>` | Toggle switch | Settings, preferences |
| `<Disclosure>` | Accordion | FAQs, collapsible content |
| `<Dialog>` | Modal dialog | Confirmations, forms |
| `<Popover>` | Popover menu | Help text, flyouts |
| `<RadioGroup>` | Radio buttons | Multiple choice |
| `<Tab>` | Tab interface | Tabbed content |
| `<Transition>` | Animations | Smooth transitions |

### Example 1: Dropdown Menu

```jsx
import { Menu } from '@headlessui/react';

function DropdownMenu() {
  return (
    <Menu as="div" className="relative inline-block text-left">
      {/* Trigger button */}
      <Menu.Button className="inline-flex items-center gap-2 px-4 py-2 
                              bg-blue-600 text-white rounded-lg
                              hover:bg-blue-700 transition-colors
                              focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500">
        Options
        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
        </svg>
      </Menu.Button>

      {/* Dropdown panel */}
      <Menu.Items className="absolute right-0 mt-2 w-56 origin-top-right
                            bg-white rounded-xl shadow-xl border border-gray-200
                            focus:outline-none
                            divide-y divide-gray-100
                            py-1">
        {/* Action items */}
        <div className="px-1 py-1">
          <Menu.Item>
            {({ active }) => (
              <button
                className={`${
                  active ? 'bg-blue-500 text-white' : 'text-gray-900'
                } group flex w-full items-center gap-2 rounded-lg px-4 py-2 text-sm transition-colors`}
              >
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
                Edit
              </button>
            )}
          </Menu.Item>
          <Menu.Item>
            {({ active }) => (
              <button
                className={`${
                  active ? 'bg-blue-500 text-white' : 'text-gray-900'
                } group flex w-full items-center gap-2 rounded-lg px-4 py-2 text-sm transition-colors`}
              >
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                Duplicate
              </button>
            )}
          </Menu.Item>
        </div>
        
        {/* Danger action */}
        <div className="px-1 py-1">
          <Menu.Item>
            {({ active }) => (
              <button
                className={`${
                  active ? 'bg-red-500 text-white' : 'text-red-600'
                } group flex w-full items-center gap-2 rounded-lg px-4 py-2 text-sm transition-colors`}
              >
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
                Delete
              </button>
            )}
          </Menu.Item>
        </div>
      </Menu.Items>
    </Menu>
  );
}
```

**Key Points:**
- `Menu.Button` and `Menu.Items` are connected automatically
- `active` prop indicates hover/focus state
- Keyboard navigation works out of the box (Arrow keys, Enter, Escape)
- Clicking outside closes menu
- Focus management handled automatically

### Example 2: Custom Select (Listbox)

```jsx
import { useState, Fragment } from 'react';
import { Listbox, Transition } from '@headlessui/react';

const people = [
  { id: 1, name: 'Wade Cooper', avatar: 'https://i.pravatar.cc/150?img=1' },
  { id: 2, name: 'Arlene Mccoy', avatar: 'https://i.pravatar.cc/150?img=2' },
  { id: 3, name: 'Devon Webb', avatar: 'https://i.pravatar.cc/150?img=3' },
  { id: 4, name: 'Tom Cook', avatar: 'https://i.pravatar.cc/150?img=4' },
  { id: 5, name: 'Tanya Fox', avatar: 'https://i.pravatar.cc/150?img=5' },
];

function CustomSelect() {
  const [selected, setSelected] = useState(people[0]);

  return (
    <div className="w-72">
      <Listbox value={selected} onChange={setSelected}>
        <div className="relative mt-1">
          <Listbox.Label className="block text-sm font-medium text-gray-700 mb-2">
            Assigned to
          </Listbox.Label>
          
          {/* Button */}
          <Listbox.Button className="relative w-full cursor-pointer rounded-lg 
                                     bg-white py-3 pl-3 pr-10 text-left
                                     border-2 border-gray-300
                                     hover:border-gray-400
                                     focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
                                     transition-all">
            <span className="flex items-center gap-3">
              <img 
                src={selected.avatar} 
                alt="" 
                className="h-6 w-6 rounded-full"
              />
              <span className="block truncate">{selected.name}</span>
            </span>
            <span className="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2">
              <svg className="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4" />
              </svg>
            </span>
          </Listbox.Button>

          {/* Options with transition */}
          <Transition
            as={Fragment}
            leave="transition ease-in duration-100"
            leaveFrom="opacity-100"
            leaveTo="opacity-0"
          >
            <Listbox.Options className="absolute z-10 mt-1 max-h-60 w-full overflow-auto
                                        rounded-lg bg-white py-1 shadow-xl
                                        border border-gray-200
                                        focus:outline-none">
              {people.map((person) => (
                <Listbox.Option
                  key={person.id}
                  value={person}
                  className={({ active }) =>
                    `relative cursor-pointer select-none py-3 pl-3 pr-9 ${
                      active ? 'bg-blue-500 text-white' : 'text-gray-900'
                    } transition-colors`
                  }
                >
                  {({ selected, active }) => (
                    <>
                      <div className="flex items-center gap-3">
                        <img 
                          src={person.avatar} 
                          alt="" 
                          className="h-6 w-6 rounded-full"
                        />
                        <span className={`block truncate ${
                          selected ? 'font-semibold' : 'font-normal'
                        }`}>
                          {person.name}
                        </span>
                      </div>
                      {selected && (
                        <span className={`absolute inset-y-0 right-0 flex items-center pr-3 ${
                          active ? 'text-white' : 'text-blue-600'
                        }`}>
                          <svg className="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                          </svg>
                        </span>
                      )}
                    </>
                  )}
                </Listbox.Option>
              ))}
            </Listbox.Options>
          </Transition>
        </div>
      </Listbox>
    </div>
  );
}
```

### Example 3: Modal Dialog

```jsx
import { Fragment, useState } from 'react';
import { Dialog, Transition } from '@headlessui/react';

function ConfirmationModal() {
  const [isOpen, setIsOpen] = useState(false);

  function closeModal() {
    setIsOpen(false);
  }

  function openModal() {
    setIsOpen(true);
  }

  return (
    <>
      {/* Trigger button */}
      <button
        onClick={openModal}
        className="px-6 py-3 bg-red-600 text-white rounded-lg font-semibold
                   hover:bg-red-700 transition-colors"
      >
        Delete Account
      </button>

      {/* Modal */}
      <Transition appear show={isOpen} as={Fragment}>
        <Dialog as="div" className="relative z-50" onClose={closeModal}>
          {/* Backdrop with transition */}
          <Transition.Child
            as={Fragment}
            enter="ease-out duration-300"
            enterFrom="opacity-0"
            enterTo="opacity-100"
            leave="ease-in duration-200"
            leaveFrom="opacity-100"
            leaveTo="opacity-0"
          >
            <div className="fixed inset-0 bg-black/50 backdrop-blur-sm" />
          </Transition.Child>

          {/* Modal panel */}
          <div className="fixed inset-0 overflow-y-auto">
            <div className="flex min-h-full items-center justify-center p-4">
              <Transition.Child
                as={Fragment}
                enter="ease-out duration-300"
                enterFrom="opacity-0 scale-95"
                enterTo="opacity-100 scale-100"
                leave="ease-in duration-200"
                leaveFrom="opacity-100 scale-100"
                leaveTo="opacity-0 scale-95"
              >
                <Dialog.Panel className="w-full max-w-md transform overflow-hidden
                                        rounded-2xl bg-white p-6 shadow-2xl
                                        transition-all">
                  {/* Icon */}
                  <div className="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 mb-4">
                    <svg className="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                  </div>

                  {/* Title */}
                  <Dialog.Title className="text-2xl font-bold text-gray-900 mb-2 text-center">
                    Delete Account
                  </Dialog.Title>

                  {/* Description */}
                  <Dialog.Description className="text-gray-600 mb-6 text-center">
                    Are you sure you want to delete your account? 
                    This action cannot be undone and all your data will be permanently removed.
                  </Dialog.Description>

                  {/* Actions */}
                  <div className="flex gap-3">
                    <button
                      onClick={closeModal}
                      className="flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg
                                hover:bg-gray-50 transition-colors
                                font-semibold text-gray-700"
                    >
                      Cancel
                    </button>
                    <button
                      onClick={() => {
                        // Handle delete
                        console.log('Account deleted');
                        closeModal();
                      }}
                      className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg
                                hover:bg-red-700 transition-colors
                                font-semibold"
                    >
                      Delete
                    </button>
                  </div>
                </Dialog.Panel>
              </Transition.Child>
            </div>
          </div>
        </Dialog>
      </Transition>
    </>
  );
}
```

### Example 4: Toggle Switch

```jsx
import { useState } from 'react';
import { Switch } from '@headlessui/react';

function ToggleWithLabel() {
  const [enabled, setEnabled] = useState(false);

  return (
    <Switch.Group>
      <div className="flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200">
        <Switch.Label className="mr-4 cursor-pointer">
          <span className="text-sm font-medium text-gray-900">
            Enable notifications
          </span>
          <span className="block text-sm text-gray-500">
            Get notified about new updates
          </span>
        </Switch.Label>
        
        <Switch
          checked={enabled}
          onChange={setEnabled}
          className={`${enabled ? 'bg-blue-600' : 'bg-gray-300'}
            relative inline-flex h-6 w-11 items-center rounded-full
            transition-colors duration-200 ease-in-out
            focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2`}
        >
          <span className="sr-only">Enable notifications</span>
          <span
            className={`${enabled ? 'translate-x-6' : 'translate-x-1'}
              inline-block h-4 w-4 transform rounded-full bg-white
              transition-transform duration-200 ease-in-out`}
          />
        </Switch>
      </div>
    </Switch.Group>
  );
}
```

---

## 4. Class Merging (clsx/tailwind-merge)

### The Problem: Class Conflicts

When building component libraries, users need to override default styles:

```jsx
// Component definition
function Button({ className, children }) {
  return (
    <button className={`px-4 py-2 bg-blue-500 ${className}`}>
      {children}
    </button>
  );
}

// User tries to override padding
<Button className="px-8">Click</Button>

// Result HTML: class="px-4 py-2 bg-blue-500 px-8"
// Problem: Both px-4 and px-8 are applied
// CSS: px-8 wins, but px-4 is still in HTML (wasted bytes)
```

### Solution: tailwind-merge

`tailwind-merge` intelligently merges Tailwind classes:

#### Installation

```bash
npm install tailwind-merge clsx
```

#### Basic Usage

```javascript
import { twMerge } from 'tailwind-merge';

// Without merge
const classes = twMerge('px-4 py-2 bg-blue-500', 'px-8');
// Result: "py-2 bg-blue-500 px-8"
// px-4 is removed, px-8 remains

// Handles conflicts
twMerge('text-red-500', 'text-blue-500');
// Result: "text-blue-500" (last wins, first removed)

twMerge('bg-gray-100 bg-red-500 bg-blue-500');
// Result: "bg-blue-500" (all but last removed)
```

### Creating the cn() Helper

```javascript
// lib/utils.js
import { clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs) {
  return twMerge(clsx(inputs));
}

// Usage
cn('px-4 py-2', 'px-8') // "py-2 px-8"
cn('text-red-500', condition && 'text-blue-500') // Handles conditionals
cn('bg-red-500', null, undefined, 'bg-blue-500') // "bg-blue-500"
cn({ 'text-red-500': isError, 'text-green-500': isSuccess }) // Object syntax
```

### Real Component Example

```jsx
import { cn } from '@/lib/utils';

function Button({ 
  children, 
  variant = 'primary',
  size = 'medium',
  fullWidth = false,
  className,
  ...props 
}) {
  return (
    <button
      className={cn(
        // Base styles (always applied)
        'font-semibold rounded-lg transition-all',
        'focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',
        'disabled:opacity-50 disabled:cursor-not-allowed',
        
        // Variant styles
        variant === 'primary' && 'bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500',
        variant === 'secondary' && 'bg-gray-200 text-gray-800 hover:bg-gray-300 focus-visible:ring-gray-500',
        variant === 'danger' && 'bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500',
        variant === 'outline' && 'border-2 border-blue-600 text-blue-600 bg-white hover:bg-blue-50',
        
        // Size styles
        size === 'small' && 'px-3 py-1.5 text-sm',
        size === 'medium' && 'px-4 py-2 text-base',
        size === 'large' && 'px-6 py-3 text-lg',
        
        // Full width
        fullWidth && 'w-full',
        
        // User overrides (applied last, will win conflicts)
        className
      )}
      {...props}
    >
      {children}
    </button>
  );
}

// Usage examples
<Button>Default</Button>
<Button className="px-8">Custom padding overrides default px-4</Button>
<Button size="large" className="py-6">Only py overridden, px from "large" remains</Button>
<Button className="bg-purple-600 hover:bg-purple-700">Completely different colors</Button>
```

### Advanced: Class Variance Authority

For production component libraries, use `class-variance-authority`:

```bash
npm install class-variance-authority
```

```jsx
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const buttonVariants = cva(
  // Base styles
  'inline-flex items-center justify-center rounded-lg font-semibold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',
  {
    variants: {
      variant: {
        default: 'bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500',
        destructive: 'bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500',
        outline: 'border-2 border-blue-600 text-blue-600 bg-white hover:bg-blue-50 focus-visible:ring-blue-500',
        secondary: 'bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-400',
        ghost: 'hover:bg-gray-100 text-gray-700 focus-visible:ring-gray-400',
        link: 'text-blue-600 underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 rounded-md px-3 text-sm',
        lg: 'h-11 rounded-md px-8',
        icon: 'h-10 w-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  }
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {}

export function Button({ 
  className, 
  variant, 
  size, 
  ...props 
}: ButtonProps) {
  return (
    <button
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  );
}

// Usage with TypeScript autocomplete
<Button variant="destructive" size="lg">Delete</Button>
<Button variant="ghost" className="mt-4">Ghost Button</Button>
```

---

## Complete Real-World Examples

### Dashboard with All Integration Patterns

```jsx
// Uses: CSS Modules, Headless UI, tailwind-merge
import { Menu } from '@headlessui/react';
import { cn } from '@/lib/utils';
import styles from './Dashboard.module.css';

function Dashboard() {
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header with Headless UI dropdown */}
      <header className="bg-white border-b border-gray-200 sticky top-0 z-40">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <h1 className="text-2xl font-bold text-gray-900">Dashboard</h1>
            
            {/* User menu with Headless UI */}
            <Menu as="div" className="relative">
              <Menu.Button className="flex items-center gap-2 px-3 py-2 hover:bg-gray-100 rounded-lg transition-colors">
                <img src="avatar.jpg" alt="User" className="w-8 h-8 rounded-full" />
                <span className="font-medium">John Doe</span>
              </Menu.Button>
              <Menu.Items className="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-1">
                <Menu.Item>
                  {({ active }) => (
                    <a className={cn('block px-4 py-2', active && 'bg-gray-100')} href="/profile">
                      Profile
                    </a>
                  )}
                </Menu.Item>
                <Menu.Item>
                  {({ active }) => (
                    <a className={cn('block px-4 py-2', active && 'bg-gray-100')} href="/settings">
                      Settings
                    </a>
                  )}
                </Menu.Item>
              </Menu.Items>
            </Menu>
          </div>
        </div>
      </header>

      {/* Stats grid with CSS Module animations */}
      <main className="max-w-7xl mx-auto px-4 py-8">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <div className={cn(styles.statCard, 'bg-white')}>
            <div className={styles.statIcon}>
              <svg>...</svg>
            </div>
            <h3 className="text-sm text-gray-600 mb-1">Total Users</h3>
            <p className="text-3xl font-bold">2,847</p>
            <p className="text-sm text-green-600 mt-2">‚Üë 12% from last month</p>
          </div>
          {/* More stat cards... */}
        </div>
      </main>
    </div>
  );
}
```

---

## Summary

### Integration Strategy Decision Tree

```
Need to integrate Tailwind?
‚îú‚îÄ‚îÄ Have existing CSS architecture?
‚îÇ   ‚îú‚îÄ‚îÄ Yes ‚Üí CSS Modules for gradual migration
‚îÇ   ‚îî‚îÄ‚îÄ No ‚Üí Continue reading
‚îú‚îÄ‚îÄ Building React component library?
‚îÇ   ‚îú‚îÄ‚îÄ Yes ‚Üí Use tailwind-merge + cva
‚îÇ   ‚îî‚îÄ‚îÄ No ‚Üí Continue reading
‚îú‚îÄ‚îÄ Need accessible components?
‚îÇ   ‚îú‚îÄ‚îÄ Yes ‚Üí Use Headless UI
‚îÇ   ‚îî‚îÄ‚îÄ No ‚Üí Continue reading
‚îú‚îÄ‚îÄ Team prefers CSS-in-JS?
‚îÇ   ‚îú‚îÄ‚îÄ Yes ‚Üí Use twin.macro + styled-components
‚îÇ   ‚îî‚îÄ‚îÄ No ‚Üí Use pure Tailwind
‚îî‚îÄ‚îÄ Simple project?
    ‚îî‚îÄ‚îÄ Yes ‚Üí Just use Tailwind utilities
```

### Key Takeaways

1. **CSS Modules**: Great for complex styles and gradual adoption
2. **Styled Components**: Best for React + CSS-in-JS fans
3. **Headless UI**: Essential for accessible interactive components
4. **tailwind-merge**: Critical for component libraries

### Best Practices

‚úÖ **DO:**
- Use the simplest solution that works
- Combine tools when it makes sense
- Think about maintainability
- Consider team expertise

‚ùå **DON'T:**
- Over-engineer simple projects
- Use all patterns in one project
- Ignore bundle size implications
- Forget about accessibility

---

*Master these integration patterns to use Tailwind effectively in any project!*
# Chapter 22: Styling Solutions

## Overview

Styling in React has evolved significantly, offering multiple approaches from traditional CSS to modern CSS-in-JS solutions. Each approach has its strengths and use cases.

---

## 22.1 CSS Modules

### What are CSS Modules?

CSS Modules are CSS files where class names are scoped locally by default. They solve the problem of global CSS namespace collision.

### How CSS Modules Work

CSS Modules automatically generate unique class names during the build process, ensuring styles don't conflict across components.

### Basic Usage

**Button.module.css:**
```css
/* All classes are locally scoped */
.button {
  padding: 10px 20px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  font-size: 16px;
}

.primary {
  background-color: #007bff;
  color: white;
}

.secondary {
  background-color: #6c757d;
  color: white;
}

.large {
  padding: 15px 30px;
  font-size: 18px;
}

.disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
```

**Button.jsx:**
```javascript
import styles from './Button.module.css';

function Button({ children, variant = 'primary', size = 'medium', disabled }) {
  return (
    <button 
      className={`${styles.button} ${styles[variant]} ${size === 'large' ? styles.large : ''}`}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

// Usage
<Button variant="primary">Click Me</Button>
<Button variant="secondary" size="large">Large Button</Button>
```

### Composition in CSS Modules

```css
/* Card.module.css */
.card {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
}

/* Compose from another class */
.cardHighlighted {
  composes: card;
  border-color: #007bff;
  box-shadow: 0 4px 6px rgba(0, 123, 255, 0.1);
}

/* Compose from another file */
.button {
  composes: btn from './shared.module.css';
  background-color: blue;
}
```

### Global Styles in CSS Modules

```css
/* App.module.css */
:global {
  /* Global styles */
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
  }
}

/* Mix global and local */
:global(.theme-dark) .card {
  background-color: #333;
  color: white;
}
```

### Using CSS Variables with Modules

```css
/* theme.module.css */
:root {
  --primary-color: #007bff;
  --secondary-color: #6c757d;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
}

.button {
  background-color: var(--primary-color);
  padding: var(--spacing-md);
}
```

### Advanced Patterns

**Dynamic Class Names:**
```javascript
import styles from './Card.module.css';
import classNames from 'classnames'; // or use clsx

function Card({ variant, highlighted, className }) {
  return (
    <div className={classNames(
      styles.card,
      {
        [styles.cardPrimary]: variant === 'primary',
        [styles.cardSecondary]: variant === 'secondary',
        [styles.highlighted]: highlighted
      },
      className
    )}>
      Content
    </div>
  );
}
```

**TypeScript Support:**
```typescript
// Button.module.css.d.ts (auto-generated with typescript-plugin-css-modules)
declare const styles: {
  readonly button: string;
  readonly primary: string;
  readonly secondary: string;
  readonly large: string;
};

export default styles;

// TypeScript knows about all class names
import styles from './Button.module.css';
// styles. will show autocomplete
```

### Pros and Cons

**Pros:**
- ✅ Scoped styles prevent conflicts
- ✅ Works with existing CSS knowledge
- ✅ No runtime overhead
- ✅ Great browser support
- ✅ Can use preprocessors (Sass, Less)
- ✅ Easy debugging (see actual class names)

**Cons:**
- ❌ More files to manage
- ❌ Can't use dynamic styles easily
- ❌ Class name composition can be verbose
- ❌ Less powerful than CSS-in-JS for theming

---

## 22.2 Styled Components

### What is Styled Components?

Styled Components is a CSS-in-JS library that allows you to write actual CSS code to style React components, with JavaScript template literals.

### Installation

```bash
npm install styled-components
# TypeScript types
npm install -D @types/styled-components
```

### Basic Usage

```javascript
import styled from 'styled-components';

// Create a styled component
const Button = styled.button`
  padding: 10px 20px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  font-size: 16px;
  background-color: #007bff;
  color: white;
  
  &:hover {
    background-color: #0056b3;
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
`;

// Usage
function App() {
  return (
    <Button onClick={() => alert('Clicked!')}>
      Click Me
    </Button>
  );
}
```

### Props-Based Styling

```javascript
const Button = styled.button`
  padding: ${props => props.size === 'large' ? '15px 30px' : '10px 20px'};
  font-size: ${props => props.size === 'large' ? '18px' : '16px'};
  background-color: ${props => {
    switch(props.variant) {
      case 'primary': return '#007bff';
      case 'secondary': return '#6c757d';
      case 'danger': return '#dc3545';
      default: return '#007bff';
    }
  }};
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  
  &:hover {
    opacity: 0.9;
  }
  
  ${props => props.outlined && `
    background-color: transparent;
    color: ${props.variant === 'primary' ? '#007bff' : '#6c757d'};
    border: 2px solid currentColor;
  `}
`;

// Usage
<Button variant="primary" size="large">Large Primary</Button>
<Button variant="secondary">Secondary</Button>
<Button variant="danger" outlined>Outlined Danger</Button>
```

### Extending Styles

```javascript
const Button = styled.button`
  padding: 10px 20px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
`;

// Extend Button with additional styles
const PrimaryButton = styled(Button)`
  background-color: #007bff;
  color: white;
`;

const DangerButton = styled(Button)`
  background-color: #dc3545;
  color: white;
`;

// Extend and override
const LargePrimaryButton = styled(PrimaryButton)`
  padding: 15px 30px;
  font-size: 18px;
`;
```

### Styling Existing Components

```javascript
// Style a custom component
const CustomLink = ({ className, children, ...props }) => (
  <a className={className} {...props}>
    {children}
  </a>
);

const StyledLink = styled(CustomLink)`
  color: #007bff;
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
`;

// Style React Router Link
import { Link } from 'react-router-dom';

const NavLink = styled(Link)`
  color: white;
  text-decoration: none;
  padding: 10px 15px;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`;
```

### Theming

```javascript
import { ThemeProvider } from 'styled-components';

// Define theme
const lightTheme = {
  colors: {
    primary: '#007bff',
    secondary: '#6c757d',
    background: '#ffffff',
    text: '#333333',
    border: '#dee2e6'
  },
  spacing: {
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px'
  },
  borderRadius: '4px',
  shadows: {
    sm: '0 1px 3px rgba(0,0,0,0.12)',
    md: '0 4px 6px rgba(0,0,0,0.1)',
    lg: '0 10px 15px rgba(0,0,0,0.1)'
  }
};

const darkTheme = {
  colors: {
    primary: '#0d6efd',
    secondary: '#6c757d',
    background: '#1a1a1a',
    text: '#ffffff',
    border: '#444444'
  },
  spacing: lightTheme.spacing,
  borderRadius: lightTheme.borderRadius,
  shadows: {
    sm: '0 1px 3px rgba(0,0,0,0.5)',
    md: '0 4px 6px rgba(0,0,0,0.4)',
    lg: '0 10px 15px rgba(0,0,0,0.4)'
  }
};

// Use theme in components
const Button = styled.button`
  background-color: ${props => props.theme.colors.primary};
  color: white;
  padding: ${props => props.theme.spacing.md};
  border-radius: ${props => props.theme.borderRadius};
  border: none;
  cursor: pointer;
  box-shadow: ${props => props.theme.shadows.sm};
  
  &:hover {
    box-shadow: ${props => props.theme.shadows.md};
  }
`;

const Card = styled.div`
  background-color: ${props => props.theme.colors.background};
  color: ${props => props.theme.colors.text};
  border: 1px solid ${props => props.theme.colors.border};
  border-radius: ${props => props.theme.borderRadius};
  padding: ${props => props.theme.spacing.lg};
  box-shadow: ${props => props.theme.shadows.md};
`;

// App component
function App() {
  const [isDark, setIsDark] = useState(false);
  
  return (
    <ThemeProvider theme={isDark ? darkTheme : lightTheme}>
      <Card>
        <Button onClick={() => setIsDark(!isDark)}>
          Toggle Theme
        </Button>
      </Card>
    </ThemeProvider>
  );
}
```

### Global Styles

```javascript
import { createGlobalStyle } from 'styled-components';

const GlobalStyle = createGlobalStyle`
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
    background-color: ${props => props.theme.colors.background};
    color: ${props => props.theme.colors.text};
    line-height: 1.6;
  }
  
  a {
    color: ${props => props.theme.colors.primary};
    text-decoration: none;
  }
  
  button {
    font-family: inherit;
  }
`;

// Usage
function App() {
  return (
    <ThemeProvider theme={theme}>
      <GlobalStyle />
      <YourComponents />
    </ThemeProvider>
  );
}
```

### Animations

```javascript
import styled, { keyframes } from 'styled-components';

// Define keyframe animation
const fadeIn = keyframes`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;

const spin = keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`;

// Use animation
const FadeInBox = styled.div`
  animation: ${fadeIn} 0.5s ease-in;
`;

const Spinner = styled.div`
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #007bff;
  border-radius: 50%;
  animation: ${spin} 1s linear infinite;
`;

// Conditional animation
const Button = styled.button`
  ${props => props.loading && `
    animation: ${pulse} 1.5s ease-in-out infinite;
  `}
`;
```

### CSS Helper Functions

```javascript
import styled, { css } from 'styled-components';

// Reusable CSS snippets
const flexCenter = css`
  display: flex;
  justify-content: center;
  align-items: center;
`;

const truncateText = css`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`;

const Card = styled.div`
  ${flexCenter}
  padding: 20px;
  border-radius: 8px;
`;

const Title = styled.h2`
  ${truncateText}
  max-width: 300px;
`;

// Media query helper
const media = {
  mobile: '@media (max-width: 768px)',
  tablet: '@media (max-width: 1024px)',
  desktop: '@media (min-width: 1025px)'
};

const Container = styled.div`
  width: 1200px;
  margin: 0 auto;
  
  ${media.tablet} {
    width: 100%;
    padding: 0 20px;
  }
  
  ${media.mobile} {
    padding: 0 10px;
  }
`;
```

### Attrs Method

```javascript
// Set default props and attributes
const Input = styled.input.attrs(props => ({
  type: props.type || 'text',
  size: props.size || 20
}))`
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
`;

// Computed attrs
const PasswordInput = styled.input.attrs({
  type: 'password',
  autoComplete: 'current-password'
})`
  padding: 10px;
  border: 1px solid #ddd;
`;

// Dynamic attrs
const Button = styled.button.attrs(props => ({
  'aria-label': props.ariaLabel || 'Button',
  'aria-pressed': props.active || false
}))`
  padding: 10px 20px;
  background: ${props => props.active ? '#007bff' : '#6c757d'};
`;
```

### Pros and Cons

**Pros:**
- ✅ True CSS-in-JS with full JavaScript power
- ✅ Automatic critical CSS extraction
- ✅ Easy dynamic styling with props
- ✅ Scoped styles by default
- ✅ Powerful theming support
- ✅ No class name bugs
- ✅ Server-side rendering support

**Cons:**
- ❌ Runtime overhead (styles generated at runtime)
- ❌ Larger bundle size
- ❌ Learning curve for template literals
- ❌ Can impact performance with many components
- ❌ Debugging can be harder (no class names)

---

## 22.3 Emotion

### What is Emotion?

Emotion is a performant and flexible CSS-in-JS library. It's similar to Styled Components but with some differences in API and performance characteristics.

### Installation

```bash
npm install @emotion/react @emotion/styled
```

### Two APIs

Emotion provides two ways to write styles:

1. **css prop** - Write styles directly on elements
2. **styled** - Create styled components (like styled-components)

### Using the css Prop

```javascript
/** @jsxImportSource @emotion/react */
import { css } from '@emotion/react';

function Button() {
  return (
    <button
      css={css`
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        
        &:hover {
          background-color: #0056b3;
        }
      `}
    >
      Click Me
    </button>
  );
}

// With object syntax
function Card() {
  return (
    <div
      css={{
        padding: '20px',
        backgroundColor: 'white',
        borderRadius: '8px',
        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
        '&:hover': {
          boxShadow: '0 4px 8px rgba(0,0,0,0.15)'
        }
      }}
    >
      Content
    </div>
  );
}
```

### Using styled API

```javascript
import styled from '@emotion/styled';

const Button = styled.button`
  padding: 10px 20px;
  background-color: ${props => props.primary ? '#007bff' : '#6c757d'};
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  
  &:hover {
    opacity: 0.9;
  }
`;

// Object syntax
const Card = styled.div({
  padding: '20px',
  backgroundColor: 'white',
  borderRadius: '8px',
  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
});

// With props
const Container = styled.div(props => ({
  maxWidth: props.wide ? '1400px' : '1200px',
  margin: '0 auto',
  padding: props.noPadding ? 0 : '20px'
}));
```

### Theming with Emotion

```javascript
import { ThemeProvider } from '@emotion/react';

const theme = {
  colors: {
    primary: '#007bff',
    secondary: '#6c757d',
    text: '#333333',
    background: '#ffffff'
  },
  spacing: (factor) => `${8 * factor}px`,
  breakpoints: {
    mobile: '@media (max-width: 768px)',
    tablet: '@media (max-width: 1024px)'
  }
};

function App() {
  return (
    <ThemeProvider theme={theme}>
      <YourComponents />
    </ThemeProvider>
  );
}

// Use theme
const Button = styled.button`
  background-color: ${props => props.theme.colors.primary};
  padding: ${props => props.theme.spacing(2)};
  
  ${props => props.theme.breakpoints.mobile} {
    padding: ${props => props.theme.spacing(1)};
  }
`;

// With css prop and theme
function Card() {
  return (
    <div
      css={theme => ({
        backgroundColor: theme.colors.background,
        padding: theme.spacing(3),
        [theme.breakpoints.mobile]: {
          padding: theme.spacing(2)
        }
      })}
    >
      Content
    </div>
  );
}
```

### Composition

```javascript
/** @jsxImportSource @emotion/react */
import { css } from '@emotion/react';

const baseButton = css`
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
`;

const primaryButton = css`
  ${baseButton}
  background-color: #007bff;
  color: white;
`;

const secondaryButton = css`
  ${baseButton}
  background-color: #6c757d;
  color: white;
`;

function Button({ variant = 'primary', children }) {
  const buttonStyle = variant === 'primary' ? primaryButton : secondaryButton;
  
  return <button css={buttonStyle}>{children}</button>;
}
```

### Global Styles

```javascript
import { Global, css } from '@emotion/react';

function App() {
  return (
    <>
      <Global
        styles={css`
          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
            line-height: 1.6;
          }
        `}
      />
      <YourComponents />
    </>
  );
}

// With theme
<Global
  styles={theme => css`
    body {
      background-color: ${theme.colors.background};
      color: ${theme.colors.text};
    }
  `}
/>
```

### Pros and Cons

**Pros:**
- ✅ Better performance than styled-components
- ✅ Smaller bundle size
- ✅ Flexible API (css prop or styled)
- ✅ Framework agnostic
- ✅ Source maps in dev
- ✅ Great TypeScript support

**Cons:**
- ❌ Requires JSX pragma or babel plugin
- ❌ Less popular than styled-components
- ❌ Learning two APIs can be confusing

---

## 22.4 Tailwind CSS

### What is Tailwind CSS?

Tailwind is a utility-first CSS framework. Instead of writing custom CSS, you compose styles using pre-defined utility classes.

### Installation with Vite

```bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

**tailwind.config.js:**
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        brand: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          500: '#0ea5e9',
          900: '#0c4a6e'
        }
      },
      spacing: {
        '128': '32rem',
        '144': '36rem'
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif']
      }
    },
  },
  plugins: [],
}
```

**src/index.css:**
```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

### Basic Usage

```javascript
function Button({ children, variant = 'primary' }) {
  const baseClasses = "px-4 py-2 rounded font-semibold transition-colors";
  
  const variantClasses = {
    primary: "bg-blue-500 text-white hover:bg-blue-600",
    secondary: "bg-gray-500 text-white hover:bg-gray-600",
    outline: "border-2 border-blue-500 text-blue-500 hover:bg-blue-50"
  };
  
  return (
    <button className={`${baseClasses} ${variantClasses[variant]}`}>
      {children}
    </button>
  );
}

// Usage
<Button variant="primary">Primary</Button>
<Button variant="secondary">Secondary</Button>
<Button variant="outline">Outline</Button>
```

### Responsive Design

```javascript
function Card() {
  return (
    <div className="
      p-4 md:p-6 lg:p-8
      w-full md:w-1/2 lg:w-1/3
      bg-white rounded-lg shadow-md
      hover:shadow-lg transition-shadow
    ">
      {/* 
        p-4: padding 1rem on mobile
        md:p-6: padding 1.5rem on tablet (768px+)
        lg:p-8: padding 2rem on desktop (1024px+)
        
        w-full: 100% width on mobile
        md:w-1/2: 50% width on tablet
        lg:w-1/3: 33.33% width on desktop
      */}
      <h2 className="text-xl md:text-2xl lg:text-3xl font-bold mb-4">
        Responsive Title
      </h2>
      <p className="text-gray-600 text-sm md:text-base">
        This card adapts to different screen sizes
      </p>
    </div>
  );
}
```

### Custom Components with @apply

```css
/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .btn {
    @apply px-4 py-2 rounded font-semibold transition-colors cursor-pointer;
  }
  
  .btn-primary {
    @apply btn bg-blue-500 text-white hover:bg-blue-600;
  }
  
  .btn-secondary {
    @apply btn bg-gray-500 text-white hover:bg-gray-600;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;
  }
}
```

```javascript
// Now use like regular classes
function Form() {
  return (
    <form className="card max-w-md mx-auto">
      <input className="input-field mb-4" placeholder="Email" />
      <input className="input-field mb-4" placeholder="Password" type="password" />
      <button className="btn-primary w-full">Sign In</button>
    </form>
  );
}
```

### Dark Mode

```javascript
// tailwind.config.js
export default {
  darkMode: 'class', // or 'media'
  // ...
}
```

```javascript
function Card() {
  return (
    <div className="
      bg-white dark:bg-gray-800
      text-gray-900 dark:text-white
      border border-gray-200 dark:border-gray-700
      rounded-lg p-6
    ">
      <h2 className="text-2xl font-bold mb-4">
        Card Title
      </h2>
      <p className="text-gray-600 dark:text-gray-300">
        This card supports dark mode
      </p>
    </div>
  );
}

// Toggle dark mode
function App() {
  const [isDark, setIsDark] = useState(false);
  
  useEffect(() => {
    if (isDark) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }, [isDark]);
  
  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900">
      <button onClick={() => setIsDark(!isDark)}>
        Toggle Dark Mode
      </button>
      <Card />
    </div>
  );
}
```

### Custom Utilities

```javascript
// tailwind.config.js
export default {
  theme: {
    extend: {
      // Add custom utilities
      animation: {
        'spin-slow': 'spin 3s linear infinite',
        'bounce-slow': 'bounce 3s infinite'
      },
      backgroundImage: {
        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
      }
    }
  },
  plugins: [
    // Add custom plugin
    function({ addUtilities }) {
      addUtilities({
        '.scrollbar-hide': {
          '-ms-overflow-style': 'none',
          'scrollbar-width': 'none',
          '&::-webkit-scrollbar': {
            display: 'none'
          }
        }
      })
    }
  ]
}
```

### Pros and Cons

**Pros:**
- ✅ Rapid development
- ✅ No CSS file clutter
- ✅ Consistent design system
- ✅ Great for prototyping
- ✅ Excellent documentation
- ✅ Very small production CSS (with purging)
- ✅ No naming conventions needed

**Cons:**
- ❌ HTML can become cluttered
- ❌ Learning curve for class names
- ❌ Less semantic HTML
- ❌ Harder to read component structure
- ❌ Build step required

---

## 22.5 CSS Variables (Custom Properties)

### What are CSS Variables?

CSS Custom Properties (variables) allow you to store values that you can reuse throughout your CSS.

### Basic Usage

```css
/* Define variables */
:root {
  --primary-color: #007bff;
  --secondary-color: #6c757d;
  --text-color: #333333;
  --background-color: #ffffff;
  --border-radius: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
}

/* Use variables */
.button {
  background-color: var(--primary-color);
  color: white;
  padding: var(--spacing-md);
  border-radius: var(--border-radius);
  font-family: var(--font-family);
}

.card {
  background-color: var(--background-color);
  color: var(--text-color);
  padding: var(--spacing-lg);
  border-radius: var(--border-radius);
}
```

### Theming with CSS Variables

```javascript
// Theme switcher
function ThemeToggle() {
  const [theme, setTheme] = useState('light');
  
  useEffect(() => {
    const root = document.documentElement;
    
    if (theme === 'dark') {
      root.style.setProperty('--primary-color', '#0d6efd');
      root.style.setProperty('--background-color', '#1a1a1a');
      root.style.setProperty('--text-color', '#ffffff');
      root.style.setProperty('--border-color', '#444444');
    } else {
      root.style.setProperty('--primary-color', '#007bff');
      root.style.setProperty('--background-color', '#ffffff');
      root.style.setProperty('--text-color', '#333333');
      root.style.setProperty('--border-color', '#dee2e6');
    }
  }, [theme]);
  
  return (
    <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>
      Toggle Theme
    </button>
  );
}
```

### Dynamic CSS Variables in React

```javascript
function ColorPicker() {
  const [hue, setHue] = useState(200);
  
  return (
    <div style={{ '--hue': hue }}>
      <input 
        type="range" 
        min="0" 
        max="360"
        value={hue}
        onChange={(e) => setHue(e.target.value)}
      />
      <style>{`
        .dynamic-box {
          background-color: hsl(var(--hue), 70%, 50%);
          border-color: hsl(var(--hue), 70%, 40%);
        }
      `}</style>
      <div className="dynamic-box">
        Color changes dynamically
      </div>
    </div>
  );
}
```

### Fallback Values

```css
.button {
  /* Fallback if variable not defined */
  background-color: var(--primary-color, #007bff);
  
  /* Nested fallback */
  color: var(--button-text-color, var(--text-color, #333333));
}
```

---

## Comparison Table

| Feature | CSS Modules | Styled Components | Emotion | Tailwind | CSS Variables |
|---------|------------|-------------------|---------|----------|---------------|
| Learning Curve | Low | Medium | Medium | Medium | Low |
| Bundle Size | Small | Large | Medium | Small* | N/A |
| Performance | Excellent | Good | Good | Excellent | Excellent |
| Dynamic Styling | Limited | Excellent | Excellent | Good | Good |
| TypeScript | Good | Excellent | Excellent | Good | N/A |
| Server-Side Rendering | Native | Supported | Supported | Native | Native |
| Theming | Manual | Built-in | Built-in | Configure | Manual |
| Developer Experience | Good | Excellent | Excellent | Excellent | Good |

*Small with PurgeCSS/JIT mode

---

## Choosing the Right Solution

### Use CSS Modules when:
- You prefer traditional CSS
- You want zero runtime overhead
- You need simple scoping
- Team knows CSS well

### Use Styled Components when:
- You need powerful theming
- You want full JavaScript integration
- You're building a component library
- Dynamic styling is crucial

### Use Emotion when:
- You need better performance than Styled Components
- You want flexibility (css prop or styled)
- Bundle size matters
- You need framework-agnostic solution

### Use Tailwind when:
- You want rapid development
- Consistency is important
- You're prototyping
- Design system is established

### Use CSS Variables when:
- You need simple theming
- Performance is critical
- You want minimal tooling
- Native solution is preferred

---

## Best Practices

### General
- ✅ Be consistent across your project
- ✅ Consider team expertise
- ✅ Measure performance impact
- ✅ Use preprocessors wisely
- ✅ Implement design tokens
- ✅ Document your styling approach

### CSS Modules
- ✅ Use composition for reusable styles
- ✅ Keep modules small and focused
- ✅ Use TypeScript declarations
- ✅ Organize by component

### CSS-in-JS
- ✅ Extract reusable styles
- ✅ Use theme for consistency
- ✅ Avoid inline styles in JSX
- ✅ Memoize styled components when needed
- ✅ Use global styles sparingly

### Tailwind
- ✅ Use @apply for repeated patterns
- ✅ Extend theme don't fight it
- ✅ Use component classes for complex components
- ✅ Enable JIT mode for faster builds
- ✅ Use plugins for extended functionality

This completes Chapter 22 on Styling Solutions!